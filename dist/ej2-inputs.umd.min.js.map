/*!
*  filename: ej2-inputs.umd.min.js.map
*  version : 1.0.19
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-inputs.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","index_3","__export","hasOwnProperty","Object","defineProperty","value","apply","numerictextbox_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","input_1","SPINICON","INTREGEXP","RegExp","NumericTextBox","_super","options","element","_this","isPrevFocused","decimalSeparator","intRegExp","isCalled","preRender","ejInstance","getValue","cloneElement","cloneNode","angularTagName","tagName","input","createElement","index","attributes","setAttribute","nodeName","nodeValue","innerHTML","parentNode","appendChild","removeChild","setValue","role","tabindex","autocomplete","aria-live","localeText","incrementTitle","decrementTitle","placeholder","l10n","L10n","locale","isValidState","inputStyle","inputName","cultureInfo","initCultureInfo","initCultureFunc","checkAttributes","prevValue","validateMinMax","validateStep","updatePlaceholder","render","toLowerCase","createWrapper","showSpinButton","spinBtnCreation","isNullOrUndefined","width","setStyleAttribute","container","formatUnit","changeValue","wireEvents","isNaN","decimals","setProperties","roundNumber","_i","attributes_1","prop","getAttribute","enabled","readonly","instance","getNumberParser","format","getConstant","Internationalization","currency","inputObj","Input","createInput","customTag","floatLabelType","properties","cssClass","enableRtl","addClass","aria-readonly","hiddenInput","attrs","type","removeAttribute","name","insertBefore","style","spinDown","appendSpan","title","aria-label","spinUp","wireSpinBtnEvents","min","Number","max","MAX_VALUE","formattedValue","aria-valuemin","toString","aria-valuemax","getNumberFormat","maximumFractionDigits","minimumFractionDigits","useGrouping","step","action","operation","isFocused","performAction","raiseChangeEvent","checkErrorClass","removeClass","aria-invalid","EventHandler","add","focusIn","focusOut","keyDownHandler","keyPressHandler","changeHandler","pasteHandler","Browser","touchStartEvent","mouseDownOnSpinner","touchEndEvent","mouseUpOnSpinner","touchMoveEvent","touchMoveOnSpinner","unwireEvents","remove","unwireSpinBtnEvents","event","parsedInput","updateValue","eventArgs","changeEventArgs","previousValue","merge","trigger","beforeUpdate","setTimeout","numericRegex","test","setElementValue","keyCode","preventDefault","updatedValue","correctRounding","strictMode","trimValue","result","floatExp","floatValue","floatStep","valueCount","exec","stepCount","Math","roundValue","precision","divide","pow","round","numberOfDecimals","decimalPart","split","modifyText","validateState","formatNumber","elementValue","aria-valuenow","val","currentValue","result1","result2","toFixed","cancelEvent","which","metaKey","ctrlKey","currentChar","String","fromCharCode","text","substring","selectionStart","selectionEnd","stopPropagation","numericObject","getNumericObject","fractionRule","validateDecimalOnType","mouseWheel","delta","rawEvent","wheelDelta","detail","formatValue","setSelectionRange","isDevice","value_1","focus","ele_1","getElementData","currentTarget","classList","contains","mouseUpClick","timeOut","setInterval","document","elementFromPoint","clientX","clientY","clearInterval","button","increment","decrement","destroy","detach","parentElement","getText","getPersistData","keyEntity","addOnPersist","onPropertyChanged","newProp","oldProp","_a","keys","setCssClass","setEnabled","setEnableRtl","setReadonly","setPlaceholder","setLocale","getModuleName","Component","Property","Event","NotifyPropertyChanges","numerictextboxHelper","CreateBuilder","CLASSNAMES","RTL","DISABLE","INPUT","INPUTGROUP","FLOATINPUT","FLOATLINE","FLOATTEXT","CLEARICON","CLEARICONHIDE","LABELTOP","LABELBOTTOM","NOFLOATLABEL","INPUTCUSTOMTAG","FLOATCUSTOMTAG","args","inputObject","buttons","clearButton","createInputContainer","createFloatingInput","addEventListener","parent","getParentNode","showClearButton","createClearButton","push","setPropertyValue","privateInputObj","_focusFn","label","getElementsByClassName","_blurFn","getElementsByTagName","wireFloatingEvents","unwireFloatingEvents","removeEventListener","floatLinelement","floatLabelElement","className","replace","aria-labelledby","updateLabelState","updateIconState","wireClearBtnEvents","readOnly","activeElement","validateLabel","tagClass","tag","elements","oldClass","textContent","aria-placeholder","isReadonly","isRtl","isEnable","disabledAttrs","disabled","aria-disabled","removeAttributes","addAttributes","removeFloating","inputEle","querySelector","addFloating","closest","iconEle","floatLine","floatText","iconClass","ele","form_validator_1","ErrorOption","VALIDATE_EMAIL","VALIDATE_URL","VALIDATE_DATE_ISO","VALIDATE_DIGITS","VALIDATE_PHONE","VALIDATE_CREDITCARD","FormValidator","FormValidator_1","validated","errorRules","allowSubmit","required","infoElement","inputElement","selectQuery","defaultMessages","email","url","date","dateIso","creditcard","number","digits","maxLength","minLength","rangeLength","range","regex","tel","pattern","equalTo","select","inputElements","selectAll","createHTML5Rules","addRules","rules","extend","removeRules","validate","selected","validateRules","indexOf","filter","data","rules_1","name_1","reset","elements_1","errorClass","getInputElement","getErrorElement","hideMessage","validClass","elements_2","defRules","acceptedTypes","allRule","_b","defRules_1","rule","defRule","JSON","parse","annotationRule","ruleCon","ruleName","rulesList","ruleFirstName","ruleSecondName","minvalue","maxvalue","message","annotationMessage","isCheckable","clickHandler","focusOutHandler","keyUpHandler","submitHandler","clearEvents","e","excludeKeys","rules_2","errorMessage","getErrorMessage","errorRule","isValid","ignore","removeErrorRules","showMessage","createErrorElement","errorElement","status","params","param","currentRule","formElement","checkValidator","ruleValue","formats","match","for","errorOption","Message","errorContainer","outerHTML","hasAttribute","containerId","divElement","customPlacement","nextSibling","display","checkRequired","splice","inputType","Base","option","Date","getTime","stringify","compareTo","Label"],"mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,gBAAZC,UAA0C,gBAAXC,QACxCA,OAAOD,QAAUD,EAAQG,QAAQ,6BAC7B,IAAqB,kBAAXC,SAAyBA,OAAOC,IAC9CD,QAAQ,wBAAyBJ,OAC7B,CACJ,GAAIM,GAAkCN,EAAX,gBAAZC,SAA+BE,QAAQ,wBAAmCJ,EAAK,wBAC9F,KAAI,GAAIQ,KAAKD,IAAuB,gBAAZL,SAAuBA,QAAUF,GAAMQ,GAAKD,EAAEC,KAErEC,KAAM,SAASC,GAClB,MAAgB,UAAUC,GAKhB,QAASC,GAAoBC,GAG5B,GAAGC,EAAiBD,GACnB,MAAOC,GAAiBD,GAAUX,OAGnC,IAAIC,GAASW,EAAiBD,IAC7BX,WACAa,GAAIF,EACJG,QAAQ,EAUT,OANAL,GAAQE,GAAUI,KAAKd,EAAOD,QAASC,EAAQA,EAAOD,QAASU,GAG/DT,EAAOa,QAAS,EAGTb,EAAOD,QAvBf,GAAIY,KAqCJ,OATAF,GAAoBM,EAAIP,EAGxBC,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,GAGjBR,EAAoB,KAK/B,SAAUT,EAAQD,EAASU,GAEhC,GAAIS,GAA8BC,CAAgCD,IAAgCT,EAAqBV,EAASU,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,QASlHW,MATuHD,EAAgC,SAAUlB,EAASF,EAASsB,EAASC,EAASC,GACnR,YACA,SAASC,GAAST,GACd,IAAK,GAAIE,KAAKF,GAAQhB,EAAQ0B,eAAeR,KAAIlB,EAAQkB,GAAKF,EAAEE,IAEpES,OAAOC,eAAe5B,EAAS,cAAgB6B,OAAO,IACtDJ,EAASH,GACTG,EAASF,GACTE,EAASD,IACXM,MAAM9B,EAASmB,MAA+ElB,EAAOD,QAAUoB,IAK5G,SAAUnB,EAAQD,EAASU,GAEhC,GAAIS,GAA8BC,CAAgCD,IAAgCT,EAAqBV,EAASU,EAAoB,QAOlEW,MAPuED,EAAgC,SAAUlB,EAASF,EAAS+B,GACjN,YAIAJ,QAAOC,eAAe5B,EAAS,cAAgB6B,OAAO,IAHtD,SAAkBb,GACd,IAAK,GAAIE,KAAKF,GAAQhB,EAAQ0B,eAAeR,KAAIlB,EAAQkB,GAAKF,EAAEE,KAG3Da,IACXD,MAAM9B,EAASmB,MAA+ElB,EAAOD,QAAUoB,IAK5G,SAAUnB,EAAQD,EAASU,GAEhC,GAAIS,GAA8BC,EAAkCY,EAAazB,MAAQA,KAAKyB,WAAc,WACxG,GAAIC,GAAgBN,OAAOO,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIpB,KAAKoB,GAAOA,EAAEZ,eAAeR,KAAImB,EAAEnB,GAAKoB,EAAEpB,IACzE,OAAO,UAAUmB,EAAGC,GAEhB,QAASC,KAAOhC,KAAKiC,YAAcH,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEI,UAAkB,OAANH,EAAaX,OAAOe,OAAOJ,IAAMC,EAAGE,UAAYH,EAAEG,UAAW,GAAIF,QAGnFI,EAAcpC,MAAQA,KAAKoC,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HV,GAAvHpB,EAAI+B,UAAUC,OAAQC,EAAIjC,EAAI,EAAI4B,EAAkB,OAATE,EAAgBA,EAAOpB,OAAOwB,yBAAyBN,EAAQC,GAAOC,CACrH,IAAuB,gBAAZK,UAAoD,kBAArBA,SAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIzC,GAAIsC,EAAWK,OAAS,EAAG3C,GAAK,EAAGA,KAAS+B,EAAIO,EAAWtC,MAAI4C,GAAKjC,EAAI,EAAIoB,EAAEa,GAAKjC,EAAI,EAAIoB,EAAEQ,EAAQC,EAAKI,GAAKb,EAAEQ,EAAQC,KAASI,EAChJ,OAAOjC,GAAI,GAAKiC,GAAKvB,OAAOC,eAAeiB,EAAQC,EAAKI,GAAIA,EAE9D/B,IAAgCT,EAAqBV,EAASU,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,QAguB1HW,MAhuB+HD,EAAgC,SAAUlB,EAASF,EAASsD,EAAYC,EAAYC,EAAYC,EAAYC,EAAYC,GACrU,YACAhC,QAAOC,eAAe5B,EAAS,cAAgB6B,OAAO,GACtD,IACI+B,GAAW,qBAMXC,EAAY,GAAIC,QAAO,gBAEvBC,EAAkB,SAAUC,GAE5B,QAASD,GAAeE,EAASC,GAC7B,GAAIC,GAAQH,EAAOjD,KAAKR,KAAM0D,EAASC,IAAY3D,IAKnD,OAJA4D,GAAMC,eAAgB,EACtBD,EAAME,iBAAmB,IACzBF,EAAMG,UAAY,GAAIR,QAAO,gBAC7BK,EAAMI,UAAW,EACVJ,EAsoBX,MA7oBAnC,GAAU+B,EAAgBC,GAS1BD,EAAetB,UAAU+B,UAAY,WACjC,GAAIC,GAAahB,EAAWiB,SAAS,gBAAiBnE,KAAK2D,QAG3D,IAFA3D,KAAKoE,aAAepE,KAAK2D,QAAQU,WAAU,GAC3CrE,KAAKsE,eAAiB,KACO,sBAAzBtE,KAAK2D,QAAQY,QAAiC,CAC9CvE,KAAKsE,eAAiBtE,KAAK2D,QAAQY,OACnC,IAAIC,GAAQvB,EAAWwB,cAAc,SACjCC,EAAQ,CACZ,KAAKA,EAAOA,EAAQ1E,KAAK2D,QAAQgB,WAAWjC,OAAQgC,IAChDF,EAAMI,aAAa5E,KAAK2D,QAAQgB,WAAWD,GAAOG,SAAU7E,KAAK2D,QAAQgB,WAAWD,GAAOI,WAC3FN,EAAMO,UAAY/E,KAAK2D,QAAQoB,SAEnC/E,MAAK2D,QAAQqB,WAAWC,YAAYT,GACpCxE,KAAK2D,QAAQqB,WAAWE,YAAYlF,KAAK2D,SACzC3D,KAAK2D,QAAUa,EACftB,EAAWiC,SAAS,gBAAiBjB,EAAYlE,KAAK2D,SAE1DV,EAAW0B,WAAW3E,KAAK2D,SAAWyB,KAAQ,aAAcC,SAAY,IAAKC,aAAgB,MAAOC,YAAa,aACjH,IAAIC,IAAeC,eAAgB,kBAAmBC,eAAgB,kBAAmBC,YAAa,GACtG3F,MAAK4F,KAAO,GAAI7C,GAAW8C,KAAK,iBAAkBL,EAAYxF,KAAK8F,QACnE9F,KAAK+F,cAAe,EACpB/F,KAAKgG,WAAa,KAClBhG,KAAKiG,UAAY,KACjBjG,KAAKkG,eACLlG,KAAKmG,kBACLnG,KAAKoG,kBACLpG,KAAKqG,kBACLrG,KAAKsG,UAAYtG,KAAKsB,MACtBtB,KAAKuG,iBACLvG,KAAKwG,eACoB,OAArBxG,KAAK2F,aACL3F,KAAKyG,qBAGbjD,EAAetB,UAAUwE,OAAS,WACa,UAAvC1G,KAAK2D,QAAQY,QAAQoC,gBACrB3G,KAAK4G,gBACD5G,KAAK6G,gBACL7G,KAAK8G,kBAEJ5D,EAAW6D,kBAAkB/G,KAAKgH,QACnC/D,EAAWgE,kBAAkBjH,KAAKkH,WAAaF,MAAS9D,EAAWiE,WAAWnH,KAAKgH,SAEvFhH,KAAKoH,YAAYpH,KAAKsB,OACtBtB,KAAKqH,aACc,OAAfrH,KAAKsB,OAAmBgG,MAAMtH,KAAKsB,QAC/BtB,KAAKuH,UACLvH,KAAKwH,eAAgBlG,MAAOtB,KAAKyH,YAAYzH,KAAKsB,MAAOtB,KAAKuH,YAAa,KAK3F/D,EAAetB,UAAUmE,gBAAkB,WAEvC,IAAK,GADD1B,IAAc,QAAS,MAAO,MAAO,OAAQ,WAAY,WAAY,QAAS,QACzE+C,EAAK,EAAGC,EAAehD,EAAY+C,EAAKC,EAAajF,OAAQgF,IAAM,CACxE,GAAIE,GAAOD,EAAaD,EACxB,KAAKxE,EAAW6D,kBAAkB/G,KAAK2D,QAAQkE,aAAaD,IACxD,OAAQA,GACJ,IAAK,WACD,GAAIE,GAA8C,aAApC9H,KAAK2D,QAAQkE,aAAaD,IACA,SAApC5H,KAAK2D,QAAQkE,aAAaD,EAC9B5H,MAAKwH,eAAgBM,QAASA,IAAW,EACzC,MACJ,KAAK,WACD,GAAIC,GAA+C,aAApC/H,KAAK2D,QAAQkE,aAAaD,IACE,SAApC5H,KAAK2D,QAAQkE,aAAaD,EACjC5H,MAAKwH,eAAgBO,SAAUA,IAAY,EAC3C,MACJ,KAAK,QACD/H,KAAKgG,WAAahG,KAAK2D,QAAQkE,aAAaD,EAC5C,MACJ,KAAK,OACD5H,KAAKiG,UAAYjG,KAAK2D,QAAQkE,aAAaD,EAC3C,MACJ,SACI,GAAItG,GAAQtB,KAAKgI,SAASC,iBAAkBC,OAAQ,MAAOlI,KAAK2D,QAAQkE,aAAaD,KACtE,OAAVtG,IAAmBgG,MAAMhG,IAAqB,UAATsG,IACtC5H,KAAKwH,cAActE,EAAWiC,SAASyC,EAAMtG,OAAY,MAOjFkC,EAAetB,UAAUuE,kBAAoB,WACzCzG,KAAKwH,eAAgB7B,YAAa3F,KAAK4F,KAAKuC,YAAY,iBAAkB,IAE9E3E,EAAetB,UAAUkE,gBAAkB,WACvCpG,KAAKgI,SAAW,GAAI7E,GAAWiF,qBAAqBpI,KAAK8F,SAE7DtC,EAAetB,UAAUiE,gBAAkB,WACvCnG,KAAKkG,YAAYgC,OAASlI,KAAKkI,OACe,OAA1ChF,EAAWiB,SAAS,WAAYnE,OAChCkD,EAAWiC,SAAS,WAAYnF,KAAKqI,SAAUrI,KAAKkG,cAG5D1C,EAAetB,UAAU0E,cAAgB,WACrC,GAAI0B,GAAWlF,EAAQmF,MAAMC,aACzB7E,QAAS3D,KAAK2D,QACd8E,UAAWzI,KAAKsE,eAChBoE,eAAgB1I,KAAK0I,eACrBC,YACIZ,SAAU/H,KAAK+H,SACfpC,YAAa3F,KAAK2F,YAClBiD,SAAU5I,KAAK4I,SACfC,UAAW7I,KAAK6I,UAChBf,QAAS9H,KAAK8H,UAGtB9H,MAAKkH,UAAYoB,EAASpB,UAC1BjE,EAAW6F,UAAU9I,KAAKkH,WAjIvB,aAkIClH,KAAK+H,UACL9E,EAAW0B,WAAW3E,KAAK2D,SAAWoF,gBAAiB,SAE3D/I,KAAKgJ,YAAe/F,EAAWwB,cAAc,SAAWwE,OAASC,KAAM,YACvElJ,KAAKiG,UAA+B,OAAnBjG,KAAKiG,UAAqBjG,KAAKiG,UAAYjG,KAAK2D,QAAQrD,GACzEN,KAAK2D,QAAQwF,gBAAgB,QAC7BlG,EAAW0B,WAAW3E,KAAKgJ,aAAeI,KAAQpJ,KAAKiG,YACvDjG,KAAKkH,UAAUmC,aAAarJ,KAAKgJ,YAAahJ,KAAK2D,SAC3B,OAApB3D,KAAKgG,YACL/C,EAAW0B,WAAW3E,KAAKkH,WAAaoC,MAAStJ,KAAKgG,cAG9DxC,EAAetB,UAAU4E,gBAAkB,WACvC9G,KAAKuJ,SAAWnG,EAAQmF,MAAMiB,WAAWnG,EAAW,eAAgBrD,KAAKkH,WACzEjE,EAAW0B,WAAW3E,KAAKuJ,UACvBE,MAASzJ,KAAK4F,KAAKuC,YAAY,kBAC/BuB,aAAc1J,KAAK4F,KAAKuC,YAAY,oBAExCnI,KAAK2J,OAASvG,EAAQmF,MAAMiB,WAAWnG,EAAW,aAAcrD,KAAKkH,WACrEjE,EAAW0B,WAAW3E,KAAK2J,QACvBF,MAASzJ,KAAK4F,KAAKuC,YAAY,kBAC/BuB,aAAc1J,KAAK4F,KAAKuC,YAAY,oBAExCnI,KAAK4J,qBAETpG,EAAetB,UAAUqE,eAAiB,YACV,gBAAdvG,MAAQ,KAAmBsH,MAAMtH,KAAK6J,OAChD7J,KAAKwH,eAAgBqC,KAAOC,OAAgB,YAAK,IAEzB,gBAAd9J,MAAQ,KAAmBsH,MAAMtH,KAAK+J,OAChD/J,KAAKwH,eAAgBuC,IAAKD,OAAOE,YAAa,GAE5B,OAAlBhK,KAAKuH,WACDvH,KAAK6J,OAAUC,OAAgB,WAC/B9J,KAAKwH,eAAgBqC,IAAK7J,KAAKgI,SAASC,iBAAkBC,OAAQ,MAAOlI,KAAKiK,eAAejK,KAAKuH,SAAUvH,KAAK6J,QAAS,GAE1H7J,KAAK+J,MAASD,OAAgB,WAC9B9J,KAAKwH,eAAgBuC,IAAK/J,KAAKgI,SAASC,iBAAkBC,OAAQ,MAAOlI,KAAKiK,eAAejK,KAAKuH,SAAUvH,KAAK+J,QAAS,IAGlI/J,KAAKwH,eAAgBqC,IAAK7J,KAAK6J,IAAM7J,KAAK+J,IAAM/J,KAAK+J,IAAM/J,KAAK6J,MAAO,GACvE5G,EAAW0B,WAAW3E,KAAK2D,SAAWuG,gBAAiBlK,KAAK6J,IAAIM,WAAYC,gBAAiBpK,KAAK+J,IAAII,cAE1G3G,EAAetB,UAAU+H,eAAiB,SAAU1C,EAAUjG,GAC1D,MAAOtB,MAAKgI,SAASqC,iBACjBC,sBAAuB/C,EACvBgD,sBAAuBhD,EAAUiD,aAAa,IAC/ClJ,IAEPkC,EAAetB,UAAUsE,aAAe,WACd,OAAlBxG,KAAKuH,UACLvH,KAAKwH,eAAgBiD,KAAMzK,KAAKgI,SAASC,iBAAkBC,OAAQ,MAAOlI,KAAKiK,eAAejK,KAAKuH,SAAUvH,KAAKyK,SAAU,IAGpIjH,EAAetB,UAAUwI,OAAS,SAAUC,GACxC,GAAIrJ,GAAQtB,KAAK4K,UAAY5K,KAAKgI,SAASC,iBAAkBC,OAAQ,MAAOlI,KAAK2D,QAAQrC,OAAStB,KAAKsB,KACvGtB,MAAKoH,YAAYpH,KAAK6K,cAAcvJ,EAAOtB,KAAKyK,KAAME,IACtD3K,KAAK8K,oBAETtH,EAAetB,UAAU6I,gBAAkB,WACnC/K,KAAK+F,aACL9C,EAAW+H,aAAahL,KAAKkH,WA3L7B,WA8LAjE,EAAW6F,UAAU9I,KAAKkH,WA9L1B,WAgMJjE,EAAW0B,WAAW3E,KAAK2D,SAAWsH,eAAgBjL,KAAK+F,aAAe,QAAU,UAExFvC,EAAetB,UAAUmF,WAAa,WAClCtE,EAAWmI,aAAaC,IAAInL,KAAK2D,QAAS,QAAS3D,KAAKoL,QAASpL,MACjE+C,EAAWmI,aAAaC,IAAInL,KAAK2D,QAAS,OAAQ3D,KAAKqL,SAAUrL,MACjE+C,EAAWmI,aAAaC,IAAInL,KAAK2D,QAAS,UAAW3D,KAAKsL,eAAgBtL,MAC1E+C,EAAWmI,aAAaC,IAAInL,KAAK2D,QAAS,WAAY3D,KAAKuL,gBAAiBvL,MAC5E+C,EAAWmI,aAAaC,IAAInL,KAAK2D,QAAS,SAAU3D,KAAKwL,cAAexL,MACxE+C,EAAWmI,aAAaC,IAAInL,KAAK2D,QAAS,QAAS3D,KAAKyL,aAAczL,OAE1EwD,EAAetB,UAAU0H,kBAAoB,WACzC7G,EAAWmI,aAAaC,IAAInL,KAAK2J,OAAQ5G,EAAW2I,QAAQC,gBAAiB3L,KAAK4L,mBAAoB5L,MACtG+C,EAAWmI,aAAaC,IAAInL,KAAKuJ,SAAUxG,EAAW2I,QAAQC,gBAAiB3L,KAAK4L,mBAAoB5L,MACxG+C,EAAWmI,aAAaC,IAAInL,KAAK2J,OAAQ5G,EAAW2I,QAAQG,cAAe7L,KAAK8L,iBAAkB9L,MAClG+C,EAAWmI,aAAaC,IAAInL,KAAKuJ,SAAUxG,EAAW2I,QAAQG,cAAe7L,KAAK8L,iBAAkB9L,MACpG+C,EAAWmI,aAAaC,IAAInL,KAAK2J,OAAQ5G,EAAW2I,QAAQK,eAAgB/L,KAAKgM,mBAAoBhM,MACrG+C,EAAWmI,aAAaC,IAAInL,KAAKuJ,SAAUxG,EAAW2I,QAAQK,eAAgB/L,KAAKgM,mBAAoBhM,OAE3GwD,EAAetB,UAAU+J,aAAe,WACpClJ,EAAWmI,aAAagB,OAAOlM,KAAK2D,QAAS,QAAS3D,KAAKoL,SAC3DrI,EAAWmI,aAAagB,OAAOlM,KAAK2D,QAAS,OAAQ3D,KAAKqL,UAC1DtI,EAAWmI,aAAagB,OAAOlM,KAAK2D,QAAS,UAAW3D,KAAKsL,gBAC7DvI,EAAWmI,aAAagB,OAAOlM,KAAK2D,QAAS,WAAY3D,KAAKuL,iBAC9DxI,EAAWmI,aAAagB,OAAOlM,KAAK2D,QAAS,SAAU3D,KAAKwL,eAC5DzI,EAAWmI,aAAagB,OAAOlM,KAAK2D,QAAS,QAAS3D,KAAKyL,eAE/DjI,EAAetB,UAAUiK,oBAAsB,WAC3CpJ,EAAWmI,aAAagB,OAAOlM,KAAK2J,OAAQ5G,EAAW2I,QAAQC,gBAAiB3L,KAAK4L,oBACrF7I,EAAWmI,aAAagB,OAAOlM,KAAKuJ,SAAUxG,EAAW2I,QAAQC,gBAAiB3L,KAAK4L,oBACvF7I,EAAWmI,aAAagB,OAAOlM,KAAK2J,OAAQ5G,EAAW2I,QAAQG,cAAe7L,KAAK8L,kBACnF/I,EAAWmI,aAAagB,OAAOlM,KAAKuJ,SAAUxG,EAAW2I,QAAQG,cAAe7L,KAAK8L,kBACrF/I,EAAWmI,aAAagB,OAAOlM,KAAK2J,OAAQ5G,EAAW2I,QAAQK,eAAgB/L,KAAKgM,oBACpFjJ,EAAWmI,aAAagB,OAAOlM,KAAKuJ,SAAUxG,EAAW2I,QAAQK,eAAgB/L,KAAKgM,qBAE1FxI,EAAetB,UAAUsJ,cAAgB,SAAUY,GAC1CpM,KAAK2D,QAAQrC,MAAMoB,QACpB1C,KAAKwH,eAAgBlG,MAAO,OAAQ,EAExC,IAAI+K,GAAcrM,KAAKgI,SAASC,iBAAkBC,OAAQ,MAAOlI,KAAK2D,QAAQrC,MAC9EtB,MAAKsM,YAAYD,EAAaD,IAElC5I,EAAetB,UAAU4I,iBAAmB,SAAUsB,GAClD,GAAIpM,KAAKsG,YAActG,KAAKsB,MAAO,CAC/B,GAAIiL,KACJvM,MAAKwM,iBAAoBlL,MAAOtB,KAAKsB,MAAOmL,cAAezM,KAAKsG,WAC5D8F,IACApM,KAAKwM,gBAAgBJ,MAAQA,GAEjClJ,EAAWwJ,MAAMH,EAAWvM,KAAKwM,iBACjCxM,KAAKsG,UAAYtG,KAAKsB,MACtBtB,KAAK2M,QAAQ,SAAUJ,KAG/B/I,EAAetB,UAAUuJ,aAAe,WACpC,GAAI7H,GAAQ5D,KACR4M,EAAe5M,KAAK2D,QAAQrC,KAChCuL,YAAW,WACFjJ,EAAMkJ,eAAeC,KAAKnJ,EAAMD,QAAQrC,QACzCsC,EAAMoJ,gBAAgBJ,MAIlCpJ,EAAetB,UAAUoJ,eAAiB,SAAUc,GAChD,OAAQA,EAAMa,SACV,IAAK,IACDb,EAAMc,iBACNlN,KAAK0K,OAjQL,YAkQA,MACJ,KAAK,IACD0B,EAAMc,iBACNlN,KAAK0K,OApQL,aAwQH1K,KAAK2D,QAAQrC,MAAMoB,SACpB1C,KAAKwH,eAAgBlG,MAAO,OAAQ,GACpCtB,KAAKsM,YAAYtM,KAAKgI,SAASC,iBAAkBC,OAAQ,MAAOlI,KAAK2D,QAAQrC,UAIrFkC,EAAetB,UAAU2I,cAAgB,SAAUvJ,EAAOmJ,EAAME,IAC9C,OAAVrJ,GAAkBgG,MAAMhG,MACxBA,EAAQ,EAEZ,IAAI6L,GAnRI,cAmRWxC,EAA0BrJ,EAAQmJ,EAAOnJ,EAAQmJ,CAEpE,OADA0C,GAAenN,KAAKoN,gBAAgB9L,EAAOmJ,EAAM0C,GAC1CnN,KAAKqN,WAAarN,KAAKsN,UAAUH,GAAgBA,GAG5D3J,EAAetB,UAAUkL,gBAAkB,SAAU9L,EAAOmJ,EAAM8C,GAC9D,GAAIC,GAAW,GAAIjK,QAAO,YAGtBkK,GAFYnM,EAAM6I,WACPM,EAAKN,WACHqD,EAAST,KAAKzL,EAAM6I,aACjCuD,EAAYF,EAAST,KAAKtC,EAAKN,WACnC,IAAIsD,GAAcC,EAAW,CACzB,GAAIC,GAAaF,EAAaD,EAASI,KAAKtM,EAAM6I,YAAY,GAAGzH,OAAS,EACtEmL,EAAYH,EAAYF,EAASI,KAAKnD,EAAKN,YAAY,GAAGzH,OAAS,EACnEqH,EAAM+D,KAAK/D,IAAI4D,EAAYE,EAC/B,OAAOvM,GAAQtB,KAAK+N,WAAWR,EAAQxD,GAE3C,MAAOwD,IAGX/J,EAAetB,UAAU6L,WAAa,SAAUR,EAAQS,GACpDA,EAAYA,GAAa,CACzB,IAAIC,GAASH,KAAKI,IAAI,GAAIF,EAC1B,OAAOT,IAAUU,EAAQV,EAASO,KAAKK,MAAMZ,GAAUU,GAG3DzK,EAAetB,UAAUoK,YAAc,SAAUhL,EAAO8K,GACtC,OAAV9K,GAAmBgG,MAAMhG,IACrBtB,KAAKuH,WACLjG,EAAQtB,KAAKyH,YAAYnG,EAAOtB,KAAKuH,WAG7CvH,KAAKoH,YAAsB,OAAV9F,GAAkBgG,MAAMhG,GAAS,KAAOtB,KAAKqN,WAAarN,KAAKsN,UAAUhM,GAASA,GACnGtB,KAAK8K,iBAAiBsB,IAE1B5I,EAAetB,UAAUkF,YAAc,SAAU9F,GAC7C,GAAMA,GAAmB,IAAVA,EAIV,CACD,GAAI8M,OAAmB,GACnBC,EAAc/M,EAAM6I,WAAWmE,MAAM,KAAK,EAC9CF,GAAoBC,GAAgBA,EAAY3L,OAAa2L,EAAY3L,OAAhB,EACnC,OAAlB1C,KAAKuH,WACL6G,EAAmBA,EAAmBpO,KAAKuH,SAAW6G,EAAmBpO,KAAKuH,UAElFvH,KAAKwH,eAAgBlG,MAAOtB,KAAKyH,YAAYnG,EAAO8M,KAAqB,OAVzE9M,GAAQ,KACRtB,KAAKwH,eAAgBlG,MAAOA,IAAS,EAWzCtB,MAAKuO,aACAvO,KAAKqN,YACNrN,KAAKwO,iBAIbhL,EAAetB,UAAUqM,WAAa,WAClC,GAAIvO,KAAKsB,OAAwB,IAAftB,KAAKsB,MAAa,CAChC,GAAIA,GAAQtB,KAAKyO,eACbC,EAAe1O,KAAK4K,UAAYtJ,EAAQtB,KAAKgI,SAASqC,gBAAgBrK,KAAKkG,aAAalG,KAAKsB,MACjGtB,MAAKgN,gBAAgB0B,GACrBzL,EAAW0B,WAAW3E,KAAK2D,SAAWgL,gBAAiBrN,IACvDtB,KAAKgJ,YAAY1H,MAAQA,MAGzBtB,MAAKgN,gBAAgB,IACrBhN,KAAK2D,QAAQwF,gBAAgB,iBAC7BnJ,KAAKgJ,YAAY1H,MAAQ,MAIjCkC,EAAetB,UAAU8K,gBAAkB,SAAU4B,EAAKjL,GACtDP,EAAQmF,MAAMpD,SAASyJ,EAAMjL,GAAoB3D,KAAK2D,QAAU3D,KAAK0I,iBAEzElF,EAAetB,UAAUsM,cAAgB,WACrCxO,KAAK+F,cAAe,GAChB/F,KAAKsB,OAAwB,IAAftB,KAAKsB,SACnBtB,KAAK+F,eAAiB/F,KAAKsB,MAAQtB,KAAK+J,KAAO/J,KAAKsB,MAAQtB,KAAK6J,MAErE7J,KAAK+K,mBAETvH,EAAetB,UAAUuM,aAAe,WACpC,GAAIL,GACAS,EAAe7O,KAAKsB,MACpB+M,EAAcQ,EAAa1E,WAAWmE,MAAM,KAAK,EAKrD,OAJAF,GAAoBC,GAAgBA,EAAY3L,OAAa2L,EAAY3L,OAAhB,EACnC,OAAlB1C,KAAKuH,WACL6G,EAAmBA,EAAmBpO,KAAKuH,SAAW6G,EAAmBpO,KAAKuH,UAE3EvH,KAAKgI,SAASqC,iBACjBC,sBAAuB8D,EACvB7D,sBAAuB6D,EAAkB5D,aAAa,IACvDxK,KAAKsB,QAGZkC,EAAetB,UAAUoL,UAAY,SAAUhM,GAC3C,MAAIA,GAAQtB,KAAK+J,IACN/J,KAAK+J,IAEZzI,EAAQtB,KAAK6J,IACN7J,KAAK6J,IAETvI,GAGXkC,EAAetB,UAAUuF,YAAc,SAAUnG,EAAO0M,GACpD,GAAIT,GAASjM,EACTiG,EAAWyG,GAAa,EACxBc,EAAUvB,EAAOpD,WAAWmE,MAAM,IACtCf,GAASO,KAAKK,MAAMrE,OAAOgF,EAAQ,GAAK,KAAOA,EAAQ,GAAMhF,OAAOgF,EAAQ,IAAMvH,EAAYA,IAC9F,IAAIwH,GAAUxB,EAAOpD,WAAWmE,MAAM,IAEtC,OADAf,GAASzD,OAAOiF,EAAQ,GAAK,KAAOA,EAAQ,GAAMjF,OAAOiF,EAAQ,IAAMxH,GAAaA,IAC7EuC,OAAOyD,EAAOyB,QAAQzH,KAGjC/D,EAAetB,UAAU+M,YAAc,SAAU7C,GAE7C,MADAA,GAAMc,kBACC,GAEX1J,EAAetB,UAAUqJ,gBAAkB,SAAUa,GACjD,GAAoB,IAAhBA,EAAM8C,OAAe9C,EAAM+C,SAAW/C,EAAMgD,SAA6B,IAAlBhD,EAAMa,SAAmC,KAAlBb,EAAMa,QACpF,OAAO,CAEX,IAAIoC,GAAcC,OAAOC,aAAanD,EAAM8C,OACxCM,EAAOxP,KAAK2D,QAAQrC,KAExB,OADAkO,GAAOA,EAAKC,UAAU,EAAGzP,KAAK2D,QAAQ+L,gBAAkBL,EAAcG,EAAKC,UAAUzP,KAAK2D,QAAQgM,gBAC7F3P,KAAK8M,eAAeC,KAAKyC,KAC1BpD,EAAMc,iBACNd,EAAMwD,mBACC,IAOfpM,EAAetB,UAAU4K,aAAe,WACpC,GAAI+C,GAAgB1M,EAAW2M,iBAAiB9P,KAAK8F,QACjDhC,EAAmBZ,EAAWiB,SAAS,UAAW0L,GAClDE,EAAe,GAInB,OA9Ze,MA2ZXjM,IACAA,EAAmB,KAAOA,GAER,IAAlB9D,KAAKuH,SACEjE,GAEPtD,KAAKuH,UAAYvH,KAAKgQ,wBACtBD,EAAe,MAAQ/P,KAAKuH,SAAW,KAEpC,GAAIhE,QAAO,gBAAkBO,EAAmB,MAAQiM,EAC3D,QAAUjM,EAAmB,MAAQiM,EAAe,WAG5DvM,EAAetB,UAAU+N,WAAa,SAAU7D,GAC5CA,EAAMc,gBACN,IAAIgD,GACAC,EAAW/D,CACX+D,GAASC,WACTF,EAAQC,EAASC,WAAa,IAEzBD,EAASE,SACdH,GAASC,EAASE,OAAS,GAE3BH,EAAQ,EACRlQ,KAAK0K,OAtbD,aAwbCwF,EAAQ,GACblQ,KAAK0K,OAxbD,aA0bR1K,KAAKiP,YAAY7C,IAErB5I,EAAetB,UAAUkJ,QAAU,SAAUgB,GACzC,GAAKpM,KAAK8H,UAAW9H,KAAK+H,SAA1B,CAMA,GAHA/H,KAAK4K,WAAY,EACjB3H,EAAW+H,aAAahL,KAAKkH,WAnczB,WAocJlH,KAAKsG,UAAYtG,KAAKsB,MACjBtB,KAAKsB,OAAwB,IAAftB,KAAKsB,MAAc,CAClC,GAAIgP,GAActQ,KAAKyO,cACvBzO,MAAKgN,gBAAgBsD,GAChBtQ,KAAK6D,eACN7D,KAAK2D,QAAQ4M,kBAAkB,EAAGD,EAAY5N,QAGjDK,EAAW2I,QAAQ8E,UACpBzN,EAAWmI,aAAaC,IAAInL,KAAK2D,QAAS,4BAA6B3D,KAAKiQ,WAAYjQ,QAIhGwD,EAAetB,UAAUmJ,SAAW,SAAUe,GAC1C,GAAIxI,GAAQ5D,IACZ,IAAIA,KAAK6D,eAEL,GADAuI,EAAMc,iBACFnK,EAAW2I,QAAQ8E,SAAU,CAC7B,GAAIC,GAAUzQ,KAAK2D,QAAQrC,KAC3BtB,MAAK2D,QAAQ+M,QACb1Q,KAAK6D,eAAgB,CACrB,IAAI8M,GAAQ3Q,KAAK2D,OACjBkJ,YAAW,WACPjJ,EAAMoJ,gBAAgByD,EAASE,IAChC,UAGN,CACD3Q,KAAK4K,WAAY,EACZ5K,KAAK2D,QAAQrC,MAAMoB,QACpB1C,KAAKwH,eAAgBlG,MAAO,OAAQ,EAExC,IAAI+K,GAAcrM,KAAKgI,SAASC,iBAAkBC,OAAQ,MAAOlI,KAAK2D,QAAQrC,MAC9EtB,MAAKsM,YAAYD,GACZtJ,EAAW2I,QAAQ8E,UACpBzN,EAAWmI,aAAagB,OAAOlM,KAAK2D,QAAS,4BAA6B3D,KAAKiQ,cAK3FzM,EAAetB,UAAU0J,mBAAqB,SAAUQ,GACpD,GAAIxI,GAAQ5D,IAKZ,IAJIA,KAAK4K,YACL5K,KAAK6D,eAAgB,EACrBuI,EAAMc,kBAELlN,KAAK4Q,eAAexE,GAAzB,CAGA,GACI9J,IADStC,KAAK4Q,eAAexE,GACpBA,EAAMyE,eACfnG,EAAUpI,EAAOwO,UAAUC,SAzf1B,aAGG,YACA,WAsfRhO,GAAWmI,aAAaC,IAAI7I,EAAQ,aAActC,KAAKgR,aAAchR,MACrEA,KAAKiR,QAAUC,YAAY,WAActN,EAAMI,UAAW,EAAMJ,EAAM8G,OAAOA,IAAY,KACzF3H,EAAWmI,aAAaC,IAAIgG,SAAU,UAAWnR,KAAKgR,aAAchR,QAExEwD,EAAetB,UAAU8J,mBAAqB,SAAUI,GACvC+E,SAASC,iBAAiBhF,EAAMiF,QAASjF,EAAMkF,SAC/CR,UAAUC,SAAS1N,IAC5BkO,cAAcvR,KAAKiR,UAG3BzN,EAAetB,UAAU4J,iBAAmB,SAAUM,GAUlD,GATIpM,KAAK6D,gBACL7D,KAAK2D,QAAQ+M,QACR3N,EAAW2I,QAAQ8E,WACpBxQ,KAAK6D,eAAgB,IAGxBd,EAAW2I,QAAQ8E,UACpBpE,EAAMc,iBAELlN,KAAK4Q,eAAexE,GAAzB,CAGA,GAAI9J,GAAS8J,EAAMyE,cACfnG,EAAUpI,EAAOwO,UAAUC,SAlhB1B,aAGG,YACA,WA+gBRhO,GAAWmI,aAAagB,OAAO5J,EAAQ,aAActC,KAAKgR,cACrDhR,KAAKgE,UACNhE,KAAK0K,OAAOA,GAEhB1K,KAAKgE,UAAW,EAChBjB,EAAWmI,aAAagB,OAAOiF,SAAU,UAAWnR,KAAKgR,gBAE7DxN,EAAetB,UAAU0O,eAAiB,SAAUxE,GAChD,QAAKA,EAAM8C,OAAyB,IAAhB9C,EAAM8C,OAAiB9C,EAAMoF,QAA2B,IAAjBpF,EAAMoF,SACzDxR,KAAK8H,SAAW9H,KAAK+H,YAG7BwJ,cAAcvR,KAAKiR,UACZ,IAEXzN,EAAetB,UAAU8O,aAAe,SAAU5E,GAC9CA,EAAMwD,kBACN2B,cAAcvR,KAAKiR,SACnBjR,KAAKgE,UAAW,EAChBjB,EAAWmI,aAAagB,OAAOlM,KAAK2J,OAAQ,aAAc3J,KAAKgR,cAC/DjO,EAAWmI,aAAagB,OAAOlM,KAAKuJ,SAAU,aAAcvJ,KAAKgR,eAErExN,EAAetB,UAAUuP,UAAY,SAAUhH,OAC9B,KAATA,IAAmBA,EAAOzK,KAAKyK,MACnCzK,KAAKoH,YAAYpH,KAAK6K,cAAc7K,KAAKsB,MAAOmJ,EAxiBxC,eA0iBZjH,EAAetB,UAAUwP,UAAY,SAAUjH,OAC9B,KAATA,IAAmBA,EAAOzK,KAAKyK,MACnCzK,KAAKoH,YAAYpH,KAAK6K,cAAc7K,KAAKsB,MAAOmJ,EA3iBxC,eA6iBZjH,EAAetB,UAAUyP,QAAU,WAC/B3R,KAAKiM,eACLhJ,EAAW2O,OAAO5R,KAAKgJ,aACnBhJ,KAAK6G,iBACL7G,KAAKmM,sBACLlJ,EAAW2O,OAAO5R,KAAK2J,QACvB1G,EAAW2O,OAAO5R,KAAKuJ,WAE3BvJ,KAAKkH,UAAU2K,cAAc5M,YAAYjF,KAAKoE,cAC9CnB,EAAW2O,OAAO5R,KAAKkH,WACvBzD,EAAOvB,UAAUyP,QAAQnR,KAAKR,OAElCwD,EAAetB,UAAU4P,QAAU,WAC/B,MAAO9R,MAAK2D,QAAQrC,OAExBkC,EAAetB,UAAU6P,eAAiB,WACtC,GAAIC,IAAa,QACjB,OAAOhS,MAAKiS,aAAaD,IAE7BxO,EAAetB,UAAUgQ,kBAAoB,SAAUC,EAASC,GAE5D,IAAK,GAAI1K,GAAK,EAAG2K,EAAKjR,OAAOkR,KAAKH,GAAUzK,EAAK2K,EAAG3P,OAAQgF,IAAM,CAC9D,GAAIE,GAAOyK,EAAG3K,EACd,QAAQE,GACJ,IAAK,QACD3E,EAAWgE,kBAAkBjH,KAAKkH,WAAaF,MAAS9D,EAAWiE,WAAWgL,EAAQnL,QACtF,MACJ,KAAK,WACD5D,EAAQmF,MAAMgK,YAAYJ,EAAQvJ,UAAW5I,KAAKkH,WAAYkL,EAAQxJ,SACtE,MACJ,KAAK,UACDxF,EAAQmF,MAAMiK,WAAWL,EAAQrK,QAAS9H,KAAK2D,QAC/C,MACJ,KAAK,YACDP,EAAQmF,MAAMkK,aAAaN,EAAQtJ,WAAY7I,KAAKkH,WACpD,MACJ,KAAK,WACD9D,EAAQmF,MAAMmK,YAAYP,EAAQpK,SAAU/H,KAAK2D,SAC7C3D,KAAK+H,SACL9E,EAAW0B,WAAW3E,KAAK2D,SAAWoF,gBAAiB,SAGvD/I,KAAK2D,QAAQwF,gBAAgB,gBAEjC,MACJ,KAAK,cACD/F,EAAQmF,MAAMoK,eAAeR,EAAQxM,YAAa3F,KAAK2D,QACvD,MACJ,KAAK,OACD3D,KAAKyK,KAAO0H,EAAQ1H,KACpBzK,KAAKwG,cACL,MACJ,KAAK,iBACG2L,EAAQtL,eACR7G,KAAK8G,mBAGL7D,EAAW2O,OAAO5R,KAAK2J,QACvB1G,EAAW2O,OAAO5R,KAAKuJ,UAE3B,MACJ,KAAK,QACDvJ,KAAKsM,YAAY6F,EAAQ7Q,MACzB,MACJ,KAAK,MACL,IAAK,MACD4B,EAAWiC,SAASyC,EAAM1E,EAAWiB,SAASyD,EAAMuK,GAAUnS,MAC9DA,KAAKuG,iBACLvG,KAAKsM,YAAYtM,KAAKsB,MACtB,MACJ,KAAK,aACDtB,KAAKqN,WAAa8E,EAAQ9E,WAC1BrN,KAAKsM,YAAYtM,KAAKsB,OACtBtB,KAAKwO,eACL,MACJ,KAAK,SACDxO,KAAKoG,kBACLpG,KAAK4F,KAAKgN,UAAU5S,KAAK8F,QACzB9F,KAAKyG,oBACLrD,EAAQmF,MAAMoK,eAAe3S,KAAK2F,YAAa3F,KAAK2D,SACpD3D,KAAKsM,YAAYtM,KAAKsB,MACtB,MACJ,KAAK,WACD4B,EAAWiC,SAASyC,EAAM1E,EAAWiB,SAASyD,EAAMuK,GAAUnS,KAAKkG,aACnElG,KAAKsM,YAAYtM,KAAKsB,MACtB,MACJ,KAAK,SACD4B,EAAWiC,SAASyC,EAAM1E,EAAWiB,SAASyD,EAAMuK,GAAUnS,MAC9DA,KAAKmG,kBACLnG,KAAKsM,YAAYtM,KAAKsB,MACtB,MACJ,KAAK,WACDtB,KAAKuH,SAAW4K,EAAQ5K,SACxBvH,KAAKsM,YAAYtM,KAAKsB,UAItCkC,EAAetB,UAAU2Q,cAAgB,WACrC,MAAO,kBAEJrP,GACTT,EAAW+P,UACb1Q,IACIW,EAAWgQ,SAAS,KACrBvP,EAAetB,UAAW,eAAY,IACzCE,GACIW,EAAWgQ,SAAS,OACrBvP,EAAetB,UAAW,YAAS,IACtCE,GACIW,EAAWgQ,UAAWjJ,OAAgB,YACvCtG,EAAetB,UAAW,UAAO,IACpCE,GACIW,EAAWgQ,SAASjJ,OAAOE,YAC5BxG,EAAetB,UAAW,UAAO,IACpCE,GACIW,EAAWgQ,SAAS,IACrBvP,EAAetB,UAAW,WAAQ,IACrCE,GACIW,EAAWgQ,SAAS,OACrBvP,EAAetB,UAAW,YAAS,IACtCE,GACIW,EAAWgQ,SAAS,OACrBvP,EAAetB,UAAW,kBAAe,IAC5CE,GACIW,EAAWgQ,UAAS,IACrBvP,EAAetB,UAAW,qBAAkB,IAC/CE,GACIW,EAAWgQ,UAAS,IACrBvP,EAAetB,UAAW,eAAY,IACzCE,GACIW,EAAWgQ,UAAS,IACrBvP,EAAetB,UAAW,cAAW,IACxCE,GACIW,EAAWgQ,UAAS,IACrBvP,EAAetB,UAAW,gBAAa,IAC1CE,GACIW,EAAWgQ,UAAS,IACrBvP,EAAetB,UAAW,wBAAqB,IAClDE,GACIW,EAAWgQ,SAAS,OACrBvP,EAAetB,UAAW,aAAU,IACvCE,GACIW,EAAWgQ,SAAS,OACrBvP,EAAetB,UAAW,eAAY,IACzCE,GACIW,EAAWgQ,SAAS,OACrBvP,EAAetB,UAAW,eAAY,IACzCE,GACIW,EAAWgQ,UAAS,IACrBvP,EAAetB,UAAW,iBAAc,IAC3CE,GACIW,EAAWgQ,UAAS,IACrBvP,EAAetB,UAAW,4BAAyB,IACtDE,GACIW,EAAWgQ,SAAS,UACrBvP,EAAetB,UAAW,qBAAkB,IAC/CE,GACIW,EAAWiQ,SACZxP,EAAetB,UAAW,cAAW,IACxCE,GACIW,EAAWiQ,SACZxP,EAAetB,UAAW,gBAAa,IAC1CE,GACIW,EAAWiQ,SACZxP,EAAetB,UAAW,aAAU,IACvCsB,EAAiBpB,GACbY,EAAWiQ,uBACZzP,GACH/D,EAAQ+D,eAAiBA,EACzB/D,EAAQyT,qBAAuBnQ,EAAWoQ,cAAc3P,IAC1DjC,MAAM9B,EAASmB,MAA+ElB,EAAOD,QAAUoB,IAK5G,SAAUnB,EAAQD,GAEvBC,EAAOD,QAAUQ,GAIZ,SAAUP,EAAQD,EAASU,GAEhC,GAAIS,GAA8BC,CAAgCD,IAAgCT,EAAqBV,EAASU,EAAoB,QAiblEW,MAjbuED,EAAgC,SAAUlB,EAASF,EAASsD,GACjN,YACA3B,QAAOC,eAAe5B,EAAS,cAAgB6B,OAAO,GACtD,IAAI8R,IACAC,IAAK,QACLC,QAAS,aACTC,MAAO,UACPC,WAAY,gBACZC,WAAY,gBACZC,UAAW,eACXC,UAAW,eACXC,UAAW,eACXC,cAAe,oBACfC,SAAU,cACVC,YAAa,iBACbC,aAAc,mBACdC,eAAgB,qBAChBC,eAAgB,uBAGpB,SAAW3L,GAMP,QAASC,GAAY2L,GACjB,GAAIC,IAAgBlN,UAAW,KAAMmN,WAAaC,YAAa,KA4B/D,IA3BIvR,EAAWgE,kBAAkBoN,EAAKzL,iBAA2C,UAAxByL,EAAKzL,gBAC1D0L,EAAYlN,UAAYqN,EAAqBJ,EAAMf,EAAWI,WAAYJ,EAAWa,eAAgB,QACrGE,EAAKxQ,QAAQqB,WAAWqE,aAAa+K,EAAYlN,UAAWiN,EAAKxQ,SACjEZ,EAAW+F,UAAUqL,EAAKxQ,SAAUyP,EAAWG,OAC/Ca,EAAYlN,UAAUjC,YAAYkP,EAAKxQ,UAGvC6Q,EAAoBL,EAAMC,GAE9BD,EAAKxQ,QAAQ8Q,iBAAiB,QAAS,WACnC,GAAIC,GAASC,EAAc3U,KACvB0U,GAAO5D,UAAUC,SAAS,kBAC1B2D,EAAO5D,UAAU3F,IAAI,mBAG7BgJ,EAAKxQ,QAAQ8Q,iBAAiB,OAAQ,WAClC,GAAIC,GAASC,EAAc3U,KACvB0U,GAAO5D,UAAUC,SAAS,kBAC1B2D,EAAO5D,UAAU5E,OAAO,mBAG3BnJ,EAAWgE,kBAAkBoN,EAAKxL,aAAgB5F,EAAWgE,kBAAkBoN,EAAKxL,WAAWiM,mBAAoBT,EAAKxL,WAAWiM,kBACpIR,EAAYE,YAAcO,EAAkBV,EAAKxQ,QAASyQ,EAAYlN,WAClEkN,EAAYlN,UAAU4J,UAAUC,SAASqC,EAAWK,aACpD1Q,EAAW+F,UAAUsL,EAAYlN,WAAYkM,EAAWI,cAG3DzQ,EAAWgE,kBAAkBoN,EAAKE,SACnC,IAAK,GAAItU,GAAI,EAAGA,EAAIoU,EAAKE,QAAQ3R,OAAQ3C,IACrCqU,EAAYC,QAAQS,KAAKtL,EAAW2K,EAAKE,QAAQtU,GAAIqU,EAAYlN,WAKzE,OAFAkN,GAAcW,EAAiBZ,EAAMC,GACrCY,EAAkBZ,EACXA,EAGX,QAASa,KACL,GAAIC,GAAQP,EAAc3U,MAAMmV,uBAAuB,gBAAgB,EACvEpS,GAAW+F,UAAUoM,GAAQ9B,EAAWU,UACpCoB,EAAMpE,UAAUC,SAASqC,EAAWW,cACpChR,EAAWiI,aAAakK,GAAQ9B,EAAWW,aAGnD,QAASqB,KACL,GAAIV,GAASC,EAAc3U,KAC3B,IAAsD,KAAlD0U,EAAOW,qBAAqB,SAAS,GAAG/T,MAAc,CACtD,GAAI4T,GAAQR,EAAOS,uBAAuB,gBAAgB,EACtDD,GAAMpE,UAAUC,SAASqC,EAAWU,WACpC/Q,EAAWiI,aAAakK,GAAQ9B,EAAWU,UAE/C/Q,EAAW+F,UAAUoM,GAAQ9B,EAAWW,cAGhD,QAASuB,GAAmB3R,GACxBA,EAAQ8Q,iBAAiB,QAASQ,GAClCtR,EAAQ8Q,iBAAiB,OAAQW,GAErC,QAASG,GAAqB5R,GAC1BA,EAAQ6R,oBAAoB,QAASP,GACrCtR,EAAQ6R,oBAAoB,OAAQJ,GAExC,QAASZ,GAAoBL,EAAMC,GAC/B,GACIqB,GACAC,CACwB,UAAxBvB,EAAKzL,gBACL4M,EAAmBnB,EAAKxQ,SAExBZ,EAAWgE,kBAAkBqN,EAAYlN,YACzCkN,EAAYlN,UAAYqN,EAAqBJ,EAAMf,EAAWK,WAAYL,EAAWc,eAAgB,OACrGC,EAAKxQ,QAAQqB,WAAWqE,aAAa+K,EAAYlN,UAAWiN,EAAKxQ,WAG5DZ,EAAWgE,kBAAkBoN,EAAK1L,YACnC2L,EAAYlN,UAAU4J,UAAU3F,IAAIiI,EAAWc,gBAEnDE,EAAYlN,UAAU4J,UAAU3F,IAAIiI,EAAWK,aAEnDgC,EAAkB1S,EAAW0B,cAAc,QAAUkR,UAAWvC,EAAWM,YAC3EgC,EAAoB3S,EAAW0B,cAAc,SAAWkR,UAAWvC,EAAWO,YACzE5Q,EAAWgE,kBAAkBoN,EAAKxQ,QAAQrD,KAA2B,KAApB6T,EAAKxQ,QAAQrD,KAC/DoV,EAAkBpV,GAAK,SAAW6T,EAAKxQ,QAAQrD,GAAGsV,QAAQ,KAAM,KAChE7S,EAAW4B,WAAWwP,EAAKxQ,SAAWkS,kBAAmBH,EAAkBpV,MAE1EyC,EAAWgE,kBAAkBoN,EAAKxQ,QAAQgC,cAA6C,KAA7BwO,EAAKxQ,QAAQgC,cACxE+P,EAAkB3Q,UAAYoP,EAAKxQ,QAAQgC,YAC3CwO,EAAKxQ,QAAQwF,gBAAgB,gBAE5BpG,EAAWgE,kBAAkBoN,EAAKxL,aAAgB5F,EAAWgE,kBAAkBoN,EAAKxL,WAAWhD,cAChE,KAAhCwO,EAAKxL,WAAWhD,cAChB+P,EAAkB3Q,UAAYoP,EAAKxL,WAAWhD,aAE7C+P,EAAkB3Q,WACnBqP,EAAYlN,UAAU4J,UAAU3F,IAAIiI,EAAWY,cAEnDI,EAAYlN,UAAUjC,YAAYkP,EAAKxQ,SACvCyQ,EAAYlN,UAAUjC,YAAYwQ,GAClCrB,EAAYlN,UAAUjC,YAAYyQ,GAClCI,EAAiB3B,EAAKxQ,QAAQrC,MAAOoU,GACT,WAAxBvB,EAAKzL,iBACDgN,EAAkB5E,UAAUC,SAASqC,EAAWW,cAChDhR,EAAWiI,aAAa0K,GAAoBtC,EAAWW,aAE3DhR,EAAW+F,UAAU4M,GAAoBtC,EAAWU,WAE5B,SAAxBK,EAAKzL,iBACLyL,EAAKxQ,QAAQ8Q,iBAAiB,QAAS,SAAUrI,GAC7C0J,EAAiB3B,EAAKxQ,QAAQrC,MAAOoU,KAEzCvB,EAAKxQ,QAAQ8Q,iBAAiB,OAAQ,SAAUrI,GAC5C0J,EAAiB3B,EAAKxQ,QAAQrC,MAAOoU,MAIjD,QAASX,GAAiBZ,EAAMC,GAC5B,IAAKrR,EAAWgE,kBAAkBoN,EAAKxL,YACnC,IAAK,GAAIjB,GAAK,EAAG2K,EAAKjR,OAAOkR,KAAK6B,EAAKxL,YAAajB,EAAK2K,EAAG3P,OAAQgF,IAAM,CACtE,GAAIE,GAAOyK,EAAG3K,EACd,QAAQE,GACJ,IAAK,WACD2K,EAAY4B,EAAKxL,WAAWC,UAAWwL,EAAYlN,WACnD,MACJ,KAAK,UACDsL,EAAW2B,EAAKxL,WAAWb,QAASqM,EAAKxQ,QACzC,MACJ,KAAK,YACD8O,EAAa0B,EAAKxL,WAAWE,WAAYuL,EAAYlN,WACrD,MACJ,KAAK,cACDyL,EAAewB,EAAKxL,WAAWhD,YAAawO,EAAKxQ,QACjD,MACJ,KAAK,WACD+O,EAAYyB,EAAKxL,WAAWZ,SAAUoM,EAAKxQ,UAK3D,MAAOyQ,GAEX,QAAS2B,GAAgBzU,EAAOkQ,GACxBlQ,EACAyB,EAAWiI,aAAawG,GAAS4B,EAAWS,eAG5C9Q,EAAW+F,UAAU0I,GAAS4B,EAAWS,eAGjD,QAASiC,GAAiBxU,EAAO4T,GACzB5T,GACAyB,EAAW+F,UAAUoM,GAAQ9B,EAAWU,UACpCoB,EAAMpE,UAAUC,SAASqC,EAAWW,cACpChR,EAAWiI,aAAakK,GAAQ9B,EAAWW,eAI3CmB,EAAMpE,UAAUC,SAASqC,EAAWU,WACpC/Q,EAAWiI,aAAakK,GAAQ9B,EAAWU,UAE/C/Q,EAAW+F,UAAUoM,GAAQ9B,EAAWW,cAGhD,QAASY,GAAchR,GAEnB,MADiBA,GAAQqB,WAG7B,QAAS6P,GAAkBlR,EAASuD,GAChC,GAAIsK,GAASzO,EAAW0B,cAAc,QAAUkR,UAAWvC,EAAWQ,WAQtE,OAPA1M,GAAUjC,YAAYuM,IACjBzO,EAAWgE,kBAAkBiO,EAAgB9N,YAC9C8N,EAAgB9N,UAAU4J,UAAUC,SAASqC,EAAWK,aACxD1Q,EAAW+F,UAAUkM,EAAgB9N,WAAYkM,EAAWI,YAEhEzQ,EAAW+F,UAAU0I,GAAS4B,EAAWS,eACzCmC,EAAmBrS,EAAS6N,GACrBA,EAEX,QAASwE,GAAmBrS,EAAS6N,GACjCA,EAAOiD,iBAAiB,QAAS,SAAUrI,GACjCzI,EAAQmN,UAAUC,SAASqC,EAAWE,UAAY3P,EAAQsS,WAC5D7J,EAAMc,iBACFvJ,IAAYwN,SAAS+E,eACrBvS,EAAQ+M,QAEZ/M,EAAQrC,MAAQ,GAChByB,EAAW+F,UAAU0I,GAAS4B,EAAWS,kBAGjDlQ,EAAQ8Q,iBAAiB,QAAS,SAAUrI,GACxC2J,EAAgBpS,EAAQrC,MAAOkQ,KAEnC7N,EAAQ8Q,iBAAiB,QAAS,SAAUrI,GACxC2J,EAAgBpS,EAAQrC,MAAOkQ,KAEnC7N,EAAQ8Q,iBAAiB,OAAQ,SAAUrI,GACvCS,WAAW,WAAc9J,EAAW+F,UAAU0I,GAAS4B,EAAWS,gBAAmB,OAG7F,QAASsC,GAAcxS,EAAS+E,GAE5B,GADaiM,EAAchR,GAChBmN,UAAUC,SAASqC,EAAWK,aAAkC,SAAnB/K,EAA2B,CAC/E,GAAIwM,GAAQP,EAAchR,GAASwR,uBAAuB,gBAAgB,EAC1EW,GAAiBnS,EAAQrC,MAAO4T,IAGxC,QAASX,GAAqBJ,EAAMwB,EAAWS,EAAUC,GACrD,GAAInP,EAQJ,OAPKnE,GAAWgE,kBAAkBoN,EAAK1L,WAKnCvB,EAAYnE,EAAW0B,cAAc4R,GAAOV,UAAWA,KAJvDzO,EAAYnE,EAAW0B,cAAc0P,EAAK1L,WAAakN,UAAWA,IAClEzO,EAAU4J,UAAU3F,IAAIiL,IAKrBlP,EAEX,QAAS/B,GAAS7D,EAAOqC,EAAS+E,EAAgB4L,GAK9C,GAJA3Q,EAAQrC,MAAQA,EACVyB,EAAWgE,kBAAkB2B,IAAuC,SAAnBA,GACnDyN,EAAcxS,EAAS+E,IAEtB3F,EAAWgE,kBAAkBuN,IAAgBA,EAAa,CAC3D,GAAIzC,GAAgB8C,EAAchR,GAC9B6N,EAASK,EAAcsD,uBAAuB/B,EAAWQ,WAAW,EACpEjQ,GAAQrC,OAASuQ,EAAcf,UAAUC,SAAS,iBAClDhO,EAAWiI,aAAawG,GAAS4B,EAAWS,eAG5C9Q,EAAW+F,UAAU0I,GAAS4B,EAAWS,gBAKrD,QAAStB,GAAY3J,EAAU0N,EAAUC,GAChCxT,EAAWgE,kBAAkBwP,IAA0B,KAAbA,GAC3CxT,EAAWiI,YAAYsL,EAAUC,GAEhCxT,EAAWgE,kBAAkB6B,IAA0B,KAAbA,GAC3C7F,EAAW+F,SAASwN,EAAU1N,GAItC,QAAS+J,GAAehN,EAAahC,GACjC,GAAIkO,EACJA,GAAgB8C,EAAchR,GAC1BkO,EAAcf,UAAUC,SAASqC,EAAWK,YACvC1Q,EAAWgE,kBAAkBpB,IAAgC,KAAhBA,GAK9CkM,EAAcf,UAAU3F,IAAIiI,EAAWY,cACvCnC,EAAcsD,uBAAuB/B,EAAWO,WAAW,GAAG6C,YAAc,KAL5E3E,EAAcsD,uBAAuB/B,EAAWO,WAAW,GAAG6C,YAAc7Q,EAC5EkM,EAAcf,UAAU5E,OAAOkH,EAAWY,eAQzCjR,EAAWgE,kBAAkBpB,IAAgC,KAAhBA,GAI9ChC,EAAQwF,gBAAgB,eACxBxF,EAAQwF,gBAAgB,qBAJxBpG,EAAW4B,WAAWhB,GAAWgC,YAAeA,EAAa8Q,mBAAoB9Q,IAS7F,QAAS+M,GAAYgE,EAAY/S,EAAS+E,GAClCgO,EACA3T,EAAW4B,WAAWhB,GAAWoE,SAAU,KAG3CpE,EAAQwF,gBAAgB,YAEvBpG,EAAWgE,kBAAkB2B,IAC9ByN,EAAcxS,EAAS+E,GAI/B,QAAS+J,GAAakE,EAAOL,GACrBK,EACA5T,EAAW+F,SAASwN,EAAUlD,EAAWC,KAGzCtQ,EAAWiI,YAAYsL,EAAUlD,EAAWC,KAIpD,QAASb,GAAWoE,EAAUjT,EAAS+E,GACnC,GAAImO,IAAkBC,SAAY,WAAYC,gBAAiB,OAC3DH,IACAjT,EAAQmN,UAAU5E,OAAOkH,EAAWE,SACpC0D,EAAiBH,EAAelT,KAGhCA,EAAQmN,UAAU3F,IAAIiI,EAAWE,SACjC2D,EAAcJ,EAAelT,IAE5BZ,EAAWgE,kBAAkB2B,IAC9ByN,EAAcxS,EAAS+E,GAI/B,QAASsO,GAAiB/N,EAAOtF,GAC7B,IAAK,GAAI+D,GAAK,EAAG2K,EAAKjR,OAAOkR,KAAKrJ,GAAQvB,EAAK2K,EAAG3P,OAAQgF,IAAM,CAC5D,GAAInF,GAAM8P,EAAG3K,GACTmK,MAAgB,EACpBA,GAAgB8C,EAAchR,GAClB,aAARpB,GACAoB,EAAQmN,UAAU5E,OAAOkH,EAAWE,SAE5B,aAAR/Q,GAAsBsP,EAAcf,UAAUC,SAASqC,EAAWI,aAClE3B,EAAcf,UAAU5E,OAAOkH,EAAWE,SAElC,gBAAR/Q,GAAyBsP,EAAcf,UAAUC,SAASqC,EAAWK,YACrE5B,EAAcsD,uBAAuB/B,EAAWO,WAAW,GAAG6C,YAAc,GAG5E7S,EAAQwF,gBAAgB5G,IAKpC,QAAS0U,GAAchO,EAAOtF,GAC1B,IAAK,GAAI+D,GAAK,EAAG2K,EAAKjR,OAAOkR,KAAKrJ,GAAQvB,EAAK2K,EAAG3P,OAAQgF,IAAM,CAC5D,GAAInF,GAAM8P,EAAG3K,GACTmK,MAAgB,EACpBA,GAAgB8C,EAAchR,GAClB,aAARpB,GACAoB,EAAQmN,UAAU3F,IAAIiI,EAAWE,SAEzB,aAAR/Q,GAAsBsP,EAAcf,UAAUC,SAASqC,EAAWI,aAClE3B,EAAcf,UAAU3F,IAAIiI,EAAWE,SAE/B,gBAAR/Q,GAAyBsP,EAAcf,UAAUC,SAASqC,EAAWK,YACrE5B,EAAcsD,uBAAuB/B,EAAWO,WAAW,GAAG6C,YAAcvN,EAAM1G,GAGlFoB,EAAQiB,aAAarC,EAAK0G,EAAM1G,KAK5C,QAAS2U,GAAe1S,GACpB,GAAI0C,GAAY1C,EAAM0C,SACtB,KAAKnE,EAAWgE,kBAAkBG,IAAcA,EAAU4J,UAAUC,SAASqC,EAAWK,YAAa,CACjG,GAAI0D,GAAWjQ,EAAUkQ,cAAc,SACnCzR,EAAcuB,EAAUkQ,cAAc,IAAMhE,EAAWO,WAAW6C,YAClElC,EAA2D,OAA7CpN,EAAUkQ,cAAc,gBAC1CrU,GAAW6O,OAAO1K,EAAUkQ,cAAc,IAAMhE,EAAWM,YAC3D3Q,EAAW6O,OAAO1K,EAAUkQ,cAAc,IAAMhE,EAAWO,YAC3D5Q,EAAW+N,UAAU5J,GAAYkM,EAAWI,aAAcJ,EAAWK,aACrE8B,EAAqB4B,GACrBpU,EAAW4B,WAAWwS,GAAYxR,YAAeA,IACjDwR,EAASrG,UAAU3F,IAAIiI,EAAWG,OAC7Be,GACD6C,EAAShO,gBAAgB,aAKrC,QAASkO,GAAY7S,EAAO0E,EAAMvD,GAC9B,GAAIuB,GAAYnE,EAAWuU,QAAQ9S,EAAO,IAAM4O,EAAWI,WAC3D,IAAa,UAATtK,EAAkB,CAClB,GAAIT,GAAYvB,EAAU3C,OAC1BkE,GAA0B,QAAdA,GAAqC,SAAdA,EAAuBA,EAAY,IACtE,IAAI0L,IAASxQ,QAASa,EAAOkE,eAAgBQ,EAAMT,UAAWA,EAAWE,YAAchD,YAAaA,IAChG4R,EAAUrQ,EAAUkQ,cAAc,iBAClC9O,GAAapB,UAAWA,EAM5B,IALA1C,EAAMsM,UAAU5E,OAAOkH,EAAWG,OAClCiB,EAAoBL,EAAM7L,GACtBvF,EAAWgE,kBAAkBwQ,KAC7BA,EAAUrQ,EAAUkQ,cAAc,wBAElCrU,EAAWgE,kBAAkBwQ,GAC7BrQ,EAAU4J,UAAU5E,OAAOkH,EAAWI,gBAErC,CACD,GAAIgE,GAAYtQ,EAAUkQ,cAAc,IAAMhE,EAAWM,WACrD+D,EAAYvQ,EAAUkQ,cAAc,IAAMhE,EAAWO,UACzDzM,GAAUmC,aAAa7E,EAAO+S,GAC9BrQ,EAAUmC,aAAamO,EAAWD,GAClCrQ,EAAUmC,aAAaoO,EAAWF,KAK9C,QAAS/N,GAAWkO,EAAWxQ,GAC3B,GAAIsK,GAASzO,EAAW0B,cAAc,QAAUkR,UAAW+B,GAc3D,OAbAxQ,GAAUjC,YAAYuM,GACjBtK,EAAU4J,UAAUC,SAASqC,EAAWI,aACzCtM,EAAU4J,UAAU3F,IAAIiI,EAAWI,YAEvChC,EAAOiD,iBAAiB,YAAa,WAC5BvN,EAAU4J,UAAUC,SAAS,eAAkB7J,EAAUkQ,cAAc,SAASnB,UACjFjW,KAAK8Q,UAAU3F,IAAI,wBAG3BqG,EAAOiD,iBAAiB,UAAW,WAC/B,GAAIkD,GAAM3X,IACV6M,YAAW,WAAc8K,EAAI7G,UAAU5E,OAAO,uBAA0B,OAErEsF,EAxZX,GAAIwD,IACA9N,UAAW,KACXmN,WACAC,YAAa,KAwCjB/L,GAAMC,YAAcA,EAoMpBD,EAAMpD,SAAWA,EASjBoD,EAAMgK,YAAcA,EAwBpBhK,EAAMoK,eAAiBA,EAYvBpK,EAAMmK,YAAcA,EASpBnK,EAAMkK,aAAeA,EAerBlK,EAAMiK,WAAaA,EAoBnBjK,EAAMyO,iBAAmBA,EAoBzBzO,EAAM0O,cAAgBA,EAkBtB1O,EAAM2O,eAAiBA,EA0BvB3O,EAAM8O,YAAcA,EAkBpB9O,EAAMiB,WAAaA,GACZ/J,EAAQ8I,QAAU9I,EAAQ8I,YACvChH,MAAM9B,EAASmB,MAA+ElB,EAAOD,QAAUoB,IAK5G,SAAUnB,EAAQD,EAASU,GAEhC,GAAIS,GAA8BC,CAAgCD,IAAgCT,EAAqBV,EAASU,EAAoB,QAOlEW,MAPuED,EAAgC,SAAUlB,EAASF,EAAS2D,GACjN,YAIAhC,QAAOC,eAAe5B,EAAS,cAAgB6B,OAAO,IAHtD,SAAkBb,GACd,IAAK,GAAIE,KAAKF,GAAQhB,EAAQ0B,eAAeR,KAAIlB,EAAQkB,GAAKF,EAAEE,KAG3DyC,IACX7B,MAAM9B,EAASmB,MAA+ElB,EAAOD,QAAUoB,IAK5G,SAAUnB,EAAQD,EAASU,GAEhC,GAAIS,GAA8BC,CAAgCD,IAAgCT,EAAqBV,EAASU,EAAoB,QAOlEW,MAPuED,EAAgC,SAAUlB,EAASF,EAASmY,GACjN,YAIAxW,QAAOC,eAAe5B,EAAS,cAAgB6B,OAAO,IAHtD,SAAkBb,GACd,IAAK,GAAIE,KAAKF,GAAQhB,EAAQ0B,eAAeR,KAAIlB,EAAQkB,GAAKF,EAAEE,KAG3DiX,IACXrW,MAAM9B,EAASmB,MAA+ElB,EAAOD,QAAUoB,IAK5G,SAAUnB,EAAQD,EAASU,GAEhC,GAAIS,GAA8BC,EAAkCY,EAAazB,MAAQA,KAAKyB,WAAc,WACxG,GAAIC,GAAgBN,OAAOO,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIpB,KAAKoB,GAAOA,EAAEZ,eAAeR,KAAImB,EAAEnB,GAAKoB,EAAEpB,IACzE,OAAO,UAAUmB,EAAGC,GAEhB,QAASC,KAAOhC,KAAKiC,YAAcH,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEI,UAAkB,OAANH,EAAaX,OAAOe,OAAOJ,IAAMC,EAAGE,UAAYH,EAAEG,UAAW,GAAIF,QAGnFI,EAAcpC,MAAQA,KAAKoC,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HV,GAAvHpB,EAAI+B,UAAUC,OAAQC,EAAIjC,EAAI,EAAI4B,EAAkB,OAATE,EAAgBA,EAAOpB,OAAOwB,yBAAyBN,EAAQC,GAAOC,CACrH,IAAuB,gBAAZK,UAAoD,kBAArBA,SAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIzC,GAAIsC,EAAWK,OAAS,EAAG3C,GAAK,EAAGA,KAAS+B,EAAIO,EAAWtC,MAAI4C,GAAKjC,EAAI,EAAIoB,EAAEa,GAAKjC,EAAI,EAAIoB,EAAEQ,EAAQC,EAAKI,GAAKb,EAAEQ,EAAQC,KAASI,EAChJ,OAAOjC,GAAI,GAAKiC,GAAKvB,OAAOC,eAAeiB,EAAQC,EAAKI,GAAIA,EAE9D/B,IAAgCT,EAAqBV,EAASU,EAAoB,GAAIA,EAAoB,GAAIA,EAAoB,QAwjBlDW,MAxjBuDD,EAAgC,SAAUlB,EAASF,EAASsD,EAAYC,EAAYC,GACzN,YACA7B,QAAOC,eAAe5B,EAAS,cAAgB6B,OAAO,GACtD,IAOIuW,GAPAC,EAAiB,GAAIvU,QAAO,mGAE5BwU,EAAe,GAAIxU,QAAO,uDAC1ByU,EAAoB,GAAIzU,QAAO,2DAC/B0U,EAAkB,GAAI1U,QAAO,YAC7B2U,EAAiB,GAAI3U,QAAO,qBAC5B4U,EAAsB,GAAI5U,QAAO,iBAErC,SAAWsU,GACPA,EAAYA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAmB,MAAI,GAAK,SACzCA,EAAcpY,EAAQoY,cAAgBpY,EAAQoY,gBACjD,IAAIO,GAAgBC,EAAmB,SAAU5U,GAE7C,QAAS2U,GAAczU,EAASD,GAC5B,GAAIE,GAAQH,EAAOjD,KAAKR,KAAM0D,EAASC,IAAY3D,IA6BnD,IA5BA4D,EAAM0U,aACN1U,EAAM2U,cACN3U,EAAM4U,aAAc,EACpB5U,EAAM6U,SAAW,WACjB7U,EAAM8U,YAAc,KACpB9U,EAAM+U,aAAe,KACrB/U,EAAMgV,YAAc,+DACpBhV,EAAMiV,iBACFJ,SAAU,0BACVK,MAAO,sCACPC,IAAK,4BACLC,KAAM,6BACNC,QAAS,qCACTC,WAAY,iCACZC,OAAQ,+BACRC,OAAQ,4BACRC,UAAW,4CACXC,UAAW,wCACXC,YAAa,4DACbC,MAAO,4CACPzP,IAAK,kDACLF,IAAK,qDACL4P,MAAO,gCACPC,IAAK,qCACLC,QAAS,wCACTC,QAAS,qCAEbjW,EAA6B,gBAAZA,GAAuBZ,EAAW8W,OAAOlW,EAASwN,UAAYxN,EAC1D,MAAjBC,EAAMD,QASV,MARIC,GAAMD,QAAQiB,aAAa,aAAc,IACzChB,EAAMkW,cAAgB/W,EAAWgX,UAAUnW,EAAMgV,YAAahV,EAAMD,SACpEC,EAAMoW,mBACNpW,EAAMyD,aAKHzD,EA6YX,MArbAnC,GAAU2W,EAAe3U,GA0CzB2U,EAAclW,UAAU+X,SAAW,SAAU7Q,EAAM8Q,GAC3Cla,KAAKka,MAAM/Y,eAAeiI,GAC1BpG,EAAWmX,OAAOna,KAAKka,MAAM9Q,GAAO8Q,MAGpCla,KAAKka,MAAM9Q,GAAQ8Q,GAG3B9B,EAAclW,UAAUkY,YAAc,SAAUhR,EAAM8Q,GAClD,GAAK9Q,GAAS8Q,EAGT,GAAIla,KAAKka,MAAM9Q,KAAU8Q,QACnBla,MAAKka,MAAM9Q,OAEjB,CAAA,GAAKpG,EAAW+D,kBAAkB/G,KAAKka,MAAM9Q,IAAS8Q,GAMvD,MALA,KAAK,GAAIna,GAAI,EAAGA,EAAIma,EAAMxX,OAAQ3C,UACvBC,MAAKka,MAAM9Q,GAAM8Q,EAAMna,QAPlCC,MAAKka,UAcb9B,EAAclW,UAAUmY,SAAW,SAAUC,GACzC,GAAIJ,GAAQ9Y,OAAOkR,KAAKtS,KAAKka,MAC7B,IAAII,GAAYJ,EAAMxX,OAElB,MADA1C,MAAKua,cAAcD,IACiB,IAA7BJ,EAAMM,QAAQF,IAEP,IAF2Bta,KAAKuY,WAAWkC,OAAO,SAAUC,GACtE,MAAOA,GAAKtR,OAASkR,IACtB5X,MAGH,KAAK,GAAIgF,GAAK,EAAGiT,EAAUT,EAAOxS,EAAKiT,EAAQjY,OAAQgF,IAAM,CACzD,GAAIkT,GAASD,EAAQjT,EACrB1H,MAAKua,cAAcK,GAEvB,MAAkC,KAA3B5a,KAAKuY,WAAW7V,QAG/B0V,EAAclW,UAAU2Y,MAAQ,WAC5B7a,KAAKuY,cACLvY,KAAKsY,aACLtY,KAAK2D,QAAQkX,OAEb,KAAK,GADDvE,GAAWvT,EAAWgX,UAAU/Z,KAAK4Y,YAAa5Y,KAAK2D,SAClD+D,EAAK,EAAGoT,EAAaxE,EAAU5O,EAAKoT,EAAWpY,OAAQgF,IAAM,CAClE,GAAI/D,GAAUmX,EAAWpT,GACrBlD,EAAQb,CACZa,GAAM2E,gBAAgB;mCACtB3E,EAAMsM,UAAU5E,OAAOlM,KAAK+a,YACxBvW,EAAM4E,KAAK1G,OAAS,IACpB1C,KAAKgb,gBAAgBxW,EAAM4E,MAC3BpJ,KAAKib,gBAAgBzW,EAAM4E,MAC3BpJ,KAAKkb,YAAY1W,EAAM4E,OAE3B5E,EAAMsM,UAAU5E,OAAOlM,KAAKmb,cAGpC/C,EAAclW,UAAU8Y,gBAAkB,SAAU5R,GAEhD,MADApJ,MAAK2Y,aAAgB5V,EAAW8W,OAAO,SAAWzQ,EAAO,IAAKpJ,KAAK2D,SAC5D3D,KAAK2Y,cAEhBP,EAAclW,UAAUyP,QAAU,WAC9B3R,KAAK6a,QACL7a,KAAKiM,eACLjM,KAAKka,QAEL,KAAK,GADD5D,GAAWvT,EAAWgX,UAAU,IAAM/Z,KAAK+a,WAAa,MAAQ/a,KAAKmb,WAAYnb,KAAK2D,SACjF+D,EAAK,EAAG0T,EAAa9E,EAAU5O,EAAK0T,EAAW1Y,OAAQgF,IAAM,CACpD0T,EAAW1T,GACjBwE,SAEZzI,EAAOvB,UAAUyP,QAAQnR,KAAKR,OAElCoY,EAAclW,UAAUgQ,kBAAoB,SAAUC,EAASC,KAG/DgG,EAAclW,UAAU2Q,cAAgB,WACpC,MAAO,iBAEXuF,EAAclW,UAAU8X,iBAAmB,WAMvC,IAAK,GALDqB,IAAY,WAAY,QAAS,cAAe,YAAa,YAAa,UAAW,SAAU,UAC/F,oBAAqB,OAAQ,kBAAmB,MAAO,MAAO,QAAS,UAAW,yBAClF,yBAA0B,yBAA0B,qBAAsB,yBAA0B,sBACpG,sBAAuB,kBACvBC,GAAiB,QAAS,MAAO,OAAQ,SAAU,OAC9C5T,EAAK,EAAG2K,EAAMrS,KAAkB,cAAG0H,EAAK2K,EAAG3P,OAAQgF,IAAM,CAG9D,IAAK,GAFDlD,GAAQ6N,EAAG3K,GACX6T,KACKC,EAAK,EAAGC,EAAaJ,EAAUG,EAAKC,EAAW/Y,OAAQ8Y,IAAM,CAClE,GAAIE,GAAOD,EAAWD,EACtB,IAAiC,OAA7BhX,EAAMqD,aAAa6T,GACnB,OAAQA,GACJ,IAAK,WACD1b,KAAK2b,QAAQnX,EAAO+W,EAASG,EAAMlX,EAAMiU,SACzC,MACJ,KAAK,kBACDiD,EAAOlX,EAAMqD,aAAa6T,GAC1B1b,KAAK2b,QAAQnX,EAAO+W,EAASG,GAAM,EACnC,MACJ,KAAK,QAC0C,IAAvCJ,EAAcd,QAAQhW,EAAM0E,OAC5BlJ,KAAK2b,QAAQnX,EAAO+W,EAAS/W,EAAM0E,MAAM,EAE7C,MACJ,KAAK,cACL,IAAK,QACDlJ,KAAK2b,QAAQnX,EAAO+W,EAASG,EAAME,KAAKC,MAAMrX,EAAMqD,aAAa6T,IACjE,MACJ,KAAK,UACD,GAAIpb,GAAKkE,EAAMqD,aAAa6T,EAC5B1b,MAAK2b,QAAQnX,EAAO+W,EAASG,EAAMpb,EACnC,MACJ,SAC2C,SAAnCkE,EAAMqD,aAAa,YACnB7H,KAAK8b,eAAetX,EAAO+W,EAASG,EAAMlX,EAAMqD,aAAa6T,IAG7D1b,KAAK2b,QAAQnX,EAAO+W,EAASG,EAAMlX,EAAMqD,aAAa6T,KAKtC,IAAhCta,OAAOkR,KAAKiJ,GAAS7Y,QACrB1C,KAAKia,SAASzV,EAAM4E,KAAMmS,KAItCnD,EAAclW,UAAU4Z,eAAiB,SAAUtX,EAAOuX,EAASC,EAAU1a,GACzE,GAAIwa,GAAiBE,EAAS1N,MAAM,KAChC2N,GAAa,WAAY,aAAc,QAAS,YAAa,YAAa,QAAS,QAAS,WAC5FC,EAAgBJ,EAAeA,EAAepZ,OAAS,GACvDyZ,EAAiBL,EAAeA,EAAepZ,OAAS,EAC5D,KAA0C,IAAtCuZ,EAAUzB,QAAQ0B,GAClB,OAAQA,GACJ,IAAK,WACDlc,KAAK2b,QAAQnX,EAAOuX,EAAS,WAAYza,EACzC,MACJ,KAAK,aACDtB,KAAK2b,QAAQnX,EAAOuX,EAAS,aAAcza,EAC3C,MACJ,KAAK,QACDtB,KAAK2b,QAAQnX,EAAOuX,EAAS,MAAOza,OAI3C,KAA2C,IAAvC2a,EAAUzB,QAAQ2B,GACvB,OAAQA,GACJ,IAAK,YACDnc,KAAK2b,QAAQnX,EAAOuX,EAAS,YAAaza,EAC1C,MACJ,KAAK,YACDtB,KAAK2b,QAAQnX,EAAOuX,EAAS,YAAaza,EAC1C,MACJ,KAAK,QACD,GAAI8a,GAAW5X,EAAMqD,aAAa,sBAC9BwU,EAAW7X,EAAMqD,aAAa,qBAClC7H,MAAK2b,QAAQnX,EAAOuX,EAAS,SAAUK,EAAUC,GACjD,MACJ,KAAK,UACD,GAAI/b,GAAKkE,EAAMqD,aAAamU,GAAU1N,MAAM,IAC5CtO,MAAK2b,QAAQnX,EAAOuX,EAAS,UAAWzb,EAAGA,EAAGoC,OAAS,GACvD,MACJ,KAAK,QACD1C,KAAK2b,QAAQnX,EAAOuX,EAAS,QAASza,KAKtD8W,EAAclW,UAAUyZ,QAAU,SAAUnX,EAAOuX,EAASC,EAAU1a,GAClE,GAAIgb,GAAU9X,EAAMqD,aAAa,QAAUmU,EAAW,YAClDO,EAAoB/X,EAAMqD,aAAa,YAAcmU,EACrDM,GACAhb,GAASA,EAAOgb,GAEXC,IACLjb,GAASA,EAAOib,IAEpBR,EAAQC,GAAY1a,GAExB8W,EAAclW,UAAUmF,WAAa,WACjC,IAAK,GAAIK,GAAK,EAAG2K,EAAMrS,KAAkB,cAAG0H,EAAK2K,EAAG3P,OAAQgF,IAAM,CAC9D,GAAIlD,GAAQ6N,EAAG3K,EACX2Q,GAAgBmE,YAAYhY,GAC5BxB,EAAWkI,aAAaC,IAAI3G,EAAO,QAASxE,KAAKyc,aAAczc,MAExC,WAAlBwE,EAAMD,QACXvB,EAAWkI,aAAaC,IAAI3G,EAAO,SAAUxE,KAAKwL,cAAexL,OAGjEgD,EAAWkI,aAAaC,IAAI3G,EAAO,WAAYxE,KAAK0c,gBAAiB1c,MACrEgD,EAAWkI,aAAaC,IAAI3G,EAAO,QAASxE,KAAK2c,aAAc3c,OAGvEgD,EAAWkI,aAAaC,IAAInL,KAAK2D,QAAS,SAAU3D,KAAK4c,cAAe5c,OAE5EoY,EAAclW,UAAU+J,aAAe,WACnC,IAAK,GAAIvE,GAAK,EAAG2K,EAAMrS,KAAkB,cAAG0H,EAAK2K,EAAG3P,OAAQgF,IAAM,CAC9D,GAAIlD,GAAQ6N,EAAG3K,EACf1E,GAAWkI,aAAa2R,YAAYrY,GAExCxB,EAAWkI,aAAagB,OAAOlM,KAAK2D,QAAS,SAAU3D,KAAK4c,gBAEhExE,EAAclW,UAAUwa,gBAAkB,SAAUI,GAChD9c,KAAK2M,QAAQ,WAAYmQ,EACzB,IAAInZ,GAAUmZ,EAAExa,MACZtC,MAAKka,MAAMvW,EAAQyF,QACfpJ,KAAKka,MAAMvW,EAAQyF,MAAMpJ,KAAKyY,WAAa9U,EAAQrC,MAAMoB,OAAS,EAClE1C,KAAKqa,SAAS1W,EAAQyF,OAEyB,IAA1CpJ,KAAKsY,UAAUkC,QAAQ7W,EAAQyF,OACpCpJ,KAAKsY,UAAUxD,KAAKnR,EAAQyF,QAIxCgP,EAAclW,UAAUya,aAAe,SAAUG,GAC7C9c,KAAK2M,QAAQ,QAASmQ,EACtB,IAAInZ,GAAUmZ,EAAExa,OACZya,GAAe,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,MACpD,IAAZD,EAAE5N,OAAiBlP,KAAKka,MAAMvW,EAAQyF,SAAUpJ,KAAKka,MAAMvW,EAAQyF,OAAUpJ,KAAKka,MAAMvW,EAAQyF,MAAMpJ,KAAKyY,cAGjE,IAA1CzY,KAAKsY,UAAUkC,QAAQ7W,EAAQyF,OAAgBpJ,KAAKka,MAAMvW,EAAQyF,QAA2C,IAAlC2T,EAAYvC,QAAQsC,EAAE5N,QACjGlP,KAAKqa,SAAS1W,EAAQyF,OAG9BgP,EAAclW,UAAUua,aAAe,SAAUK,GAC7C9c,KAAK2M,QAAQ,QAASmQ,EACtB,IAAInZ,GAAUmZ,EAAExa,MACK,YAAjBqB,EAAQuF,KACRlJ,KAAKqa,SAAS1W,EAAQyF,MAE0B,OAA3CzF,EAAQkE,aAAa,oBAC1B7H,KAAKwY,aAAc,IAG3BJ,EAAclW,UAAUsJ,cAAgB,SAAUsR,GAC9C9c,KAAK2M,QAAQ,SAAUmQ,EACvB,IAAInZ,GAAUmZ,EAAExa,MAChBtC,MAAKqa,SAAS1W,EAAQyF,OAE1BgP,EAAclW,UAAU0a,cAAgB,SAAUE,GAC9C9c,KAAK2M,QAAQ,SAAUmQ,GAClB9c,KAAKwY,aAAgBxY,KAAKqa,WAI3Bra,KAAKwY,aAAc,EAHnBsE,EAAE5P,kBAMVkL,EAAclW,UAAUqY,cAAgB,SAAUnR,GAC9C,GAAKpJ,KAAKka,MAAM9Q,GAAhB,CAGA,GAAI8Q,GAAQ9Y,OAAOkR,KAAKtS,KAAKka,MAAM9Q,GACnCpJ,MAAKgb,gBAAgB5R,GACrBpJ,KAAKib,gBAAgB7R,EACrB,KAAK,GAAI1B,GAAK,EAAGsV,EAAU9C,EAAOxS,EAAKsV,EAAQta,OAAQgF,IAAM,CACzD,GAAIgU,GAAOsB,EAAQtV,GACfuV,EAAejd,KAAKkd,gBAAgBld,KAAKka,MAAM9Q,GAAMsS,GAAOA,GAC5DyB,GAAc/T,KAAMA,EAAMkT,QAASW,GACnC1Q,GACAtG,UAAWmD,EACXzF,QAAS3D,KAAK2Y,aACd2D,QAASW,EAEb,KAAKjd,KAAKod,QAAQhU,EAAMsS,KAAU1b,KAAK2Y,aAAa7H,UAAUC,SAAS/Q,KAAKqd,QAAS,CACjFrd,KAAKsd,iBAAiBlU,GACtBpJ,KAAKuY,WAAWzD,KAAKqI,GACrBnd,KAAK2Y,aAAa/T,aAAa,eAAgB,QAC/C5E,KAAK2Y,aAAa/T,aAAa,mBAAoB5E,KAAK2Y,aAAarY,GAAK,SACrEN,KAAK0Y,YAIN1Y,KAAKud,YAAYJ,GAHjBnd,KAAKwd,mBAAmBpU,EAAM+T,EAAUb,QAAStc,KAAK2Y,cAK1DpM,EAAUkR,aAAezd,KAAK0Y,YAC9BnM,EAAUmR,OAAS,UACnB1d,KAAK2Y,aAAa7H,UAAU3F,IAAInL,KAAK+a,YACrC/a,KAAK2Y,aAAa7H,UAAU5E,OAAOlM,KAAKmb,YACxCnb,KAAK2M,QAAQ,qBAAsBJ,GACtB,aAATmP,GACA1b,KAAK2Y,aAAa/T,aAAa,gBAAiB,OAEpD,OAGA5E,KAAKkb,YAAY9R,GACjBmD,EAAUmR,OAAS,UACnB1d,KAAK2M,QAAQ,qBAAsBJ,MAI/C6L,EAAclW,UAAUkb,QAAU,SAAUhU,EAAMsS,GAC9C,GAAIiC,GAAS3d,KAAKka,MAAM9Q,GAAMsS,GAC1BkC,EAASD,YAAkB9b,QAA8B,gBAAd8b,GAAO,GAAmBA,EAAO,GAAKA,EACjFE,EAAc7d,KAAKka,MAAM9Q,GAAMsS,GAC/BvH,GAAS7S,MAAOtB,KAAK2Y,aAAarX,MAAOsc,MAAOA,EAAOja,QAAS3D,KAAK2Y,aAAcmF,YAAa9d,KAAK2D,QAEzG,IADA3D,KAAK2M,QAAQ,kBAAmBwH,GAC5B0J,GAAyC,kBAAnBA,GAAY,GAAmB,CAErD,MADSA,GAAY,GACXrd,KAAKR,MAAQ2D,QAAS3D,KAAK2Y,aAAcrX,MAAOtB,KAAK2Y,aAAarX,QAE3E,MAAI+W,GAAgBmE,YAAYxc,KAAK2Y,cACzB,aAAT+C,GAGG3Y,EAAWgX,UAAU,cAAgB3Q,EAAO,YAAapJ,KAAK2D,SAASjB,OAAS,EAGhF2V,EAAgB0F,eAAerC,GAAMvH,IAGpDiE,EAAclW,UAAUgb,gBAAkB,SAAUc,EAAWtC,GAC3D,GAAIY,GAAW0B,YAAqBnc,QAAiC,gBAAjBmc,GAAU,GAAmBA,EAAU,GAAKhe,KAAK6Y,gBAAgB6C,GACjHuC,EAAU3B,EAAQ4B,MAAM,UAC5B,KAAKlb,EAAW+D,kBAAkBkX,GAC9B,IAAK,GAAIle,GAAI,EAAGA,EAAIke,EAAQvb,OAAQ3C,IAAK,CACrC,GAAIuB,GAAQ0c,YAAqBnc,OAAQmc,EAAUje,GAAKie,CACxD1B,GAAUA,EAAQ1G,QAAQqI,EAAQle,GAAIuB,GAG9C,MAAOgb,IAEXlE,EAAclW,UAAUsb,mBAAqB,SAAUpU,EAAMkT,EAAS9X,GAClE,GAAIiZ,GAAe1a,EAAW0B,cAAczE,KAAKyd,cAC7C9H,UAAW3V,KAAK+a,WAChBhW,UAAWuX,EACXrT,OAASkV,IAAK/U,IAQlB,IANIpJ,KAAKoe,cAAgBvG,EAAYwG,UACjCZ,EAAa3M,UAAU5E,OAAOlM,KAAK+a,YACnC0C,EAAa3M,UAAU3F,IAAI,aAC3BsS,EAAe1a,EAAW0B,cAAczE,KAAKse,gBAAkB3I,UAAW3V,KAAK+a,WAAYhW,UAAW0Y,EAAac,aAEvHd,EAAand,GAAKN,KAAK2Y,aAAavP,KAAO,QACvCpJ,KAAK2D,QAAQyT,cAAc,qBAAuB5S,EAAMlE,GAAK,MAC7DN,KAAK2D,QAAQyT,cAAc,qBAAuB5S,EAAMlE,GAAK,MAAM2E,YAAYwY,OAE9E,KAAmD,IAA/CjZ,EAAMga,aAAa,wBAAkC,CAC1D,GAAIC,GAAcja,EAAMqD,aAAa,wBACjC6W,EAAala,EAAMqN,cAAcuF,cAAc,IAAMqH,EACzDC,GAAWzZ,YAAYwY,OAEM,OAAxBzd,KAAK2e,gBACV3e,KAAK2e,gBAAgBne,KAAKR,KAAMA,KAAK2Y,aAAc8E,GAGnDzd,KAAK2Y,aAAa3T,WAAWqE,aAAaoU,EAAczd,KAAK2Y,aAAaiG,YAE9EnB,GAAanU,MAAMuV,QAAU,QAC7B7e,KAAKib,gBAAgB7R,GACrBpJ,KAAKsY,UAAUxD,KAAK1L,GACpBpJ,KAAK8e,cAAc1V,IAEvBgP,EAAclW,UAAU+Y,gBAAkB,SAAU7R,GAKhD,MAJApJ,MAAK0Y,YAAc3V,EAAW8W,OAAO7Z,KAAKyd,aAAe,IAAMzd,KAAK+a,WAAY/a,KAAK2Y,aAAa9G,eAC7F7R,KAAK0Y,cACN1Y,KAAK0Y,YAAc3V,EAAW8W,OAAO7Z,KAAKyd,aAAe,IAAMzd,KAAK+a,WAAa,SAAW3R,EAAO,OAEhGpJ,KAAK0Y,aAEhBN,EAAclW,UAAUob,iBAAmB,SAAUlU,GACjD,IAAK,GAAIrJ,GAAI,EAAGA,EAAIC,KAAKuY,WAAW7V,OAAQ3C,IAAK,CAClCC,KAAKuY,WAAWxY,GAClBqJ,OAASA,GACdpJ,KAAKuY,WAAWwG,OAAOhf,EAAG,KAItCqY,EAAclW,UAAUqb,YAAc,SAAUJ,GAC5Cnd,KAAK0Y,YAAYpP,MAAMuV,QAAU,QACjC7e,KAAK0Y,YAAY3T,UAAYoY,EAAUb,QACvCtc,KAAK8e,cAAc3B,EAAU/T,OAEjCgP,EAAclW,UAAUgZ,YAAc,SAAU9R,GACxCpJ,KAAK0Y,cACL1Y,KAAK0Y,YAAYpP,MAAMuV,QAAU,OACjC7e,KAAKsd,iBAAiBlU,GACtBpJ,KAAK2Y,aAAa7H,UAAU3F,IAAInL,KAAKmb,YACrCnb,KAAK2Y,aAAa7H,UAAU5E,OAAOlM,KAAK+a,YACxC/a,KAAK2Y,aAAa/T,aAAa,eAAgB,WAGvDwT,EAAclW,UAAU4c,cAAgB,SAAU1V,GACzCpJ,KAAKka,MAAM9Q,GAAMpJ,KAAKyY,WAAczY,KAAK2Y,aAAarX,MAAMoB,SAC7D1C,KAAK0Y,YAAY3T,UAAY/E,KAAK2Y,aAAarX,MAC/CtB,KAAK0Y,YAAY9T,aAAa,eAAgB,SAC9C5E,KAAKkb,YAAY9R,KAGzBgP,EAAcoE,YAAc,SAAUhY,GAClC,GAAIwa,GAAYxa,EAAMqD,aAAa,OACnC,OAAOmX,KAA4B,aAAdA,GAA0C,UAAdA,GAAuC,WAAdA,IAEvE5G,GACTrV,EAAWkc,KACb7G,GAAc2F,gBACVtF,SAAU,SAAUyG,GAChB,MAAOA,GAAO5d,MAAMoB,OAAS,GAEjCoW,MAAO,SAAUoG,GACb,MAAOpH,GAAe/K,KAAKmS,EAAO5d,QAEtCyX,IAAK,SAAUmG,GACX,MAAOnH,GAAahL,KAAKmS,EAAO5d,QAEpC2X,QAAS,SAAUiG,GACf,MAAOlH,GAAkBjL,KAAKmS,EAAO5d,QAEzCoY,IAAK,SAAUwF,GACX,MAAOhH,GAAenL,KAAKmS,EAAO5d,QAEtC4X,WAAY,SAAUgG,GAClB,MAAO/G,GAAoBpL,KAAKmS,EAAO5d,QAE3C6X,OAAQ,SAAU+F,GACd,OAAQ5X,MAAMwC,OAAOoV,EAAO5d,UAA0C,IAA/B4d,EAAO5d,MAAMkZ,QAAQ,MAEhEpB,OAAQ,SAAU8F,GACd,MAAOjH,GAAgBlL,KAAKmS,EAAO5d,QAEvC+X,UAAW,SAAU6F,GACjB,MAAOA,GAAO5d,MAAMoB,QAAUwc,EAAOtB,OAEzCtE,UAAW,SAAU4F,GACjB,MAAOA,GAAO5d,MAAMoB,QAAUwc,EAAOtB,OAEzCrE,YAAa,SAAU2F,GACnB,GAAItB,GAAQsB,EAAOtB,KACnB,OAAOsB,GAAO5d,MAAMoB,QAAUkb,EAAM,IAAMsB,EAAO5d,MAAMoB,QAAUkb,EAAM,IAE3EpE,MAAO,SAAU0F,GACb,GAAItB,GAAQsB,EAAOtB,KACnB,QAAQtW,MAAMwC,OAAOoV,EAAO5d,SAAWwI,OAAOoV,EAAO5d,QAAUsc,EAAM,IAAM9T,OAAOoV,EAAO5d,QAAUsc,EAAM,IAE7G5E,KAAM,SAAUkG,GACZ,OAAQ5X,MAAM,GAAI6X,MAAKD,EAAO5d,OAAO8d,YAEzCrV,IAAK,SAAUmV,GACX,MAAK5X,OAAMwC,OAAOoV,EAAO5d,QAGlB,GAAI6d,MAAKD,EAAO5d,OAAO8d,WAAa,GAAID,MAAKvD,KAAKC,MAAMD,KAAKyD,UAAUH,EAAOtB,SAASwB,WAFlFF,EAAO5d,OAAS4d,EAAOtB,OAIvC/T,IAAK,SAAUqV,GACX,MAAK5X,OAAMwC,OAAOoV,EAAO5d,QAGlB,GAAI6d,MAAKD,EAAO5d,OAAO8d,WAAa,GAAID,MAAKvD,KAAKC,MAAMD,KAAKyD,UAAUH,EAAOtB,SAASwB,WAFlFF,EAAO5d,OAAS4d,EAAOtB,OAIvCnE,MAAO,SAAUyF,GACb,MAAO,IAAI3b,QAAO2b,EAAOtB,OAAO7Q,KAAKmS,EAAO5d,QAEhDsY,QAAS,SAAUsF,GACf,GAAII,GAAYJ,EAAOpB,YAAY1G,cAAc,IAAM8H,EAAOtB,MAE9D,OADAsB,GAAOtB,MAAQ0B,EAAUhe,MAClB4d,EAAOtB,QAAUsB,EAAO5d,QAGvCc,GACIa,EAAW8P,SAAS,aACrBqF,EAAclW,UAAW,aAAU,IACtCE,GACIa,EAAW8P,cACZqF,EAAclW,UAAW,YAAS,IACrCE,GACIa,EAAW8P,SAAS,YACrBqF,EAAclW,UAAW,iBAAc,IAC1CE,GACIa,EAAW8P,SAAS,YACrBqF,EAAclW,UAAW,iBAAc,IAC1CE,GACIa,EAAW8P,SAAS,UACrBqF,EAAclW,UAAW,mBAAgB,IAC5CE,GACIa,EAAW8P,SAAS,QACrBqF,EAAclW,UAAW,qBAAkB,IAC9CE,GACIa,EAAW8P,SAAS8E,EAAY0H,QACjCnH,EAAclW,UAAW,kBAAe,IAC3CE,GACIa,EAAW+P,SACZoF,EAAclW,UAAW,eAAY,IACxCE,GACIa,EAAW+P,SACZoF,EAAclW,UAAW,YAAS,IACrCE,GACIa,EAAW+P,SACZoF,EAAclW,UAAW,YAAS,IACrCE,GACIa,EAAW+P,SACZoF,EAAclW,UAAW,aAAU,IACtCE,GACIa,EAAW+P,SACZoF,EAAclW,UAAW,aAAU,IACtCE,GACIa,EAAW+P,SACZoF,EAAclW,UAAW,sBAAmB,IAC/CE,GACIa,EAAW+P,SACZoF,EAAclW,UAAW,yBAAsB,IAClDE,GACIa,EAAW+P,SACZoF,EAAclW,UAAW,sBAAmB,IAC/CkW,EAAgBC,EAAkBjW,GAC9Ba,EAAWgQ,uBACZmF,GACH3Y,EAAQ2Y,cAAgBA,CACxB,IAAIC,IACN9W,MAAM9B,EAASmB,MAA+ElB,EAAOD,QAAUoB","file":"ej2-inputs.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\")) : factory(root[\"@syncfusion/ej2-base\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2, index_3) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t    __export(index_3);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, numerictextbox_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(numerictextbox_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, input_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ROOT = 'e-numeric';\n\t    var SPINICON = 'e-input-group-icon';\n\t    var SPINUP = 'e-spin-up';\n\t    var SPINDOWN = 'e-spin-down';\n\t    var ERROR = 'e-error';\n\t    var INCREMENT = 'increment';\n\t    var DECREMENT = 'decrement';\n\t    var INTREGEXP = new RegExp('/^(-)?(\\d*)$/');\n\t    var DECIMALSEPARATOR = '.';\n\t    var NumericTextBox = (function (_super) {\n\t        __extends(NumericTextBox, _super);\n\t        function NumericTextBox(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isPrevFocused = false;\n\t            _this.decimalSeparator = '.';\n\t            _this.intRegExp = new RegExp('/^(-)?(\\d*)$/');\n\t            _this.isCalled = false;\n\t            return _this;\n\t        }\n\t        NumericTextBox.prototype.preRender = function () {\n\t            var ejInstance = ej2_base_4.getValue('ej2_instances', this.element);\n\t            this.cloneElement = this.element.cloneNode(true);\n\t            this.angularTagName = null;\n\t            if (this.element.tagName === 'EJ-NUMERICTEXTBOX') {\n\t                this.angularTagName = this.element.tagName;\n\t                var input = ej2_base_3.createElement('input');\n\t                var index = 0;\n\t                for (index; index < this.element.attributes.length; index++) {\n\t                    input.setAttribute(this.element.attributes[index].nodeName, this.element.attributes[index].nodeValue);\n\t                    input.innerHTML = this.element.innerHTML;\n\t                }\n\t                this.element.parentNode.appendChild(input);\n\t                this.element.parentNode.removeChild(this.element);\n\t                this.element = input;\n\t                ej2_base_4.setValue('ej2_instances', ejInstance, this.element);\n\t            }\n\t            ej2_base_3.attributes(this.element, { 'role': 'spinbutton', 'tabindex': '0', 'autocomplete': 'off', 'aria-live': 'assertive' });\n\t            var localeText = { incrementTitle: 'Increment value', decrementTitle: 'Decrement value', placeholder: '' };\n\t            this.l10n = new ej2_base_1.L10n('numerictextbox', localeText, this.locale);\n\t            this.isValidState = true;\n\t            this.inputStyle = null;\n\t            this.inputName = null;\n\t            this.cultureInfo = {};\n\t            this.initCultureInfo();\n\t            this.initCultureFunc();\n\t            this.checkAttributes();\n\t            this.prevValue = this.value;\n\t            this.validateMinMax();\n\t            this.validateStep();\n\t            if (this.placeholder === null) {\n\t                this.updatePlaceholder();\n\t            }\n\t        };\n\t        NumericTextBox.prototype.render = function () {\n\t            if (this.element.tagName.toLowerCase() === 'input') {\n\t                this.createWrapper();\n\t                if (this.showSpinButton) {\n\t                    this.spinBtnCreation();\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(this.width)) {\n\t                    ej2_base_3.setStyleAttribute(this.container, { 'width': ej2_base_4.formatUnit(this.width) });\n\t                }\n\t                this.changeValue(this.value);\n\t                this.wireEvents();\n\t                if (this.value !== null && !isNaN(this.value)) {\n\t                    if (this.decimals) {\n\t                        this.setProperties({ value: this.roundNumber(this.value, this.decimals) }, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        NumericTextBox.prototype.checkAttributes = function () {\n\t            var attributes = ['value', 'min', 'max', 'step', 'disabled', 'readonly', 'style', 'name'];\n\t            for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n\t                var prop = attributes_1[_i];\n\t                if (!ej2_base_4.isNullOrUndefined(this.element.getAttribute(prop))) {\n\t                    switch (prop) {\n\t                        case 'disabled':\n\t                            var enabled = this.element.getAttribute(prop) === 'disabled' ||\n\t                                this.element.getAttribute(prop) === 'true' ? false : true;\n\t                            this.setProperties({ enabled: enabled }, true);\n\t                            break;\n\t                        case 'readonly':\n\t                            var readonly = this.element.getAttribute(prop) === 'readonly'\n\t                                || this.element.getAttribute(prop) === 'true' ? true : false;\n\t                            this.setProperties({ readonly: readonly }, true);\n\t                            break;\n\t                        case 'style':\n\t                            this.inputStyle = this.element.getAttribute(prop);\n\t                            break;\n\t                        case 'name':\n\t                            this.inputName = this.element.getAttribute(prop);\n\t                            break;\n\t                        default:\n\t                            var value = this.instance.getNumberParser({ format: 'n' })(this.element.getAttribute(prop));\n\t                            if ((value !== null && !isNaN(value)) || (prop === 'value')) {\n\t                                this.setProperties(ej2_base_4.setValue(prop, value, {}), true);\n\t                            }\n\t                            break;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        NumericTextBox.prototype.updatePlaceholder = function () {\n\t            this.setProperties({ placeholder: this.l10n.getConstant('placeholder') }, true);\n\t        };\n\t        NumericTextBox.prototype.initCultureFunc = function () {\n\t            this.instance = new ej2_base_5.Internationalization(this.locale);\n\t        };\n\t        NumericTextBox.prototype.initCultureInfo = function () {\n\t            this.cultureInfo.format = this.format;\n\t            if (ej2_base_4.getValue('currency', this) !== null) {\n\t                ej2_base_4.setValue('currency', this.currency, this.cultureInfo);\n\t            }\n\t        };\n\t        NumericTextBox.prototype.createWrapper = function () {\n\t            var inputObj = input_1.Input.createInput({\n\t                element: this.element,\n\t                customTag: this.angularTagName,\n\t                floatLabelType: this.floatLabelType,\n\t                properties: {\n\t                    readonly: this.readonly,\n\t                    placeholder: this.placeholder,\n\t                    cssClass: this.cssClass,\n\t                    enableRtl: this.enableRtl,\n\t                    enabled: this.enabled\n\t                }\n\t            });\n\t            this.container = inputObj.container;\n\t            ej2_base_3.addClass([this.container], ROOT);\n\t            if (this.readonly) {\n\t                ej2_base_3.attributes(this.element, { 'aria-readonly': 'true' });\n\t            }\n\t            this.hiddenInput = (ej2_base_3.createElement('input', { attrs: { type: 'hidden' } }));\n\t            this.inputName = this.inputName !== null ? this.inputName : this.element.id;\n\t            this.element.removeAttribute('name');\n\t            ej2_base_3.attributes(this.hiddenInput, { 'name': this.inputName });\n\t            this.container.insertBefore(this.hiddenInput, this.element);\n\t            if (this.inputStyle !== null) {\n\t                ej2_base_3.attributes(this.container, { 'style': this.inputStyle });\n\t            }\n\t        };\n\t        NumericTextBox.prototype.spinBtnCreation = function () {\n\t            this.spinDown = input_1.Input.appendSpan(SPINICON + ' ' + SPINDOWN, this.container);\n\t            ej2_base_3.attributes(this.spinDown, {\n\t                'title': this.l10n.getConstant('decrementTitle'),\n\t                'aria-label': this.l10n.getConstant('decrementTitle')\n\t            });\n\t            this.spinUp = input_1.Input.appendSpan(SPINICON + ' ' + SPINUP, this.container);\n\t            ej2_base_3.attributes(this.spinUp, {\n\t                'title': this.l10n.getConstant('incrementTitle'),\n\t                'aria-label': this.l10n.getConstant('incrementTitle')\n\t            });\n\t            this.wireSpinBtnEvents();\n\t        };\n\t        NumericTextBox.prototype.validateMinMax = function () {\n\t            if (!(typeof (this.min) === 'number' && !isNaN(this.min))) {\n\t                this.setProperties({ min: -(Number.MAX_VALUE) }, true);\n\t            }\n\t            if (!(typeof (this.max) === 'number' && !isNaN(this.max))) {\n\t                this.setProperties({ max: Number.MAX_VALUE }, true);\n\t            }\n\t            if (this.decimals !== null) {\n\t                if (this.min !== -(Number.MAX_VALUE)) {\n\t                    this.setProperties({ min: this.instance.getNumberParser({ format: 'n' })(this.formattedValue(this.decimals, this.min)) }, true);\n\t                }\n\t                if (this.max !== (Number.MAX_VALUE)) {\n\t                    this.setProperties({ max: this.instance.getNumberParser({ format: 'n' })(this.formattedValue(this.decimals, this.max)) }, true);\n\t                }\n\t            }\n\t            this.setProperties({ min: this.min > this.max ? this.max : this.min }, true);\n\t            ej2_base_3.attributes(this.element, { 'aria-valuemin': this.min.toString(), 'aria-valuemax': this.max.toString() });\n\t        };\n\t        NumericTextBox.prototype.formattedValue = function (decimals, value) {\n\t            return this.instance.getNumberFormat({\n\t                maximumFractionDigits: decimals,\n\t                minimumFractionDigits: decimals, useGrouping: false\n\t            })(value);\n\t        };\n\t        NumericTextBox.prototype.validateStep = function () {\n\t            if (this.decimals !== null) {\n\t                this.setProperties({ step: this.instance.getNumberParser({ format: 'n' })(this.formattedValue(this.decimals, this.step)) }, true);\n\t            }\n\t        };\n\t        NumericTextBox.prototype.action = function (operation) {\n\t            var value = this.isFocused ? this.instance.getNumberParser({ format: 'n' })(this.element.value) : this.value;\n\t            this.changeValue(this.performAction(value, this.step, operation));\n\t            this.raiseChangeEvent();\n\t        };\n\t        NumericTextBox.prototype.checkErrorClass = function () {\n\t            if (this.isValidState) {\n\t                ej2_base_3.removeClass([this.container], ERROR);\n\t            }\n\t            else {\n\t                ej2_base_3.addClass([this.container], ERROR);\n\t            }\n\t            ej2_base_3.attributes(this.element, { 'aria-invalid': this.isValidState ? 'false' : 'true' });\n\t        };\n\t        NumericTextBox.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'focus', this.focusIn, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'blur', this.focusOut, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'keydown', this.keyDownHandler, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'keypress', this.keyPressHandler, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'change', this.changeHandler, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'paste', this.pasteHandler, this);\n\t        };\n\t        NumericTextBox.prototype.wireSpinBtnEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.spinUp, ej2_base_1.Browser.touchStartEvent, this.mouseDownOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinDown, ej2_base_1.Browser.touchStartEvent, this.mouseDownOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinUp, ej2_base_1.Browser.touchEndEvent, this.mouseUpOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinDown, ej2_base_1.Browser.touchEndEvent, this.mouseUpOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinUp, ej2_base_1.Browser.touchMoveEvent, this.touchMoveOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinDown, ej2_base_1.Browser.touchMoveEvent, this.touchMoveOnSpinner, this);\n\t        };\n\t        NumericTextBox.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'focus', this.focusIn);\n\t            ej2_base_1.EventHandler.remove(this.element, 'blur', this.focusOut);\n\t            ej2_base_1.EventHandler.remove(this.element, 'keydown', this.keyDownHandler);\n\t            ej2_base_1.EventHandler.remove(this.element, 'keypress', this.keyPressHandler);\n\t            ej2_base_1.EventHandler.remove(this.element, 'change', this.changeHandler);\n\t            ej2_base_1.EventHandler.remove(this.element, 'paste', this.pasteHandler);\n\t        };\n\t        NumericTextBox.prototype.unwireSpinBtnEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.spinUp, ej2_base_1.Browser.touchStartEvent, this.mouseDownOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinDown, ej2_base_1.Browser.touchStartEvent, this.mouseDownOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinUp, ej2_base_1.Browser.touchEndEvent, this.mouseUpOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinDown, ej2_base_1.Browser.touchEndEvent, this.mouseUpOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinUp, ej2_base_1.Browser.touchMoveEvent, this.touchMoveOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinDown, ej2_base_1.Browser.touchMoveEvent, this.touchMoveOnSpinner);\n\t        };\n\t        NumericTextBox.prototype.changeHandler = function (event) {\n\t            if (!this.element.value.length) {\n\t                this.setProperties({ value: null }, true);\n\t            }\n\t            var parsedInput = this.instance.getNumberParser({ format: 'n' })(this.element.value);\n\t            this.updateValue(parsedInput, event);\n\t        };\n\t        NumericTextBox.prototype.raiseChangeEvent = function (event) {\n\t            if (this.prevValue !== this.value) {\n\t                var eventArgs = {};\n\t                this.changeEventArgs = { value: this.value, previousValue: this.prevValue };\n\t                if (event) {\n\t                    this.changeEventArgs.event = event;\n\t                }\n\t                ej2_base_4.merge(eventArgs, this.changeEventArgs);\n\t                this.prevValue = this.value;\n\t                this.trigger('change', eventArgs);\n\t            }\n\t        };\n\t        NumericTextBox.prototype.pasteHandler = function () {\n\t            var _this = this;\n\t            var beforeUpdate = this.element.value;\n\t            setTimeout(function () {\n\t                if (!_this.numericRegex().test(_this.element.value)) {\n\t                    _this.setElementValue(beforeUpdate);\n\t                }\n\t            });\n\t        };\n\t        NumericTextBox.prototype.keyDownHandler = function (event) {\n\t            switch (event.keyCode) {\n\t                case 38:\n\t                    event.preventDefault();\n\t                    this.action(INCREMENT);\n\t                    break;\n\t                case 40:\n\t                    event.preventDefault();\n\t                    this.action(DECREMENT);\n\t                    break;\n\t                default: break;\n\t            }\n\t            if (!this.element.value.length) {\n\t                this.setProperties({ value: null }, true);\n\t                this.updateValue(this.instance.getNumberParser({ format: 'n' })(this.element.value));\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.performAction = function (value, step, operation) {\n\t            if (value === null || isNaN(value)) {\n\t                value = 0;\n\t            }\n\t            var updatedValue = operation === INCREMENT ? value + step : value - step;\n\t            updatedValue = this.correctRounding(value, step, updatedValue);\n\t            return this.strictMode ? this.trimValue(updatedValue) : updatedValue;\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.correctRounding = function (value, step, result) {\n\t            var floatExp = new RegExp('[,.](.*)');\n\t            var valueText = value.toString();\n\t            var stepText = step.toString();\n\t            var floatValue = floatExp.test(value.toString());\n\t            var floatStep = floatExp.test(step.toString());\n\t            if (floatValue || floatStep) {\n\t                var valueCount = floatValue ? floatExp.exec(value.toString())[0].length : 0;\n\t                var stepCount = floatStep ? floatExp.exec(step.toString())[0].length : 0;\n\t                var max = Math.max(valueCount, stepCount);\n\t                return value = this.roundValue(result, max);\n\t            }\n\t            return result;\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.roundValue = function (result, precision) {\n\t            precision = precision || 0;\n\t            var divide = Math.pow(10, precision);\n\t            return result *= divide, result = Math.round(result) / divide;\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.updateValue = function (value, event) {\n\t            if (value !== null && !isNaN(value)) {\n\t                if (this.decimals) {\n\t                    value = this.roundNumber(value, this.decimals);\n\t                }\n\t            }\n\t            this.changeValue(value === null || isNaN(value) ? null : this.strictMode ? this.trimValue(value) : value);\n\t            this.raiseChangeEvent(event);\n\t        };\n\t        NumericTextBox.prototype.changeValue = function (value) {\n\t            if (!(value || value === 0)) {\n\t                value = null;\n\t                this.setProperties({ value: value }, true);\n\t            }\n\t            else {\n\t                var numberOfDecimals = void 0;\n\t                var decimalPart = value.toString().split('.')[1];\n\t                numberOfDecimals = !decimalPart || !decimalPart.length ? 0 : decimalPart.length;\n\t                if (this.decimals !== null) {\n\t                    numberOfDecimals = numberOfDecimals < this.decimals ? numberOfDecimals : this.decimals;\n\t                }\n\t                this.setProperties({ value: this.roundNumber(value, numberOfDecimals) }, true);\n\t            }\n\t            this.modifyText();\n\t            if (!this.strictMode) {\n\t                this.validateState();\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.modifyText = function () {\n\t            if (this.value || this.value === 0) {\n\t                var value = this.formatNumber();\n\t                var elementValue = this.isFocused ? value : this.instance.getNumberFormat(this.cultureInfo)(this.value);\n\t                this.setElementValue(elementValue);\n\t                ej2_base_3.attributes(this.element, { 'aria-valuenow': value });\n\t                this.hiddenInput.value = value;\n\t            }\n\t            else {\n\t                this.setElementValue('');\n\t                this.element.removeAttribute('aria-valuenow');\n\t                this.hiddenInput.value = null;\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.setElementValue = function (val, element) {\n\t            input_1.Input.setValue(val, (element ? element : this.element), this.floatLabelType);\n\t        };\n\t        NumericTextBox.prototype.validateState = function () {\n\t            this.isValidState = true;\n\t            if (this.value || this.value === 0) {\n\t                this.isValidState = !(this.value > this.max || this.value < this.min);\n\t            }\n\t            this.checkErrorClass();\n\t        };\n\t        NumericTextBox.prototype.formatNumber = function () {\n\t            var numberOfDecimals;\n\t            var currentValue = this.value;\n\t            var decimalPart = currentValue.toString().split('.')[1];\n\t            numberOfDecimals = !decimalPart || !decimalPart.length ? 0 : decimalPart.length;\n\t            if (this.decimals !== null) {\n\t                numberOfDecimals = numberOfDecimals < this.decimals ? numberOfDecimals : this.decimals;\n\t            }\n\t            return this.instance.getNumberFormat({\n\t                maximumFractionDigits: numberOfDecimals,\n\t                minimumFractionDigits: numberOfDecimals, useGrouping: false\n\t            })(this.value);\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.trimValue = function (value) {\n\t            if (value > this.max) {\n\t                return this.max;\n\t            }\n\t            if (value < this.min) {\n\t                return this.min;\n\t            }\n\t            return value;\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.roundNumber = function (value, precision) {\n\t            var result = value;\n\t            var decimals = precision || 0;\n\t            var result1 = result.toString().split('e');\n\t            result = Math.round(Number(result1[0] + 'e' + (result1[1] ? (Number(result1[1]) + decimals) : decimals)));\n\t            var result2 = result.toString().split('e');\n\t            result = Number(result2[0] + 'e' + (result2[1] ? (Number(result2[1]) - decimals) : -decimals));\n\t            return Number(result.toFixed(decimals));\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.cancelEvent = function (event) {\n\t            event.preventDefault();\n\t            return false;\n\t        };\n\t        NumericTextBox.prototype.keyPressHandler = function (event) {\n\t            if (event.which === 0 || event.metaKey || event.ctrlKey || event.keyCode === 8 || event.keyCode === 13) {\n\t                return true;\n\t            }\n\t            var currentChar = String.fromCharCode(event.which);\n\t            var text = this.element.value;\n\t            text = text.substring(0, this.element.selectionStart) + currentChar + text.substring(this.element.selectionEnd);\n\t            if (!this.numericRegex().test(text)) {\n\t                event.preventDefault();\n\t                event.stopPropagation();\n\t                return false;\n\t            }\n\t            else {\n\t                return true;\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.numericRegex = function () {\n\t            var numericObject = ej2_base_5.getNumericObject(this.locale);\n\t            var decimalSeparator = ej2_base_4.getValue('decimal', numericObject);\n\t            var fractionRule = '*';\n\t            if (decimalSeparator === DECIMALSEPARATOR) {\n\t                decimalSeparator = '\\\\' + decimalSeparator;\n\t            }\n\t            if (this.decimals === 0) {\n\t                return INTREGEXP;\n\t            }\n\t            if (this.decimals && this.validateDecimalOnType) {\n\t                fractionRule = '{0,' + this.decimals + '}';\n\t            }\n\t            return new RegExp('^(-)?(((\\\\d+(' + decimalSeparator + '\\\\d' + fractionRule +\n\t                ')?)|(' + decimalSeparator + '\\\\d' + fractionRule + ')))?$');\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.mouseWheel = function (event) {\n\t            event.preventDefault();\n\t            var delta;\n\t            var rawEvent = event;\n\t            if (rawEvent.wheelDelta) {\n\t                delta = rawEvent.wheelDelta / 120;\n\t            }\n\t            else if (rawEvent.detail) {\n\t                delta = -rawEvent.detail / 3;\n\t            }\n\t            if (delta > 0) {\n\t                this.action(INCREMENT);\n\t            }\n\t            else if (delta < 0) {\n\t                this.action(DECREMENT);\n\t            }\n\t            this.cancelEvent(event);\n\t        };\n\t        NumericTextBox.prototype.focusIn = function (event) {\n\t            if (!this.enabled || this.readonly) {\n\t                return;\n\t            }\n\t            this.isFocused = true;\n\t            ej2_base_3.removeClass([this.container], ERROR);\n\t            this.prevValue = this.value;\n\t            if ((this.value || this.value === 0)) {\n\t                var formatValue = this.formatNumber();\n\t                this.setElementValue(formatValue);\n\t                if (!this.isPrevFocused) {\n\t                    this.element.setSelectionRange(0, formatValue.length);\n\t                }\n\t            }\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.add(this.element, 'mousewheel DOMMouseScroll', this.mouseWheel, this);\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.focusOut = function (event) {\n\t            var _this = this;\n\t            if (this.isPrevFocused) {\n\t                event.preventDefault();\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    var value_1 = this.element.value;\n\t                    this.element.focus();\n\t                    this.isPrevFocused = false;\n\t                    var ele_1 = this.element;\n\t                    setTimeout(function () {\n\t                        _this.setElementValue(value_1, ele_1);\n\t                    }, 200);\n\t                }\n\t            }\n\t            else {\n\t                this.isFocused = false;\n\t                if (!this.element.value.length) {\n\t                    this.setProperties({ value: null }, true);\n\t                }\n\t                var parsedInput = this.instance.getNumberParser({ format: 'n' })(this.element.value);\n\t                this.updateValue(parsedInput);\n\t                if (!ej2_base_1.Browser.isDevice) {\n\t                    ej2_base_1.EventHandler.remove(this.element, 'mousewheel DOMMouseScroll', this.mouseWheel);\n\t                }\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.mouseDownOnSpinner = function (event) {\n\t            var _this = this;\n\t            if (this.isFocused) {\n\t                this.isPrevFocused = true;\n\t                event.preventDefault();\n\t            }\n\t            if (!this.getElementData(event)) {\n\t                return;\n\t            }\n\t            var result = this.getElementData(event);\n\t            var target = event.currentTarget;\n\t            var action = (target.classList.contains(SPINUP)) ? INCREMENT : DECREMENT;\n\t            ej2_base_1.EventHandler.add(target, 'mouseleave', this.mouseUpClick, this);\n\t            this.timeOut = setInterval(function () { _this.isCalled = true; _this.action(action); }, 150);\n\t            ej2_base_1.EventHandler.add(document, 'mouseup', this.mouseUpClick, this);\n\t        };\n\t        NumericTextBox.prototype.touchMoveOnSpinner = function (event) {\n\t            var target = document.elementFromPoint(event.clientX, event.clientY);\n\t            if (!(target.classList.contains(SPINICON))) {\n\t                clearInterval(this.timeOut);\n\t            }\n\t        };\n\t        NumericTextBox.prototype.mouseUpOnSpinner = function (event) {\n\t            if (this.isPrevFocused) {\n\t                this.element.focus();\n\t                if (!ej2_base_1.Browser.isDevice) {\n\t                    this.isPrevFocused = false;\n\t                }\n\t            }\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                event.preventDefault();\n\t            }\n\t            if (!this.getElementData(event)) {\n\t                return;\n\t            }\n\t            var target = event.currentTarget;\n\t            var action = (target.classList.contains(SPINUP)) ? INCREMENT : DECREMENT;\n\t            ej2_base_1.EventHandler.remove(target, 'mouseleave', this.mouseUpClick);\n\t            if (!this.isCalled) {\n\t                this.action(action);\n\t            }\n\t            this.isCalled = false;\n\t            ej2_base_1.EventHandler.remove(document, 'mouseup', this.mouseUpClick);\n\t        };\n\t        NumericTextBox.prototype.getElementData = function (event) {\n\t            if ((event.which && event.which === 3) || (event.button && event.button === 2)\n\t                || !this.enabled || this.readonly) {\n\t                return false;\n\t            }\n\t            clearInterval(this.timeOut);\n\t            return true;\n\t        };\n\t        NumericTextBox.prototype.mouseUpClick = function (event) {\n\t            event.stopPropagation();\n\t            clearInterval(this.timeOut);\n\t            this.isCalled = false;\n\t            ej2_base_1.EventHandler.remove(this.spinUp, 'mouseleave', this.mouseUpClick);\n\t            ej2_base_1.EventHandler.remove(this.spinDown, 'mouseleave', this.mouseUpClick);\n\t        };\n\t        NumericTextBox.prototype.increment = function (step) {\n\t            if (step === void 0) { step = this.step; }\n\t            this.changeValue(this.performAction(this.value, step, INCREMENT));\n\t        };\n\t        NumericTextBox.prototype.decrement = function (step) {\n\t            if (step === void 0) { step = this.step; }\n\t            this.changeValue(this.performAction(this.value, step, DECREMENT));\n\t        };\n\t        NumericTextBox.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            ej2_base_3.detach(this.hiddenInput);\n\t            if (this.showSpinButton) {\n\t                this.unwireSpinBtnEvents();\n\t                ej2_base_3.detach(this.spinUp);\n\t                ej2_base_3.detach(this.spinDown);\n\t            }\n\t            this.container.parentElement.appendChild(this.cloneElement);\n\t            ej2_base_3.detach(this.container);\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        NumericTextBox.prototype.getText = function () {\n\t            return this.element.value;\n\t        };\n\t        NumericTextBox.prototype.getPersistData = function () {\n\t            var keyEntity = ['value'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        NumericTextBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var elementVal;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'width':\n\t                        ej2_base_3.setStyleAttribute(this.container, { 'width': ej2_base_4.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'cssClass':\n\t                        input_1.Input.setCssClass(newProp.cssClass, [this.container], oldProp.cssClass);\n\t                        break;\n\t                    case 'enabled':\n\t                        input_1.Input.setEnabled(newProp.enabled, this.element);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        input_1.Input.setEnableRtl(newProp.enableRtl, [this.container]);\n\t                        break;\n\t                    case 'readonly':\n\t                        input_1.Input.setReadonly(newProp.readonly, this.element);\n\t                        if (this.readonly) {\n\t                            ej2_base_3.attributes(this.element, { 'aria-readonly': 'true' });\n\t                        }\n\t                        else {\n\t                            this.element.removeAttribute('aria-readonly');\n\t                        }\n\t                        break;\n\t                    case 'placeholder':\n\t                        input_1.Input.setPlaceholder(newProp.placeholder, this.element);\n\t                        break;\n\t                    case 'step':\n\t                        this.step = newProp.step;\n\t                        this.validateStep();\n\t                        break;\n\t                    case 'showSpinButton':\n\t                        if (newProp.showSpinButton) {\n\t                            this.spinBtnCreation();\n\t                        }\n\t                        else {\n\t                            ej2_base_3.detach(this.spinUp);\n\t                            ej2_base_3.detach(this.spinDown);\n\t                        }\n\t                        break;\n\t                    case 'value':\n\t                        this.updateValue(newProp.value);\n\t                        break;\n\t                    case 'min':\n\t                    case 'max':\n\t                        ej2_base_4.setValue(prop, ej2_base_4.getValue(prop, newProp), this);\n\t                        this.validateMinMax();\n\t                        this.updateValue(this.value);\n\t                        break;\n\t                    case 'strictMode':\n\t                        this.strictMode = newProp.strictMode;\n\t                        this.updateValue(this.value);\n\t                        this.validateState();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initCultureFunc();\n\t                        this.l10n.setLocale(this.locale);\n\t                        this.updatePlaceholder();\n\t                        input_1.Input.setPlaceholder(this.placeholder, this.element);\n\t                        this.updateValue(this.value);\n\t                        break;\n\t                    case 'currency':\n\t                        ej2_base_4.setValue(prop, ej2_base_4.getValue(prop, newProp), this.cultureInfo);\n\t                        this.updateValue(this.value);\n\t                        break;\n\t                    case 'format':\n\t                        ej2_base_4.setValue(prop, ej2_base_4.getValue(prop, newProp), this);\n\t                        this.initCultureInfo();\n\t                        this.updateValue(this.value);\n\t                        break;\n\t                    case 'decimals':\n\t                        this.decimals = newProp.decimals;\n\t                        this.updateValue(this.value);\n\t                }\n\t            }\n\t        };\n\t        NumericTextBox.prototype.getModuleName = function () {\n\t            return 'numerictextbox';\n\t        };\n\t        return NumericTextBox;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], NumericTextBox.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(-(Number.MAX_VALUE))\n\t    ], NumericTextBox.prototype, \"min\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(Number.MAX_VALUE)\n\t    ], NumericTextBox.prototype, \"max\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], NumericTextBox.prototype, \"step\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"placeholder\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], NumericTextBox.prototype, \"showSpinButton\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], NumericTextBox.prototype, \"readonly\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], NumericTextBox.prototype, \"enabled\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], NumericTextBox.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], NumericTextBox.prototype, \"enablePersistence\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('n2')\n\t    ], NumericTextBox.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"decimals\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"currency\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], NumericTextBox.prototype, \"strictMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], NumericTextBox.prototype, \"validateDecimalOnType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Never')\n\t    ], NumericTextBox.prototype, \"floatLabelType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], NumericTextBox.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], NumericTextBox.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], NumericTextBox.prototype, \"change\", void 0);\n\t    NumericTextBox = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], NumericTextBox);\n\t    exports.NumericTextBox = NumericTextBox;\n\t    exports.numerictextboxHelper = ej2_base_1.CreateBuilder(NumericTextBox);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLASSNAMES = {\n\t        RTL: 'e-rtl',\n\t        DISABLE: 'e-disabled',\n\t        INPUT: 'e-input',\n\t        INPUTGROUP: 'e-input-group',\n\t        FLOATINPUT: 'e-float-input',\n\t        FLOATLINE: 'e-float-line',\n\t        FLOATTEXT: 'e-float-text',\n\t        CLEARICON: 'e-clear-icon',\n\t        CLEARICONHIDE: 'e-clear-icon-hide',\n\t        LABELTOP: 'e-label-top',\n\t        LABELBOTTOM: 'e-label-bottom',\n\t        NOFLOATLABEL: 'e-no-float-label',\n\t        INPUTCUSTOMTAG: 'e-input-custom-tag',\n\t        FLOATCUSTOMTAG: 'e-float-custom-tag'\n\t    };\n\t    var Input;\n\t    (function (Input) {\n\t        var privateInputObj = {\n\t            container: null,\n\t            buttons: [],\n\t            clearButton: null\n\t        };\n\t        function createInput(args) {\n\t            var inputObject = { container: null, buttons: [], clearButton: null };\n\t            if (ej2_base_1.isNullOrUndefined(args.floatLabelType) || args.floatLabelType === 'Never') {\n\t                inputObject.container = createInputContainer(args, CLASSNAMES.INPUTGROUP, CLASSNAMES.INPUTCUSTOMTAG, 'span');\n\t                args.element.parentNode.insertBefore(inputObject.container, args.element);\n\t                ej2_base_1.addClass([args.element], CLASSNAMES.INPUT);\n\t                inputObject.container.appendChild(args.element);\n\t            }\n\t            else {\n\t                createFloatingInput(args, inputObject);\n\t            }\n\t            args.element.addEventListener('focus', function () {\n\t                var parent = getParentNode(this);\n\t                if (parent.classList.contains('e-input-group')) {\n\t                    parent.classList.add('e-input-focus');\n\t                }\n\t            });\n\t            args.element.addEventListener('blur', function () {\n\t                var parent = getParentNode(this);\n\t                if (parent.classList.contains('e-input-group')) {\n\t                    parent.classList.remove('e-input-focus');\n\t                }\n\t            });\n\t            if (!ej2_base_1.isNullOrUndefined(args.properties) && !ej2_base_1.isNullOrUndefined(args.properties.showClearButton) && args.properties.showClearButton) {\n\t                inputObject.clearButton = createClearButton(args.element, inputObject.container);\n\t                if (inputObject.container.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                    ej2_base_1.addClass([inputObject.container], CLASSNAMES.INPUTGROUP);\n\t                }\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(args.buttons)) {\n\t                for (var i = 0; i < args.buttons.length; i++) {\n\t                    inputObject.buttons.push(appendSpan(args.buttons[i], inputObject.container));\n\t                }\n\t            }\n\t            inputObject = setPropertyValue(args, inputObject);\n\t            privateInputObj = inputObject;\n\t            return inputObject;\n\t        }\n\t        Input.createInput = createInput;\n\t        function _focusFn() {\n\t            var label = getParentNode(this).getElementsByClassName('e-float-text')[0];\n\t            ej2_base_1.addClass([label], CLASSNAMES.LABELTOP);\n\t            if (label.classList.contains(CLASSNAMES.LABELBOTTOM)) {\n\t                ej2_base_1.removeClass([label], CLASSNAMES.LABELBOTTOM);\n\t            }\n\t        }\n\t        function _blurFn() {\n\t            var parent = getParentNode(this);\n\t            if (parent.getElementsByTagName('input')[0].value === '') {\n\t                var label = parent.getElementsByClassName('e-float-text')[0];\n\t                if (label.classList.contains(CLASSNAMES.LABELTOP)) {\n\t                    ej2_base_1.removeClass([label], CLASSNAMES.LABELTOP);\n\t                }\n\t                ej2_base_1.addClass([label], CLASSNAMES.LABELBOTTOM);\n\t            }\n\t        }\n\t        function wireFloatingEvents(element) {\n\t            element.addEventListener('focus', _focusFn);\n\t            element.addEventListener('blur', _blurFn);\n\t        }\n\t        function unwireFloatingEvents(element) {\n\t            element.removeEventListener('focus', _focusFn);\n\t            element.removeEventListener('blur', _blurFn);\n\t        }\n\t        function createFloatingInput(args, inputObject) {\n\t            var inputElement;\n\t            var floatLinelement;\n\t            var floatLabelElement;\n\t            if (args.floatLabelType === 'Auto') {\n\t                wireFloatingEvents(args.element);\n\t            }\n\t            if (ej2_base_1.isNullOrUndefined(inputObject.container)) {\n\t                inputObject.container = createInputContainer(args, CLASSNAMES.FLOATINPUT, CLASSNAMES.FLOATCUSTOMTAG, 'div');\n\t                args.element.parentNode.insertBefore(inputObject.container, args.element);\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(args.customTag)) {\n\t                    inputObject.container.classList.add(CLASSNAMES.FLOATCUSTOMTAG);\n\t                }\n\t                inputObject.container.classList.add(CLASSNAMES.FLOATINPUT);\n\t            }\n\t            floatLinelement = ej2_base_1.createElement('span', { className: CLASSNAMES.FLOATLINE });\n\t            floatLabelElement = ej2_base_1.createElement('label', { className: CLASSNAMES.FLOATTEXT });\n\t            if (!ej2_base_1.isNullOrUndefined(args.element.id) && args.element.id !== '') {\n\t                floatLabelElement.id = 'label_' + args.element.id.replace(/ /g, '_');\n\t                ej2_base_1.attributes(args.element, { 'aria-labelledby': floatLabelElement.id });\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(args.element.placeholder) && args.element.placeholder !== '') {\n\t                floatLabelElement.innerHTML = args.element.placeholder;\n\t                args.element.removeAttribute('placeholder');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(args.properties) && !ej2_base_1.isNullOrUndefined(args.properties.placeholder) &&\n\t                args.properties.placeholder !== '') {\n\t                floatLabelElement.innerHTML = args.properties.placeholder;\n\t            }\n\t            if (!floatLabelElement.innerHTML) {\n\t                inputObject.container.classList.add(CLASSNAMES.NOFLOATLABEL);\n\t            }\n\t            inputObject.container.appendChild(args.element);\n\t            inputObject.container.appendChild(floatLinelement);\n\t            inputObject.container.appendChild(floatLabelElement);\n\t            updateLabelState(args.element.value, floatLabelElement);\n\t            if (args.floatLabelType === 'Always') {\n\t                if (floatLabelElement.classList.contains(CLASSNAMES.LABELBOTTOM)) {\n\t                    ej2_base_1.removeClass([floatLabelElement], CLASSNAMES.LABELBOTTOM);\n\t                }\n\t                ej2_base_1.addClass([floatLabelElement], CLASSNAMES.LABELTOP);\n\t            }\n\t            if (args.floatLabelType === 'Auto') {\n\t                args.element.addEventListener('input', function (event) {\n\t                    updateLabelState(args.element.value, floatLabelElement);\n\t                });\n\t                args.element.addEventListener('blur', function (event) {\n\t                    updateLabelState(args.element.value, floatLabelElement);\n\t                });\n\t            }\n\t        }\n\t        function setPropertyValue(args, inputObject) {\n\t            if (!ej2_base_1.isNullOrUndefined(args.properties)) {\n\t                for (var _i = 0, _a = Object.keys(args.properties); _i < _a.length; _i++) {\n\t                    var prop = _a[_i];\n\t                    switch (prop) {\n\t                        case 'cssClass':\n\t                            setCssClass(args.properties.cssClass, [inputObject.container]);\n\t                            break;\n\t                        case 'enabled':\n\t                            setEnabled(args.properties.enabled, args.element);\n\t                            break;\n\t                        case 'enableRtl':\n\t                            setEnableRtl(args.properties.enableRtl, [inputObject.container]);\n\t                            break;\n\t                        case 'placeholder':\n\t                            setPlaceholder(args.properties.placeholder, args.element);\n\t                            break;\n\t                        case 'readonly':\n\t                            setReadonly(args.properties.readonly, args.element);\n\t                            break;\n\t                    }\n\t                }\n\t            }\n\t            return inputObject;\n\t        }\n\t        function updateIconState(value, button) {\n\t            if (value) {\n\t                ej2_base_1.removeClass([button], CLASSNAMES.CLEARICONHIDE);\n\t            }\n\t            else {\n\t                ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE);\n\t            }\n\t        }\n\t        function updateLabelState(value, label) {\n\t            if (value) {\n\t                ej2_base_1.addClass([label], CLASSNAMES.LABELTOP);\n\t                if (label.classList.contains(CLASSNAMES.LABELBOTTOM)) {\n\t                    ej2_base_1.removeClass([label], CLASSNAMES.LABELBOTTOM);\n\t                }\n\t            }\n\t            else {\n\t                if (label.classList.contains(CLASSNAMES.LABELTOP)) {\n\t                    ej2_base_1.removeClass([label], CLASSNAMES.LABELTOP);\n\t                }\n\t                ej2_base_1.addClass([label], CLASSNAMES.LABELBOTTOM);\n\t            }\n\t        }\n\t        function getParentNode(element) {\n\t            var parentNode = element.parentNode;\n\t            return parentNode;\n\t        }\n\t        function createClearButton(element, container) {\n\t            var button = ej2_base_1.createElement('span', { className: CLASSNAMES.CLEARICON });\n\t            container.appendChild(button);\n\t            if (!ej2_base_1.isNullOrUndefined(privateInputObj.container) &&\n\t                privateInputObj.container.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                ej2_base_1.addClass([privateInputObj.container], CLASSNAMES.INPUTGROUP);\n\t            }\n\t            ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE);\n\t            wireClearBtnEvents(element, button);\n\t            return button;\n\t        }\n\t        function wireClearBtnEvents(element, button) {\n\t            button.addEventListener('click', function (event) {\n\t                if (!(element.classList.contains(CLASSNAMES.DISABLE) || element.readOnly)) {\n\t                    event.preventDefault();\n\t                    if (element !== document.activeElement) {\n\t                        element.focus();\n\t                    }\n\t                    element.value = '';\n\t                    ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE);\n\t                }\n\t            });\n\t            element.addEventListener('input', function (event) {\n\t                updateIconState(element.value, button);\n\t            });\n\t            element.addEventListener('focus', function (event) {\n\t                updateIconState(element.value, button);\n\t            });\n\t            element.addEventListener('blur', function (event) {\n\t                setTimeout(function () { ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE); }, 200);\n\t            });\n\t        }\n\t        function validateLabel(element, floatLabelType) {\n\t            var parent = getParentNode(element);\n\t            if (parent.classList.contains(CLASSNAMES.FLOATINPUT) && floatLabelType === 'Auto') {\n\t                var label = getParentNode(element).getElementsByClassName('e-float-text')[0];\n\t                updateLabelState(element.value, label);\n\t            }\n\t        }\n\t        function createInputContainer(args, className, tagClass, tag) {\n\t            var container;\n\t            if (!ej2_base_1.isNullOrUndefined(args.customTag)) {\n\t                container = ej2_base_1.createElement(args.customTag, { className: className });\n\t                container.classList.add(tagClass);\n\t            }\n\t            else {\n\t                container = ej2_base_1.createElement(tag, { className: className });\n\t            }\n\t            return container;\n\t        }\n\t        function setValue(value, element, floatLabelType, clearButton) {\n\t            element.value = value;\n\t            if ((!ej2_base_1.isNullOrUndefined(floatLabelType)) && floatLabelType === 'Auto') {\n\t                validateLabel(element, floatLabelType);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(clearButton) && clearButton) {\n\t                var parentElement = getParentNode(element);\n\t                var button = parentElement.getElementsByClassName(CLASSNAMES.CLEARICON)[0];\n\t                if (element.value && parentElement.classList.contains('e-input-focus')) {\n\t                    ej2_base_1.removeClass([button], CLASSNAMES.CLEARICONHIDE);\n\t                }\n\t                else {\n\t                    ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE);\n\t                }\n\t            }\n\t        }\n\t        Input.setValue = setValue;\n\t        function setCssClass(cssClass, elements, oldClass) {\n\t            if (!ej2_base_1.isNullOrUndefined(oldClass) && oldClass !== '') {\n\t                ej2_base_1.removeClass(elements, oldClass);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cssClass) && cssClass !== '') {\n\t                ej2_base_1.addClass(elements, cssClass);\n\t            }\n\t        }\n\t        Input.setCssClass = setCssClass;\n\t        function setPlaceholder(placeholder, element) {\n\t            var parentElement;\n\t            parentElement = getParentNode(element);\n\t            if (parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                if (!ej2_base_1.isNullOrUndefined(placeholder) && placeholder !== '') {\n\t                    parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = placeholder;\n\t                    parentElement.classList.remove(CLASSNAMES.NOFLOATLABEL);\n\t                }\n\t                else {\n\t                    parentElement.classList.add(CLASSNAMES.NOFLOATLABEL);\n\t                    parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = '';\n\t                }\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(placeholder) && placeholder !== '') {\n\t                    ej2_base_1.attributes(element, { 'placeholder': placeholder, 'aria-placeholder': placeholder });\n\t                }\n\t                else {\n\t                    element.removeAttribute('placeholder');\n\t                    element.removeAttribute('aria-placeholder');\n\t                }\n\t            }\n\t        }\n\t        Input.setPlaceholder = setPlaceholder;\n\t        function setReadonly(isReadonly, element, floatLabelType) {\n\t            if (isReadonly) {\n\t                ej2_base_1.attributes(element, { readonly: '' });\n\t            }\n\t            else {\n\t                element.removeAttribute('readonly');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(floatLabelType)) {\n\t                validateLabel(element, floatLabelType);\n\t            }\n\t        }\n\t        Input.setReadonly = setReadonly;\n\t        function setEnableRtl(isRtl, elements) {\n\t            if (isRtl) {\n\t                ej2_base_1.addClass(elements, CLASSNAMES.RTL);\n\t            }\n\t            else {\n\t                ej2_base_1.removeClass(elements, CLASSNAMES.RTL);\n\t            }\n\t        }\n\t        Input.setEnableRtl = setEnableRtl;\n\t        function setEnabled(isEnable, element, floatLabelType) {\n\t            var disabledAttrs = { 'disabled': 'disabled', 'aria-disabled': 'true' };\n\t            if (isEnable) {\n\t                element.classList.remove(CLASSNAMES.DISABLE);\n\t                removeAttributes(disabledAttrs, element);\n\t            }\n\t            else {\n\t                element.classList.add(CLASSNAMES.DISABLE);\n\t                addAttributes(disabledAttrs, element);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(floatLabelType)) {\n\t                validateLabel(element, floatLabelType);\n\t            }\n\t        }\n\t        Input.setEnabled = setEnabled;\n\t        function removeAttributes(attrs, element) {\n\t            for (var _i = 0, _a = Object.keys(attrs); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var parentElement = void 0;\n\t                parentElement = getParentNode(element);\n\t                if (key === 'disabled') {\n\t                    element.classList.remove(CLASSNAMES.DISABLE);\n\t                }\n\t                if (key === 'disabled' && parentElement.classList.contains(CLASSNAMES.INPUTGROUP)) {\n\t                    parentElement.classList.remove(CLASSNAMES.DISABLE);\n\t                }\n\t                if (key === 'placeholder' && parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                    parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = '';\n\t                }\n\t                else {\n\t                    element.removeAttribute(key);\n\t                }\n\t            }\n\t        }\n\t        Input.removeAttributes = removeAttributes;\n\t        function addAttributes(attrs, element) {\n\t            for (var _i = 0, _a = Object.keys(attrs); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var parentElement = void 0;\n\t                parentElement = getParentNode(element);\n\t                if (key === 'disabled') {\n\t                    element.classList.add(CLASSNAMES.DISABLE);\n\t                }\n\t                if (key === 'disabled' && parentElement.classList.contains(CLASSNAMES.INPUTGROUP)) {\n\t                    parentElement.classList.add(CLASSNAMES.DISABLE);\n\t                }\n\t                if (key === 'placeholder' && parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                    parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = attrs[key];\n\t                }\n\t                else {\n\t                    element.setAttribute(key, attrs[key]);\n\t                }\n\t            }\n\t        }\n\t        Input.addAttributes = addAttributes;\n\t        function removeFloating(input) {\n\t            var container = input.container;\n\t            if (!ej2_base_1.isNullOrUndefined(container) && container.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                var inputEle = container.querySelector('input');\n\t                var placeholder = container.querySelector('.' + CLASSNAMES.FLOATTEXT).textContent;\n\t                var clearButton = container.querySelector('.e-clear-icon') !== null;\n\t                ej2_base_1.detach(container.querySelector('.' + CLASSNAMES.FLOATLINE));\n\t                ej2_base_1.detach(container.querySelector('.' + CLASSNAMES.FLOATTEXT));\n\t                ej2_base_1.classList(container, [CLASSNAMES.INPUTGROUP], [CLASSNAMES.FLOATINPUT]);\n\t                unwireFloatingEvents(inputEle);\n\t                ej2_base_1.attributes(inputEle, { 'placeholder': placeholder });\n\t                inputEle.classList.add(CLASSNAMES.INPUT);\n\t                if (!clearButton) {\n\t                    inputEle.removeAttribute('required');\n\t                }\n\t            }\n\t        }\n\t        Input.removeFloating = removeFloating;\n\t        function addFloating(input, type, placeholder) {\n\t            var container = ej2_base_1.closest(input, '.' + CLASSNAMES.INPUTGROUP);\n\t            if (type !== 'Never') {\n\t                var customTag = container.tagName;\n\t                customTag = customTag !== 'DIV' && customTag !== 'SPAN' ? customTag : null;\n\t                var args = { element: input, floatLabelType: type, customTag: customTag, properties: { placeholder: placeholder } };\n\t                var iconEle = container.querySelector('.e-clear-icon');\n\t                var inputObj = { container: container };\n\t                input.classList.remove(CLASSNAMES.INPUT);\n\t                createFloatingInput(args, inputObj);\n\t                if (ej2_base_1.isNullOrUndefined(iconEle)) {\n\t                    iconEle = container.querySelector('.e-input-group-icon');\n\t                }\n\t                if (ej2_base_1.isNullOrUndefined(iconEle)) {\n\t                    container.classList.remove(CLASSNAMES.INPUTGROUP);\n\t                }\n\t                else {\n\t                    var floatLine = container.querySelector('.' + CLASSNAMES.FLOATLINE);\n\t                    var floatText = container.querySelector('.' + CLASSNAMES.FLOATTEXT);\n\t                    container.insertBefore(input, iconEle);\n\t                    container.insertBefore(floatLine, iconEle);\n\t                    container.insertBefore(floatText, iconEle);\n\t                }\n\t            }\n\t        }\n\t        Input.addFloating = addFloating;\n\t        function appendSpan(iconClass, container) {\n\t            var button = ej2_base_1.createElement('span', { className: iconClass });\n\t            container.appendChild(button);\n\t            if (!container.classList.contains(CLASSNAMES.INPUTGROUP)) {\n\t                container.classList.add(CLASSNAMES.INPUTGROUP);\n\t            }\n\t            button.addEventListener('mousedown', function () {\n\t                if (!container.classList.contains('e-disabled') && !container.querySelector('input').readOnly) {\n\t                    this.classList.add('e-input-btn-ripple');\n\t                }\n\t            });\n\t            button.addEventListener('mouseup', function () {\n\t                var ele = this;\n\t                setTimeout(function () { ele.classList.remove('e-input-btn-ripple'); }, 500);\n\t            });\n\t            return button;\n\t        }\n\t        Input.appendSpan = appendSpan;\n\t    })(Input = exports.Input || (exports.Input = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, input_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(input_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, form_validator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(form_validator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VALIDATE_EMAIL = new RegExp('^[A-Za-z0-9._%+-]{3,}@[a-zA-Z]{3,}([.]{1}[a-zA-Z]{2,5}' +\n\t        '|[.]{1}[a-zA-Z]{2,4}[.]{1}[a-zA-Z]{2,4})$');\n\t    var VALIDATE_URL = new RegExp('^((ftp|http|https):\\/\\/)?www\\.([A-z]{2,})\\.([A-z]{2,})$');\n\t    var VALIDATE_DATE_ISO = new RegExp('^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$');\n\t    var VALIDATE_DIGITS = new RegExp('^[0-9]*$');\n\t    var VALIDATE_PHONE = new RegExp('^[+]?[0-9]{9,13}$');\n\t    var VALIDATE_CREDITCARD = new RegExp('^\\\\d{13,16}$');\n\t    var ErrorOption;\n\t    (function (ErrorOption) {\n\t        ErrorOption[ErrorOption[\"Message\"] = 0] = \"Message\";\n\t        ErrorOption[ErrorOption[\"Label\"] = 1] = \"Label\";\n\t    })(ErrorOption = exports.ErrorOption || (exports.ErrorOption = {}));\n\t    var FormValidator = FormValidator_1 = (function (_super) {\n\t        __extends(FormValidator, _super);\n\t        function FormValidator(element, options) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.validated = [];\n\t            _this.errorRules = [];\n\t            _this.allowSubmit = false;\n\t            _this.required = 'required';\n\t            _this.infoElement = null;\n\t            _this.inputElement = null;\n\t            _this.selectQuery = 'input:not([type=reset]):not([type=button]), select, textarea';\n\t            _this.defaultMessages = {\n\t                required: 'This field is required.',\n\t                email: 'Please enter a valid email address.',\n\t                url: 'Please enter a valid URL.',\n\t                date: 'Please enter a valid date.',\n\t                dateIso: 'Please enter a valid date ( ISO ).',\n\t                creditcard: 'Please enter valid card number',\n\t                number: 'Please enter a valid number.',\n\t                digits: 'Please enter only digits.',\n\t                maxLength: 'Please enter no more than {0} characters.',\n\t                minLength: 'Please enter at least {0} characters.',\n\t                rangeLength: 'Please enter a value between {0} and {1} characters long.',\n\t                range: 'Please enter a value between {0} and {1}.',\n\t                max: 'Please enter a value less than or equal to {0}.',\n\t                min: 'Please enter a value greater than or equal to {0}.',\n\t                regex: 'Please enter a correct value.',\n\t                tel: 'Please enter a valid phone number.',\n\t                pattern: 'Please enter a correct pattern value.',\n\t                equalTo: 'Please enter the valid match text',\n\t            };\n\t            element = typeof element === 'string' ? ej2_base_1.select(element, document) : element;\n\t            if (_this.element != null) {\n\t                _this.element.setAttribute('novalidate', '');\n\t                _this.inputElements = ej2_base_1.selectAll(_this.selectQuery, _this.element);\n\t                _this.createHTML5Rules();\n\t                _this.wireEvents();\n\t            }\n\t            else {\n\t                return undefined;\n\t            }\n\t            return _this;\n\t        }\n\t        FormValidator.prototype.addRules = function (name, rules) {\n\t            if (this.rules.hasOwnProperty(name)) {\n\t                ej2_base_2.extend(this.rules[name], rules, {});\n\t            }\n\t            else {\n\t                this.rules[name] = rules;\n\t            }\n\t        };\n\t        FormValidator.prototype.removeRules = function (name, rules) {\n\t            if (!name && !rules) {\n\t                this.rules = {};\n\t            }\n\t            else if (this.rules[name] && !rules) {\n\t                delete this.rules[name];\n\t            }\n\t            else if (!ej2_base_2.isNullOrUndefined(this.rules[name] && rules)) {\n\t                for (var i = 0; i < rules.length; i++) {\n\t                    delete this.rules[name][rules[i]];\n\t                }\n\t            }\n\t            else {\n\t                return;\n\t            }\n\t        };\n\t        FormValidator.prototype.validate = function (selected) {\n\t            var rules = Object.keys(this.rules);\n\t            if (selected && rules.length) {\n\t                this.validateRules(selected);\n\t                return rules.indexOf(selected) !== -1 && this.errorRules.filter(function (data) {\n\t                    return data.name === selected;\n\t                }).length === 0;\n\t            }\n\t            else {\n\t                for (var _i = 0, rules_1 = rules; _i < rules_1.length; _i++) {\n\t                    var name_1 = rules_1[_i];\n\t                    this.validateRules(name_1);\n\t                }\n\t                return this.errorRules.length === 0;\n\t            }\n\t        };\n\t        FormValidator.prototype.reset = function () {\n\t            this.errorRules = [];\n\t            this.validated = [];\n\t            this.element.reset();\n\t            var elements = ej2_base_1.selectAll(this.selectQuery, this.element);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var element = elements_1[_i];\n\t                var input = element;\n\t                input.removeAttribute('aria-invalid');\n\t                input.classList.remove(this.errorClass);\n\t                if (input.name.length > 0) {\n\t                    this.getInputElement(input.name);\n\t                    this.getErrorElement(input.name);\n\t                    this.hideMessage(input.name);\n\t                }\n\t                input.classList.remove(this.validClass);\n\t            }\n\t        };\n\t        FormValidator.prototype.getInputElement = function (name) {\n\t            this.inputElement = (ej2_base_1.select('[name=' + name + ']', this.element));\n\t            return this.inputElement;\n\t        };\n\t        FormValidator.prototype.destroy = function () {\n\t            this.reset();\n\t            this.unwireEvents();\n\t            this.rules = {};\n\t            var elements = ej2_base_1.selectAll('.' + this.errorClass + ', .' + this.validClass, this.element);\n\t            for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n\t                var element = elements_2[_i];\n\t                element.remove();\n\t            }\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        FormValidator.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t        };\n\t        ;\n\t        FormValidator.prototype.getModuleName = function () {\n\t            return 'formValidator';\n\t        };\n\t        FormValidator.prototype.createHTML5Rules = function () {\n\t            var defRules = ['required', 'regex', 'rangeLength', 'maxLength', 'minLength', 'dateIso', 'digits', 'pattern',\n\t                'data-val-required', 'type', 'data-validation', 'min', 'max', 'range', 'equalTo', 'data-val-minlength-min',\n\t                'data-val-equalto-other', 'data-val-maxlength-max', 'data-val-range-min', 'data-val-regex-pattern', 'data-val-length-max',\n\t                'data-val-creditcard', 'data-val-phone'];\n\t            var acceptedTypes = ['email', 'url', 'date', 'number', 'tel'];\n\t            for (var _i = 0, _a = (this.inputElements); _i < _a.length; _i++) {\n\t                var input = _a[_i];\n\t                var allRule = {};\n\t                for (var _b = 0, defRules_1 = defRules; _b < defRules_1.length; _b++) {\n\t                    var rule = defRules_1[_b];\n\t                    if (input.getAttribute(rule) !== null) {\n\t                        switch (rule) {\n\t                            case 'required':\n\t                                this.defRule(input, allRule, rule, input.required);\n\t                                break;\n\t                            case 'data-validation':\n\t                                rule = input.getAttribute(rule);\n\t                                this.defRule(input, allRule, rule, true);\n\t                                break;\n\t                            case 'type':\n\t                                if (acceptedTypes.indexOf(input.type) !== -1) {\n\t                                    this.defRule(input, allRule, input.type, true);\n\t                                }\n\t                                break;\n\t                            case 'rangeLength':\n\t                            case 'range':\n\t                                this.defRule(input, allRule, rule, JSON.parse(input.getAttribute(rule)));\n\t                                break;\n\t                            case 'equalTo':\n\t                                var id = input.getAttribute(rule);\n\t                                this.defRule(input, allRule, rule, id);\n\t                                break;\n\t                            default:\n\t                                if (input.getAttribute('data-val') === 'true') {\n\t                                    this.annotationRule(input, allRule, rule, input.getAttribute(rule));\n\t                                }\n\t                                else {\n\t                                    this.defRule(input, allRule, rule, input.getAttribute(rule));\n\t                                }\n\t                        }\n\t                    }\n\t                }\n\t                if (Object.keys(allRule).length !== 0) {\n\t                    this.addRules(input.name, allRule);\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.annotationRule = function (input, ruleCon, ruleName, value) {\n\t            var annotationRule = ruleName.split('-');\n\t            var rulesList = ['required', 'creditcard', 'phone', 'maxlength', 'minlength', 'range', 'regex', 'equalto'];\n\t            var ruleFirstName = annotationRule[annotationRule.length - 1];\n\t            var ruleSecondName = annotationRule[annotationRule.length - 2];\n\t            if (rulesList.indexOf(ruleFirstName) !== -1) {\n\t                switch (ruleFirstName) {\n\t                    case 'required':\n\t                        this.defRule(input, ruleCon, 'required', value);\n\t                        break;\n\t                    case 'creditcard':\n\t                        this.defRule(input, ruleCon, 'creditcard', value);\n\t                        break;\n\t                    case 'phone':\n\t                        this.defRule(input, ruleCon, 'tel', value);\n\t                        break;\n\t                }\n\t            }\n\t            else if (rulesList.indexOf(ruleSecondName) !== -1) {\n\t                switch (ruleSecondName) {\n\t                    case 'maxlength':\n\t                        this.defRule(input, ruleCon, 'maxLength', value);\n\t                        break;\n\t                    case 'minlength':\n\t                        this.defRule(input, ruleCon, 'minLength', value);\n\t                        break;\n\t                    case 'range':\n\t                        var minvalue = input.getAttribute('data-val-range-min');\n\t                        var maxvalue = input.getAttribute('data-val-range-max');\n\t                        this.defRule(input, ruleCon, 'range', [minvalue, maxvalue]);\n\t                        break;\n\t                    case 'equalto':\n\t                        var id = input.getAttribute(ruleName).split('.');\n\t                        this.defRule(input, ruleCon, 'equalTo', id[id.length - 1]);\n\t                        break;\n\t                    case 'regex':\n\t                        this.defRule(input, ruleCon, 'regex', value);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.defRule = function (input, ruleCon, ruleName, value) {\n\t            var message = input.getAttribute('data-' + ruleName + '-message');\n\t            var annotationMessage = input.getAttribute('data-val-' + ruleName);\n\t            if (message) {\n\t                value = [value, message];\n\t            }\n\t            else if (annotationMessage) {\n\t                value = [value, annotationMessage];\n\t            }\n\t            ruleCon[ruleName] = value;\n\t        };\n\t        FormValidator.prototype.wireEvents = function () {\n\t            for (var _i = 0, _a = (this.inputElements); _i < _a.length; _i++) {\n\t                var input = _a[_i];\n\t                if (FormValidator_1.isCheckable(input)) {\n\t                    ej2_base_2.EventHandler.add(input, 'click', this.clickHandler, this);\n\t                }\n\t                else if (input.tagName === 'SELECT') {\n\t                    ej2_base_2.EventHandler.add(input, 'change', this.changeHandler, this);\n\t                }\n\t                else {\n\t                    ej2_base_2.EventHandler.add(input, 'focusout', this.focusOutHandler, this);\n\t                    ej2_base_2.EventHandler.add(input, 'keyup', this.keyUpHandler, this);\n\t                }\n\t            }\n\t            ej2_base_2.EventHandler.add(this.element, 'submit', this.submitHandler, this);\n\t        };\n\t        FormValidator.prototype.unwireEvents = function () {\n\t            for (var _i = 0, _a = (this.inputElements); _i < _a.length; _i++) {\n\t                var input = _a[_i];\n\t                ej2_base_2.EventHandler.clearEvents(input);\n\t            }\n\t            ej2_base_2.EventHandler.remove(this.element, 'submit', this.submitHandler);\n\t        };\n\t        FormValidator.prototype.focusOutHandler = function (e) {\n\t            this.trigger('focusout', e);\n\t            var element = e.target;\n\t            if (this.rules[element.name]) {\n\t                if (this.rules[element.name][this.required] || element.value.length > 0) {\n\t                    this.validate(element.name);\n\t                }\n\t                else if (this.validated.indexOf(element.name) === -1) {\n\t                    this.validated.push(element.name);\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.keyUpHandler = function (e) {\n\t            this.trigger('keyup', e);\n\t            var element = e.target;\n\t            var excludeKeys = [16, 17, 18, 20, 35, 36, 37, 38, 39, 40, 45, 144, 225];\n\t            if (e.which === 9 && (!this.rules[element.name] || (this.rules[element.name] && !this.rules[element.name][this.required]))) {\n\t                return;\n\t            }\n\t            if (this.validated.indexOf(element.name) !== -1 && this.rules[element.name] && excludeKeys.indexOf(e.which) === -1) {\n\t                this.validate(element.name);\n\t            }\n\t        };\n\t        FormValidator.prototype.clickHandler = function (e) {\n\t            this.trigger('click', e);\n\t            var element = e.target;\n\t            if (element.type !== 'submit') {\n\t                this.validate(element.name);\n\t            }\n\t            else if (element.getAttribute('formnovalidate') !== null) {\n\t                this.allowSubmit = true;\n\t            }\n\t        };\n\t        FormValidator.prototype.changeHandler = function (e) {\n\t            this.trigger('change', e);\n\t            var element = e.target;\n\t            this.validate(element.name);\n\t        };\n\t        FormValidator.prototype.submitHandler = function (e) {\n\t            this.trigger('submit', e);\n\t            if (!this.allowSubmit && !this.validate()) {\n\t                e.preventDefault();\n\t            }\n\t            else {\n\t                this.allowSubmit = false;\n\t            }\n\t        };\n\t        FormValidator.prototype.validateRules = function (name) {\n\t            if (!this.rules[name]) {\n\t                return;\n\t            }\n\t            var rules = Object.keys(this.rules[name]);\n\t            this.getInputElement(name);\n\t            this.getErrorElement(name);\n\t            for (var _i = 0, rules_2 = rules; _i < rules_2.length; _i++) {\n\t                var rule = rules_2[_i];\n\t                var errorMessage = this.getErrorMessage(this.rules[name][rule], rule);\n\t                var errorRule = { name: name, message: errorMessage };\n\t                var eventArgs = {\n\t                    inputName: name,\n\t                    element: this.inputElement,\n\t                    message: errorMessage\n\t                };\n\t                if (!this.isValid(name, rule) && !this.inputElement.classList.contains(this.ignore)) {\n\t                    this.removeErrorRules(name);\n\t                    this.errorRules.push(errorRule);\n\t                    this.inputElement.setAttribute('aria-invalid', 'true');\n\t                    this.inputElement.setAttribute('aria-describedby', this.inputElement.id + '-info');\n\t                    if (!this.infoElement) {\n\t                        this.createErrorElement(name, errorRule.message, this.inputElement);\n\t                    }\n\t                    else {\n\t                        this.showMessage(errorRule);\n\t                    }\n\t                    eventArgs.errorElement = this.infoElement;\n\t                    eventArgs.status = 'failure';\n\t                    this.inputElement.classList.add(this.errorClass);\n\t                    this.inputElement.classList.remove(this.validClass);\n\t                    this.trigger('validationComplete', eventArgs);\n\t                    if (rule === 'required') {\n\t                        this.inputElement.setAttribute('aria-required', 'true');\n\t                    }\n\t                    break;\n\t                }\n\t                else {\n\t                    this.hideMessage(name);\n\t                    eventArgs.status = 'success';\n\t                    this.trigger('validationComplete', eventArgs);\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.isValid = function (name, rule) {\n\t            var params = this.rules[name][rule];\n\t            var param = (params instanceof Array && typeof params[1] === 'string') ? params[0] : params;\n\t            var currentRule = this.rules[name][rule];\n\t            var args = { value: this.inputElement.value, param: param, element: this.inputElement, formElement: this.element };\n\t            this.trigger('validationBegin', args);\n\t            if (currentRule && typeof currentRule[0] === 'function') {\n\t                var fn = currentRule[0];\n\t                return fn.call(this, { element: this.inputElement, value: this.inputElement.value });\n\t            }\n\t            else if (FormValidator_1.isCheckable(this.inputElement)) {\n\t                if (rule !== 'required') {\n\t                    return true;\n\t                }\n\t                return ej2_base_1.selectAll('input[name=' + name + ']:checked', this.element).length > 0;\n\t            }\n\t            else {\n\t                return FormValidator_1.checkValidator[rule](args);\n\t            }\n\t        };\n\t        FormValidator.prototype.getErrorMessage = function (ruleValue, rule) {\n\t            var message = (ruleValue instanceof Array && typeof ruleValue[1] === 'string') ? ruleValue[1] : this.defaultMessages[rule];\n\t            var formats = message.match(/{(\\d)}/g);\n\t            if (!ej2_base_2.isNullOrUndefined(formats)) {\n\t                for (var i = 0; i < formats.length; i++) {\n\t                    var value = ruleValue instanceof Array ? ruleValue[i] : ruleValue;\n\t                    message = message.replace(formats[i], value);\n\t                }\n\t            }\n\t            return message;\n\t        };\n\t        FormValidator.prototype.createErrorElement = function (name, message, input) {\n\t            var errorElement = ej2_base_1.createElement(this.errorElement, {\n\t                className: this.errorClass,\n\t                innerHTML: message,\n\t                attrs: { for: name }\n\t            });\n\t            if (this.errorOption === ErrorOption.Message) {\n\t                errorElement.classList.remove(this.errorClass);\n\t                errorElement.classList.add('e-message');\n\t                errorElement = ej2_base_1.createElement(this.errorContainer, { className: this.errorClass, innerHTML: errorElement.outerHTML });\n\t            }\n\t            errorElement.id = this.inputElement.name + '-info';\n\t            if (this.element.querySelector('[data-valmsg-for=\"' + input.id + '\"]')) {\n\t                this.element.querySelector('[data-valmsg-for=\"' + input.id + '\"]').appendChild(errorElement);\n\t            }\n\t            else if (input.hasAttribute('data-msg-containerid') === true) {\n\t                var containerId = input.getAttribute('data-msg-containerid');\n\t                var divElement = input.parentElement.querySelector('#' + containerId);\n\t                divElement.appendChild(errorElement);\n\t            }\n\t            else if (this.customPlacement != null) {\n\t                this.customPlacement.call(this, this.inputElement, errorElement);\n\t            }\n\t            else {\n\t                this.inputElement.parentNode.insertBefore(errorElement, this.inputElement.nextSibling);\n\t            }\n\t            errorElement.style.display = 'block';\n\t            this.getErrorElement(name);\n\t            this.validated.push(name);\n\t            this.checkRequired(name);\n\t        };\n\t        FormValidator.prototype.getErrorElement = function (name) {\n\t            this.infoElement = ej2_base_1.select(this.errorElement + '.' + this.errorClass, this.inputElement.parentElement);\n\t            if (!this.infoElement) {\n\t                this.infoElement = ej2_base_1.select(this.errorElement + '.' + this.errorClass + '[for=\"' + name + '\"]');\n\t            }\n\t            return this.infoElement;\n\t        };\n\t        FormValidator.prototype.removeErrorRules = function (name) {\n\t            for (var i = 0; i < this.errorRules.length; i++) {\n\t                var rule = this.errorRules[i];\n\t                if (rule.name === name) {\n\t                    this.errorRules.splice(i, 1);\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.showMessage = function (errorRule) {\n\t            this.infoElement.style.display = 'block';\n\t            this.infoElement.innerHTML = errorRule.message;\n\t            this.checkRequired(errorRule.name);\n\t        };\n\t        FormValidator.prototype.hideMessage = function (name) {\n\t            if (this.infoElement) {\n\t                this.infoElement.style.display = 'none';\n\t                this.removeErrorRules(name);\n\t                this.inputElement.classList.add(this.validClass);\n\t                this.inputElement.classList.remove(this.errorClass);\n\t                this.inputElement.setAttribute('aria-invalid', 'false');\n\t            }\n\t        };\n\t        FormValidator.prototype.checkRequired = function (name) {\n\t            if (!this.rules[name][this.required] && !this.inputElement.value.length) {\n\t                this.infoElement.innerHTML = this.inputElement.value;\n\t                this.infoElement.setAttribute('aria-invalid', 'false');\n\t                this.hideMessage(name);\n\t            }\n\t        };\n\t        FormValidator.isCheckable = function (input) {\n\t            var inputType = input.getAttribute('type');\n\t            return inputType && (inputType === 'checkbox' || inputType === 'radio' || inputType === 'submit');\n\t        };\n\t        return FormValidator;\n\t    }(ej2_base_1.Base));\n\t    FormValidator.checkValidator = {\n\t        required: function (option) {\n\t            return option.value.length > 0;\n\t        },\n\t        email: function (option) {\n\t            return VALIDATE_EMAIL.test(option.value);\n\t        },\n\t        url: function (option) {\n\t            return VALIDATE_URL.test(option.value);\n\t        },\n\t        dateIso: function (option) {\n\t            return VALIDATE_DATE_ISO.test(option.value);\n\t        },\n\t        tel: function (option) {\n\t            return VALIDATE_PHONE.test(option.value);\n\t        },\n\t        creditcard: function (option) {\n\t            return VALIDATE_CREDITCARD.test(option.value);\n\t        },\n\t        number: function (option) {\n\t            return !isNaN(Number(option.value)) && option.value.indexOf(' ') === -1;\n\t        },\n\t        digits: function (option) {\n\t            return VALIDATE_DIGITS.test(option.value);\n\t        },\n\t        maxLength: function (option) {\n\t            return option.value.length <= option.param;\n\t        },\n\t        minLength: function (option) {\n\t            return option.value.length >= option.param;\n\t        },\n\t        rangeLength: function (option) {\n\t            var param = option.param;\n\t            return option.value.length >= param[0] && option.value.length <= param[1];\n\t        },\n\t        range: function (option) {\n\t            var param = option.param;\n\t            return !isNaN(Number(option.value)) && Number(option.value) >= param[0] && Number(option.value) <= param[1];\n\t        },\n\t        date: function (option) {\n\t            return !isNaN(new Date(option.value).getTime());\n\t        },\n\t        max: function (option) {\n\t            if (!isNaN(Number(option.value))) {\n\t                return +option.value <= option.param;\n\t            }\n\t            return new Date(option.value).getTime() <= new Date(JSON.parse(JSON.stringify(option.param))).getTime();\n\t        },\n\t        min: function (option) {\n\t            if (!isNaN(Number(option.value))) {\n\t                return +option.value >= option.param;\n\t            }\n\t            return new Date(option.value).getTime() >= new Date(JSON.parse(JSON.stringify(option.param))).getTime();\n\t        },\n\t        regex: function (option) {\n\t            return new RegExp(option.param).test(option.value);\n\t        },\n\t        equalTo: function (option) {\n\t            var compareTo = option.formElement.querySelector('#' + option.param);\n\t            option.param = compareTo.value;\n\t            return option.param === option.value;\n\t        },\n\t    };\n\t    __decorate([\n\t        ej2_base_3.Property('e-hidden')\n\t    ], FormValidator.prototype, \"ignore\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property({})\n\t    ], FormValidator.prototype, \"rules\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('e-error')\n\t    ], FormValidator.prototype, \"errorClass\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('e-valid')\n\t    ], FormValidator.prototype, \"validClass\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('label')\n\t    ], FormValidator.prototype, \"errorElement\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('div')\n\t    ], FormValidator.prototype, \"errorContainer\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property(ErrorOption.Label)\n\t    ], FormValidator.prototype, \"errorOption\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"focusout\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"keyup\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"click\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"change\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"submit\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"validationBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"validationComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"customPlacement\", void 0);\n\t    FormValidator = FormValidator_1 = __decorate([\n\t        ej2_base_3.NotifyPropertyChanges\n\t    ], FormValidator);\n\t    exports.FormValidator = FormValidator;\n\t    var FormValidator_1;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBjMGNjMjllYmRlM2M1YTAwMjFlYiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL251bWVyaWN0ZXh0Ym94L2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9udW1lcmljdGV4dGJveC9udW1lcmljdGV4dGJveC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiIiwid2VicGFjazovLy8uL3NyYy9pbnB1dC9pbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5wdXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zvcm0tdmFsaWRhdG9yL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtLXZhbGlkYXRvci9mb3JtLXZhbGlkYXRvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7aUVDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBLEVBQUM7Ozs7Ozs7QUNQRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBC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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQW9DLGNBQWM7QUFDbEQsaUVBQWdFLGNBQWM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQW9DLGVBQWU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxtREFBbUQ7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXFELHlCQUF5QjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWlDLHdCQUF3QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBd0MsY0FBYztBQUN0RDtBQUNBLGtFQUFpRSxjQUFjO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBb0QsdUJBQXVCLHNCQUFzQixFQUFFO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQWtDLGtCQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxtQ0FBa0Msa0JBQWtCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsZ0JBQWdCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLHVFQUFzRSxnREFBZ0Q7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBaUUsMEJBQTBCO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O0FDaHZCRCxn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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsNEJBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUMiLCJmaWxlIjoiZWoyLWlucHV0cy51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIikpIDogZmFjdG9yeShyb290W1wiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgYzBjYzI5ZWJkZTNjNWEwMDIxZWIiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL251bWVyaWN0ZXh0Ym94L2luZGV4XCIsIFwiLi9pbnB1dC9pbmRleFwiLCBcIi4vZm9ybS12YWxpZGF0b3IvaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yLCBpbmRleF8zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbiAgICBfX2V4cG9ydChpbmRleF8zKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9udW1lcmljdGV4dGJveFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG51bWVyaWN0ZXh0Ym94XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KG51bWVyaWN0ZXh0Ym94XzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9udW1lcmljdGV4dGJveC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9pbnB1dC9pbnB1dFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGlucHV0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJPT1QgPSAnZS1udW1lcmljJztcbiAgICB2YXIgU1BJTklDT04gPSAnZS1pbnB1dC1ncm91cC1pY29uJztcbiAgICB2YXIgU1BJTlVQID0gJ2Utc3Bpbi11cCc7XG4gICAgdmFyIFNQSU5ET1dOID0gJ2Utc3Bpbi1kb3duJztcbiAgICB2YXIgRVJST1IgPSAnZS1lcnJvcic7XG4gICAgdmFyIElOQ1JFTUVOVCA9ICdpbmNyZW1lbnQnO1xuICAgIHZhciBERUNSRU1FTlQgPSAnZGVjcmVtZW50JztcbiAgICB2YXIgSU5UUkVHRVhQID0gbmV3IFJlZ0V4cCgnL14oLSk/KFxcZCopJC8nKTtcbiAgICB2YXIgREVDSU1BTFNFUEFSQVRPUiA9ICcuJztcbiAgICB2YXIgTnVtZXJpY1RleHRCb3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoTnVtZXJpY1RleHRCb3gsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIE51bWVyaWNUZXh0Qm94KG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5pc1ByZXZGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5kZWNpbWFsU2VwYXJhdG9yID0gJy4nO1xuICAgICAgICAgICAgX3RoaXMuaW50UmVnRXhwID0gbmV3IFJlZ0V4cCgnL14oLSk/KFxcZCopJC8nKTtcbiAgICAgICAgICAgIF90aGlzLmlzQ2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlakluc3RhbmNlID0gZWoyX2Jhc2VfNC5nZXRWYWx1ZSgnZWoyX2luc3RhbmNlcycsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmNsb25lRWxlbWVudCA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmFuZ3VsYXJUYWdOYW1lID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudGFnTmFtZSA9PT0gJ0VKLU5VTUVSSUNURVhUQk9YJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5ndWxhclRhZ05hbWUgPSB0aGlzLmVsZW1lbnQudGFnTmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKGluZGV4OyBpbmRleCA8IHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUodGhpcy5lbGVtZW50LmF0dHJpYnV0ZXNbaW5kZXhdLm5vZGVOYW1lLCB0aGlzLmVsZW1lbnQuYXR0cmlidXRlc1tpbmRleF0ubm9kZVZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuaW5uZXJIVE1MID0gdGhpcy5lbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRWYWx1ZSgnZWoyX2luc3RhbmNlcycsIGVqSW5zdGFuY2UsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdyb2xlJzogJ3NwaW5idXR0b24nLCAndGFiaW5kZXgnOiAnMCcsICdhdXRvY29tcGxldGUnOiAnb2ZmJywgJ2FyaWEtbGl2ZSc6ICdhc3NlcnRpdmUnIH0pO1xuICAgICAgICAgICAgdmFyIGxvY2FsZVRleHQgPSB7IGluY3JlbWVudFRpdGxlOiAnSW5jcmVtZW50IHZhbHVlJywgZGVjcmVtZW50VGl0bGU6ICdEZWNyZW1lbnQgdmFsdWUnLCBwbGFjZWhvbGRlcjogJycgfTtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IG5ldyBlajJfYmFzZV8xLkwxMG4oJ251bWVyaWN0ZXh0Ym94JywgbG9jYWxlVGV4dCwgdGhpcy5sb2NhbGUpO1xuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFN0eWxlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXROYW1lID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY3VsdHVyZUluZm8gPSB7fTtcbiAgICAgICAgICAgIHRoaXMuaW5pdEN1bHR1cmVJbmZvKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRDdWx0dXJlRnVuYygpO1xuICAgICAgICAgICAgdGhpcy5jaGVja0F0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIHRoaXMucHJldlZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVNaW5NYXgoKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVTdGVwKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGxhY2Vob2xkZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVXcmFwcGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1NwaW5CdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGluQnRuQ3JlYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMud2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5jb250YWluZXIsIHsgJ3dpZHRoJzogZWoyX2Jhc2VfNC5mb3JtYXRVbml0KHRoaXMud2lkdGgpIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBudWxsICYmICFpc05hTih0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWNpbWFscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgdmFsdWU6IHRoaXMucm91bmROdW1iZXIodGhpcy52YWx1ZSwgdGhpcy5kZWNpbWFscykgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5jaGVja0F0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9IFsndmFsdWUnLCAnbWluJywgJ21heCcsICdzdGVwJywgJ2Rpc2FibGVkJywgJ3JlYWRvbmx5JywgJ3N0eWxlJywgJ25hbWUnXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgYXR0cmlidXRlc18xID0gYXR0cmlidXRlczsgX2kgPCBhdHRyaWJ1dGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBhdHRyaWJ1dGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApKSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Rpc2FibGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5hYmxlZCA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUocHJvcCkgPT09ICdkaXNhYmxlZCcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShwcm9wKSA9PT0gJ3RydWUnID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IGVuYWJsZWQ6IGVuYWJsZWQgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZWFkb25seSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRvbmx5ID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShwcm9wKSA9PT0gJ3JlYWRvbmx5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgcmVhZG9ubHk6IHJlYWRvbmx5IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3R5bGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRTdHlsZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUocHJvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0TmFtZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUocHJvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuaW5zdGFuY2UuZ2V0TnVtYmVyUGFyc2VyKHsgZm9ybWF0OiAnbicgfSkodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShwcm9wKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAhPT0gbnVsbCAmJiAhaXNOYU4odmFsdWUpKSB8fCAocHJvcCA9PT0gJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKGVqMl9iYXNlXzQuc2V0VmFsdWUocHJvcCwgdmFsdWUsIHt9KSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUudXBkYXRlUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBwbGFjZWhvbGRlcjogdGhpcy5sMTBuLmdldENvbnN0YW50KCdwbGFjZWhvbGRlcicpIH0sIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuaW5pdEN1bHR1cmVGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBlajJfYmFzZV81LkludGVybmF0aW9uYWxpemF0aW9uKHRoaXMubG9jYWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmluaXRDdWx0dXJlSW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VsdHVyZUluZm8uZm9ybWF0ID0gdGhpcy5mb3JtYXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5nZXRWYWx1ZSgnY3VycmVuY3knLCB0aGlzKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0VmFsdWUoJ2N1cnJlbmN5JywgdGhpcy5jdXJyZW5jeSwgdGhpcy5jdWx0dXJlSW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5jcmVhdGVXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0T2JqID0gaW5wdXRfMS5JbnB1dC5jcmVhdGVJbnB1dCh7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIGN1c3RvbVRhZzogdGhpcy5hbmd1bGFyVGFnTmFtZSxcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsVHlwZTogdGhpcy5mbG9hdExhYmVsVHlwZSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRvbmx5OiB0aGlzLnJlYWRvbmx5LFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5wbGFjZWhvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6IHRoaXMuY3NzQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRoaXMuZW5hYmxlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBpbnB1dE9iai5jb250YWluZXI7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFkZENsYXNzKFt0aGlzLmNvbnRhaW5lcl0sIFJPT1QpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLXJlYWRvbmx5JzogJ3RydWUnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5oaWRkZW5JbnB1dCA9IChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBhdHRyczogeyB0eXBlOiAnaGlkZGVuJyB9IH0pKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXROYW1lID0gdGhpcy5pbnB1dE5hbWUgIT09IG51bGwgPyB0aGlzLmlucHV0TmFtZSA6IHRoaXMuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0aGlzLmhpZGRlbklucHV0LCB7ICduYW1lJzogdGhpcy5pbnB1dE5hbWUgfSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGhpcy5oaWRkZW5JbnB1dCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0U3R5bGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5jb250YWluZXIsIHsgJ3N0eWxlJzogdGhpcy5pbnB1dFN0eWxlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuc3BpbkJ0bkNyZWF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zcGluRG93biA9IGlucHV0XzEuSW5wdXQuYXBwZW5kU3BhbihTUElOSUNPTiArICcgJyArIFNQSU5ET1dOLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5zcGluRG93biwge1xuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnZGVjcmVtZW50VGl0bGUnKSxcbiAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnZGVjcmVtZW50VGl0bGUnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNwaW5VcCA9IGlucHV0XzEuSW5wdXQuYXBwZW5kU3BhbihTUElOSUNPTiArICcgJyArIFNQSU5VUCwgdGhpcy5jb250YWluZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuc3BpblVwLCB7XG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGhpcy5sMTBuLmdldENvbnN0YW50KCdpbmNyZW1lbnRUaXRsZScpLFxuICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5sMTBuLmdldENvbnN0YW50KCdpbmNyZW1lbnRUaXRsZScpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2lyZVNwaW5CdG5FdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnZhbGlkYXRlTWluTWF4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCEodHlwZW9mICh0aGlzLm1pbikgPT09ICdudW1iZXInICYmICFpc05hTih0aGlzLm1pbikpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgbWluOiAtKE51bWJlci5NQVhfVkFMVUUpIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEodHlwZW9mICh0aGlzLm1heCkgPT09ICdudW1iZXInICYmICFpc05hTih0aGlzLm1heCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgbWF4OiBOdW1iZXIuTUFYX1ZBTFVFIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGVjaW1hbHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5taW4gIT09IC0oTnVtYmVyLk1BWF9WQUxVRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgbWluOiB0aGlzLmluc3RhbmNlLmdldE51bWJlclBhcnNlcih7IGZvcm1hdDogJ24nIH0pKHRoaXMuZm9ybWF0dGVkVmFsdWUodGhpcy5kZWNpbWFscywgdGhpcy5taW4pKSB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4ICE9PSAoTnVtYmVyLk1BWF9WQUxVRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgbWF4OiB0aGlzLmluc3RhbmNlLmdldE51bWJlclBhcnNlcih7IGZvcm1hdDogJ24nIH0pKHRoaXMuZm9ybWF0dGVkVmFsdWUodGhpcy5kZWNpbWFscywgdGhpcy5tYXgpKSB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBtaW46IHRoaXMubWluID4gdGhpcy5tYXggPyB0aGlzLm1heCA6IHRoaXMubWluIH0sIHRydWUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyAnYXJpYS12YWx1ZW1pbic6IHRoaXMubWluLnRvU3RyaW5nKCksICdhcmlhLXZhbHVlbWF4JzogdGhpcy5tYXgudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmZvcm1hdHRlZFZhbHVlID0gZnVuY3Rpb24gKGRlY2ltYWxzLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UuZ2V0TnVtYmVyRm9ybWF0KHtcbiAgICAgICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IGRlY2ltYWxzLFxuICAgICAgICAgICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogZGVjaW1hbHMsIHVzZUdyb3VwaW5nOiBmYWxzZVxuICAgICAgICAgICAgfSkodmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUudmFsaWRhdGVTdGVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVjaW1hbHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBzdGVwOiB0aGlzLmluc3RhbmNlLmdldE51bWJlclBhcnNlcih7IGZvcm1hdDogJ24nIH0pKHRoaXMuZm9ybWF0dGVkVmFsdWUodGhpcy5kZWNpbWFscywgdGhpcy5zdGVwKSkgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5hY3Rpb24gPSBmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmlzRm9jdXNlZCA/IHRoaXMuaW5zdGFuY2UuZ2V0TnVtYmVyUGFyc2VyKHsgZm9ybWF0OiAnbicgfSkodGhpcy5lbGVtZW50LnZhbHVlKSA6IHRoaXMudmFsdWU7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVZhbHVlKHRoaXMucGVyZm9ybUFjdGlvbih2YWx1ZSwgdGhpcy5zdGVwLCBvcGVyYXRpb24pKTtcbiAgICAgICAgICAgIHRoaXMucmFpc2VDaGFuZ2VFdmVudCgpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuY2hlY2tFcnJvckNsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmVDbGFzcyhbdGhpcy5jb250YWluZXJdLCBFUlJPUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmFkZENsYXNzKFt0aGlzLmNvbnRhaW5lcl0sIEVSUk9SKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtaW52YWxpZCc6IHRoaXMuaXNWYWxpZFN0YXRlID8gJ2ZhbHNlJyA6ICd0cnVlJyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXMnLCB0aGlzLmZvY3VzSW4sIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2JsdXInLCB0aGlzLmZvY3VzT3V0LCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgdGhpcy5rZXlEb3duSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAna2V5cHJlc3MnLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnY2hhbmdlJywgdGhpcy5jaGFuZ2VIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdwYXN0ZScsIHRoaXMucGFzdGVIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLndpcmVTcGluQnRuRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuc3BpblVwLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLm1vdXNlRG93bk9uU3Bpbm5lciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zcGluRG93biwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5tb3VzZURvd25PblNwaW5uZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuc3BpblVwLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5tb3VzZVVwT25TcGlubmVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNwaW5Eb3duLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5tb3VzZVVwT25TcGlubmVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNwaW5VcCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnRvdWNoTW92ZU9uU3Bpbm5lciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zcGluRG93biwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnRvdWNoTW92ZU9uU3Bpbm5lciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnZm9jdXMnLCB0aGlzLmZvY3VzSW4pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2JsdXInLCB0aGlzLmZvY3VzT3V0KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgdGhpcy5rZXlEb3duSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAna2V5cHJlc3MnLCB0aGlzLmtleVByZXNzSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnY2hhbmdlJywgdGhpcy5jaGFuZ2VIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdwYXN0ZScsIHRoaXMucGFzdGVIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnVud2lyZVNwaW5CdG5FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5zcGluVXAsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMubW91c2VEb3duT25TcGlubmVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNwaW5Eb3duLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLm1vdXNlRG93bk9uU3Bpbm5lcik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5zcGluVXAsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLm1vdXNlVXBPblNwaW5uZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc3BpbkRvd24sIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLm1vdXNlVXBPblNwaW5uZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc3BpblVwLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMudG91Y2hNb3ZlT25TcGlubmVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNwaW5Eb3duLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMudG91Y2hNb3ZlT25TcGlubmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmNoYW5nZUhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50LnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHZhbHVlOiBudWxsIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcnNlZElucHV0ID0gdGhpcy5pbnN0YW5jZS5nZXROdW1iZXJQYXJzZXIoeyBmb3JtYXQ6ICduJyB9KSh0aGlzLmVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShwYXJzZWRJbnB1dCwgZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUucmFpc2VDaGFuZ2VFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldlZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRXZlbnRBcmdzID0geyB2YWx1ZTogdGhpcy52YWx1ZSwgcHJldmlvdXNWYWx1ZTogdGhpcy5wcmV2VmFsdWUgfTtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VFdmVudEFyZ3MuZXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5tZXJnZShldmVudEFyZ3MsIHRoaXMuY2hhbmdlRXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCBldmVudEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUucGFzdGVIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBiZWZvcmVVcGRhdGUgPSB0aGlzLmVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLm51bWVyaWNSZWdleCgpLnRlc3QoX3RoaXMuZWxlbWVudC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0RWxlbWVudFZhbHVlKGJlZm9yZVVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5rZXlEb3duSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24oSU5DUkVNRU5UKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24oREVDUkVNRU5UKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyB2YWx1ZTogbnVsbCB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMuaW5zdGFuY2UuZ2V0TnVtYmVyUGFyc2VyKHsgZm9ybWF0OiAnbicgfSkodGhpcy5lbGVtZW50LnZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnBlcmZvcm1BY3Rpb24gPSBmdW5jdGlvbiAodmFsdWUsIHN0ZXAsIG9wZXJhdGlvbikge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1cGRhdGVkVmFsdWUgPSBvcGVyYXRpb24gPT09IElOQ1JFTUVOVCA/IHZhbHVlICsgc3RlcCA6IHZhbHVlIC0gc3RlcDtcbiAgICAgICAgICAgIHVwZGF0ZWRWYWx1ZSA9IHRoaXMuY29ycmVjdFJvdW5kaW5nKHZhbHVlLCBzdGVwLCB1cGRhdGVkVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaWN0TW9kZSA/IHRoaXMudHJpbVZhbHVlKHVwZGF0ZWRWYWx1ZSkgOiB1cGRhdGVkVmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmNvcnJlY3RSb3VuZGluZyA9IGZ1bmN0aW9uICh2YWx1ZSwgc3RlcCwgcmVzdWx0KSB7XG4gICAgICAgICAgICB2YXIgZmxvYXRFeHAgPSBuZXcgUmVnRXhwKCdbLC5dKC4qKScpO1xuICAgICAgICAgICAgdmFyIHZhbHVlVGV4dCA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB2YXIgc3RlcFRleHQgPSBzdGVwLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB2YXIgZmxvYXRWYWx1ZSA9IGZsb2F0RXhwLnRlc3QodmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB2YXIgZmxvYXRTdGVwID0gZmxvYXRFeHAudGVzdChzdGVwLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgaWYgKGZsb2F0VmFsdWUgfHwgZmxvYXRTdGVwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlQ291bnQgPSBmbG9hdFZhbHVlID8gZmxvYXRFeHAuZXhlYyh2YWx1ZS50b1N0cmluZygpKVswXS5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICAgIHZhciBzdGVwQ291bnQgPSBmbG9hdFN0ZXAgPyBmbG9hdEV4cC5leGVjKHN0ZXAudG9TdHJpbmcoKSlbMF0ubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICB2YXIgbWF4ID0gTWF0aC5tYXgodmFsdWVDb3VudCwgc3RlcENvdW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPSB0aGlzLnJvdW5kVmFsdWUocmVzdWx0LCBtYXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUucm91bmRWYWx1ZSA9IGZ1bmN0aW9uIChyZXN1bHQsIHByZWNpc2lvbikge1xuICAgICAgICAgICAgcHJlY2lzaW9uID0gcHJlY2lzaW9uIHx8IDA7XG4gICAgICAgICAgICB2YXIgZGl2aWRlID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0ICo9IGRpdmlkZSwgcmVzdWx0ID0gTWF0aC5yb3VuZChyZXN1bHQpIC8gZGl2aWRlO1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS51cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiAhaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVjaW1hbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnJvdW5kTnVtYmVyKHZhbHVlLCB0aGlzLmRlY2ltYWxzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVZhbHVlKHZhbHVlID09PSBudWxsIHx8IGlzTmFOKHZhbHVlKSA/IG51bGwgOiB0aGlzLnN0cmljdE1vZGUgPyB0aGlzLnRyaW1WYWx1ZSh2YWx1ZSkgOiB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnJhaXNlQ2hhbmdlRXZlbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuY2hhbmdlVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghKHZhbHVlIHx8IHZhbHVlID09PSAwKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyB2YWx1ZTogdmFsdWUgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyT2ZEZWNpbWFscyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgZGVjaW1hbFBhcnQgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZEZWNpbWFscyA9ICFkZWNpbWFsUGFydCB8fCAhZGVjaW1hbFBhcnQubGVuZ3RoID8gMCA6IGRlY2ltYWxQYXJ0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWNpbWFscyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBudW1iZXJPZkRlY2ltYWxzID0gbnVtYmVyT2ZEZWNpbWFscyA8IHRoaXMuZGVjaW1hbHMgPyBudW1iZXJPZkRlY2ltYWxzIDogdGhpcy5kZWNpbWFscztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgdmFsdWU6IHRoaXMucm91bmROdW1iZXIodmFsdWUsIG51bWJlck9mRGVjaW1hbHMpIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tb2RpZnlUZXh0KCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyaWN0TW9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVTdGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5tb2RpZnlUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgfHwgdGhpcy52YWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZm9ybWF0TnVtYmVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRWYWx1ZSA9IHRoaXMuaXNGb2N1c2VkID8gdmFsdWUgOiB0aGlzLmluc3RhbmNlLmdldE51bWJlckZvcm1hdCh0aGlzLmN1bHR1cmVJbmZvKSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVsZW1lbnRWYWx1ZShlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtdmFsdWVub3cnOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbklucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVsZW1lbnRWYWx1ZSgnJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuSW5wdXQudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5zZXRFbGVtZW50VmFsdWUgPSBmdW5jdGlvbiAodmFsLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldFZhbHVlKHZhbCwgKGVsZW1lbnQgPyBlbGVtZW50IDogdGhpcy5lbGVtZW50KSwgdGhpcy5mbG9hdExhYmVsVHlwZSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS52YWxpZGF0ZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgfHwgdGhpcy52YWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNWYWxpZFN0YXRlID0gISh0aGlzLnZhbHVlID4gdGhpcy5tYXggfHwgdGhpcy52YWx1ZSA8IHRoaXMubWluKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hlY2tFcnJvckNsYXNzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5mb3JtYXROdW1iZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbnVtYmVyT2ZEZWNpbWFscztcbiAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdmFyIGRlY2ltYWxQYXJ0ID0gY3VycmVudFZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgIG51bWJlck9mRGVjaW1hbHMgPSAhZGVjaW1hbFBhcnQgfHwgIWRlY2ltYWxQYXJ0Lmxlbmd0aCA/IDAgOiBkZWNpbWFsUGFydC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWNpbWFscyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG51bWJlck9mRGVjaW1hbHMgPSBudW1iZXJPZkRlY2ltYWxzIDwgdGhpcy5kZWNpbWFscyA/IG51bWJlck9mRGVjaW1hbHMgOiB0aGlzLmRlY2ltYWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UuZ2V0TnVtYmVyRm9ybWF0KHtcbiAgICAgICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IG51bWJlck9mRGVjaW1hbHMsXG4gICAgICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiBudW1iZXJPZkRlY2ltYWxzLCB1c2VHcm91cGluZzogZmFsc2VcbiAgICAgICAgICAgIH0pKHRoaXMudmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS50cmltVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA+IHRoaXMubWF4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgdGhpcy5taW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5taW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnJvdW5kTnVtYmVyID0gZnVuY3Rpb24gKHZhbHVlLCBwcmVjaXNpb24pIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBkZWNpbWFscyA9IHByZWNpc2lvbiB8fCAwO1xuICAgICAgICAgICAgdmFyIHJlc3VsdDEgPSByZXN1bHQudG9TdHJpbmcoKS5zcGxpdCgnZScpO1xuICAgICAgICAgICAgcmVzdWx0ID0gTWF0aC5yb3VuZChOdW1iZXIocmVzdWx0MVswXSArICdlJyArIChyZXN1bHQxWzFdID8gKE51bWJlcihyZXN1bHQxWzFdKSArIGRlY2ltYWxzKSA6IGRlY2ltYWxzKSkpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdDIgPSByZXN1bHQudG9TdHJpbmcoKS5zcGxpdCgnZScpO1xuICAgICAgICAgICAgcmVzdWx0ID0gTnVtYmVyKHJlc3VsdDJbMF0gKyAnZScgKyAocmVzdWx0MlsxXSA/IChOdW1iZXIocmVzdWx0MlsxXSkgLSBkZWNpbWFscykgOiAtZGVjaW1hbHMpKTtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIocmVzdWx0LnRvRml4ZWQoZGVjaW1hbHMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuY2FuY2VsRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMCB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQua2V5Q29kZSA9PT0gOCB8fCBldmVudC5rZXlDb2RlID09PSAxMykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGN1cnJlbnRDaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShldmVudC53aGljaCk7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZygwLCB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQpICsgY3VycmVudENoYXIgKyB0ZXh0LnN1YnN0cmluZyh0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5udW1lcmljUmVnZXgoKS50ZXN0KHRleHQpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUubnVtZXJpY1JlZ2V4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG51bWVyaWNPYmplY3QgPSBlajJfYmFzZV81LmdldE51bWVyaWNPYmplY3QodGhpcy5sb2NhbGUpO1xuICAgICAgICAgICAgdmFyIGRlY2ltYWxTZXBhcmF0b3IgPSBlajJfYmFzZV80LmdldFZhbHVlKCdkZWNpbWFsJywgbnVtZXJpY09iamVjdCk7XG4gICAgICAgICAgICB2YXIgZnJhY3Rpb25SdWxlID0gJyonO1xuICAgICAgICAgICAgaWYgKGRlY2ltYWxTZXBhcmF0b3IgPT09IERFQ0lNQUxTRVBBUkFUT1IpIHtcbiAgICAgICAgICAgICAgICBkZWNpbWFsU2VwYXJhdG9yID0gJ1xcXFwnICsgZGVjaW1hbFNlcGFyYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRlY2ltYWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVFJFR0VYUDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRlY2ltYWxzICYmIHRoaXMudmFsaWRhdGVEZWNpbWFsT25UeXBlKSB7XG4gICAgICAgICAgICAgICAgZnJhY3Rpb25SdWxlID0gJ3swLCcgKyB0aGlzLmRlY2ltYWxzICsgJ30nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14oLSk/KCgoXFxcXGQrKCcgKyBkZWNpbWFsU2VwYXJhdG9yICsgJ1xcXFxkJyArIGZyYWN0aW9uUnVsZSArXG4gICAgICAgICAgICAgICAgJyk/KXwoJyArIGRlY2ltYWxTZXBhcmF0b3IgKyAnXFxcXGQnICsgZnJhY3Rpb25SdWxlICsgJykpKT8kJyk7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLm1vdXNlV2hlZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgZGVsdGE7XG4gICAgICAgICAgICB2YXIgcmF3RXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgIGlmIChyYXdFdmVudC53aGVlbERlbHRhKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgPSByYXdFdmVudC53aGVlbERlbHRhIC8gMTIwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmF3RXZlbnQuZGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgPSAtcmF3RXZlbnQuZGV0YWlsIC8gMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWx0YSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbihJTkNSRU1FTlQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGVsdGEgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24oREVDUkVNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2FuY2VsRXZlbnQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuZm9jdXNJbiA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQgfHwgdGhpcy5yZWFkb25seSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlQ2xhc3MoW3RoaXMuY29udGFpbmVyXSwgRVJST1IpO1xuICAgICAgICAgICAgdGhpcy5wcmV2VmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCh0aGlzLnZhbHVlIHx8IHRoaXMudmFsdWUgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvcm1hdFZhbHVlID0gdGhpcy5mb3JtYXROdW1iZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVsZW1lbnRWYWx1ZShmb3JtYXRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJldkZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKDAsIGZvcm1hdFZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnbW91c2V3aGVlbCBET01Nb3VzZVNjcm9sbCcsIHRoaXMubW91c2VXaGVlbCwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmZvY3VzT3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmV2Rm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVfMSA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcmV2Rm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlXzEgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0RWxlbWVudFZhbHVlKHZhbHVlXzEsIGVsZV8xKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50LnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyB2YWx1ZTogbnVsbCB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlZElucHV0ID0gdGhpcy5pbnN0YW5jZS5nZXROdW1iZXJQYXJzZXIoeyBmb3JtYXQ6ICduJyB9KSh0aGlzLmVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUocGFyc2VkSW5wdXQpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsJywgdGhpcy5tb3VzZVdoZWVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLm1vdXNlRG93bk9uU3Bpbm5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQcmV2Rm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5nZXRFbGVtZW50RGF0YShldmVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5nZXRFbGVtZW50RGF0YShldmVudCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhTUElOVVApKSA/IElOQ1JFTUVOVCA6IERFQ1JFTUVOVDtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0YXJnZXQsICdtb3VzZWxlYXZlJywgdGhpcy5tb3VzZVVwQ2xpY2ssIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy50aW1lT3V0ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5pc0NhbGxlZCA9IHRydWU7IF90aGlzLmFjdGlvbihhY3Rpb24pOyB9LCAxNTApO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCAnbW91c2V1cCcsIHRoaXMubW91c2VVcENsaWNrLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnRvdWNoTW92ZU9uU3Bpbm5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG4gICAgICAgICAgICBpZiAoISh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFNQSU5JQ09OKSkpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZU91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5tb3VzZVVwT25TcGlubmVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByZXZGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1ByZXZGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmdldEVsZW1lbnREYXRhKGV2ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9ICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFNQSU5VUCkpID8gSU5DUkVNRU5UIDogREVDUkVNRU5UO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRhcmdldCwgJ21vdXNlbGVhdmUnLCB0aGlzLm1vdXNlVXBDbGljayk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDYWxsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbihhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0NhbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCAnbW91c2V1cCcsIHRoaXMubW91c2VVcENsaWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmdldEVsZW1lbnREYXRhID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoKGV2ZW50LndoaWNoICYmIGV2ZW50LndoaWNoID09PSAzKSB8fCAoZXZlbnQuYnV0dG9uICYmIGV2ZW50LmJ1dHRvbiA9PT0gMilcbiAgICAgICAgICAgICAgICB8fCAhdGhpcy5lbmFibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZU91dCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLm1vdXNlVXBDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZU91dCk7XG4gICAgICAgICAgICB0aGlzLmlzQ2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5zcGluVXAsICdtb3VzZWxlYXZlJywgdGhpcy5tb3VzZVVwQ2xpY2spO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc3BpbkRvd24sICdtb3VzZWxlYXZlJywgdGhpcy5tb3VzZVVwQ2xpY2spO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuaW5jcmVtZW50ID0gZnVuY3Rpb24gKHN0ZXApIHtcbiAgICAgICAgICAgIGlmIChzdGVwID09PSB2b2lkIDApIHsgc3RlcCA9IHRoaXMuc3RlcDsgfVxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VWYWx1ZSh0aGlzLnBlcmZvcm1BY3Rpb24odGhpcy52YWx1ZSwgc3RlcCwgSU5DUkVNRU5UKSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5kZWNyZW1lbnQgPSBmdW5jdGlvbiAoc3RlcCkge1xuICAgICAgICAgICAgaWYgKHN0ZXAgPT09IHZvaWQgMCkgeyBzdGVwID0gdGhpcy5zdGVwOyB9XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVZhbHVlKHRoaXMucGVyZm9ybUFjdGlvbih0aGlzLnZhbHVlLCBzdGVwLCBERUNSRU1FTlQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5kZXRhY2godGhpcy5oaWRkZW5JbnB1dCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93U3BpbkJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHRoaXMudW53aXJlU3BpbkJ0bkV2ZW50cygpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuZGV0YWNoKHRoaXMuc3BpblVwKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmRldGFjaCh0aGlzLnNwaW5Eb3duKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jbG9uZUVsZW1lbnQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5kZXRhY2godGhpcy5jb250YWluZXIpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleUVudGl0eSA9IFsndmFsdWUnXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChrZXlFbnRpdHkpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRWYWw7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5jb250YWluZXIsIHsgJ3dpZHRoJzogZWoyX2Jhc2VfNC5mb3JtYXRVbml0KG5ld1Byb3Aud2lkdGgpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzc0NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0XzEuSW5wdXQuc2V0Q3NzQ2xhc3MobmV3UHJvcC5jc3NDbGFzcywgW3RoaXMuY29udGFpbmVyXSwgb2xkUHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldEVuYWJsZWQobmV3UHJvcC5lbmFibGVkLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldEVuYWJsZVJ0bChuZXdQcm9wLmVuYWJsZVJ0bCwgW3RoaXMuY29udGFpbmVyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVhZG9ubHknOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfMS5JbnB1dC5zZXRSZWFkb25seShuZXdQcm9wLnJlYWRvbmx5LCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLXJlYWRvbmx5JzogJ3RydWUnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1yZWFkb25seScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BsYWNlaG9sZGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0XzEuSW5wdXQuc2V0UGxhY2Vob2xkZXIobmV3UHJvcC5wbGFjZWhvbGRlciwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdGVwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcCA9IG5ld1Byb3Auc3RlcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVTdGVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd1NwaW5CdXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Byb3Auc2hvd1NwaW5CdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwaW5CdG5DcmVhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5kZXRhY2godGhpcy5zcGluVXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuZGV0YWNoKHRoaXMuc3BpbkRvd24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUobmV3UHJvcC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0VmFsdWUocHJvcCwgZWoyX2Jhc2VfNC5nZXRWYWx1ZShwcm9wLCBuZXdQcm9wKSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlTWluTWF4KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmljdE1vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpY3RNb2RlID0gbmV3UHJvcC5zdHJpY3RNb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVTdGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xvY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRDdWx0dXJlRnVuYygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sMTBuLnNldExvY2FsZSh0aGlzLmxvY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBsYWNlaG9sZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldFBsYWNlaG9sZGVyKHRoaXMucGxhY2Vob2xkZXIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2N1cnJlbmN5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0VmFsdWUocHJvcCwgZWoyX2Jhc2VfNC5nZXRWYWx1ZShwcm9wLCBuZXdQcm9wKSwgdGhpcy5jdWx0dXJlSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFZhbHVlKHByb3AsIGVqMl9iYXNlXzQuZ2V0VmFsdWUocHJvcCwgbmV3UHJvcCksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Q3VsdHVyZUluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVjaW1hbHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNpbWFscyA9IG5ld1Byb3AuZGVjaW1hbHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ251bWVyaWN0ZXh0Ym94JztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE51bWVyaWNUZXh0Qm94O1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KC0oTnVtYmVyLk1BWF9WQUxVRSkpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KE51bWJlci5NQVhfVkFMVUUpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcInN0ZXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUsIFwic2hvd1NwaW5CdXR0b25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUsIFwicmVhZG9ubHlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJlbmFibGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImVuYWJsZVJ0bFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJlbmFibGVQZXJzaXN0ZW5jZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCduMicpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImZvcm1hdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImRlY2ltYWxzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUsIFwiY3VycmVuY3lcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJzdHJpY3RNb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcInZhbGlkYXRlRGVjaW1hbE9uVHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdOZXZlcicpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImZsb2F0TGFiZWxUeXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImNoYW5nZVwiLCB2b2lkIDApO1xuICAgIE51bWVyaWNUZXh0Qm94ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgTnVtZXJpY1RleHRCb3gpO1xuICAgIGV4cG9ydHMuTnVtZXJpY1RleHRCb3ggPSBOdW1lcmljVGV4dEJveDtcbiAgICBleHBvcnRzLm51bWVyaWN0ZXh0Ym94SGVscGVyID0gZWoyX2Jhc2VfMS5DcmVhdGVCdWlsZGVyKE51bWVyaWNUZXh0Qm94KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbnVtZXJpY3RleHRib3gvbnVtZXJpY3RleHRib3guanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDTEFTU05BTUVTID0ge1xuICAgICAgICBSVEw6ICdlLXJ0bCcsXG4gICAgICAgIERJU0FCTEU6ICdlLWRpc2FibGVkJyxcbiAgICAgICAgSU5QVVQ6ICdlLWlucHV0JyxcbiAgICAgICAgSU5QVVRHUk9VUDogJ2UtaW5wdXQtZ3JvdXAnLFxuICAgICAgICBGTE9BVElOUFVUOiAnZS1mbG9hdC1pbnB1dCcsXG4gICAgICAgIEZMT0FUTElORTogJ2UtZmxvYXQtbGluZScsXG4gICAgICAgIEZMT0FUVEVYVDogJ2UtZmxvYXQtdGV4dCcsXG4gICAgICAgIENMRUFSSUNPTjogJ2UtY2xlYXItaWNvbicsXG4gICAgICAgIENMRUFSSUNPTkhJREU6ICdlLWNsZWFyLWljb24taGlkZScsXG4gICAgICAgIExBQkVMVE9QOiAnZS1sYWJlbC10b3AnLFxuICAgICAgICBMQUJFTEJPVFRPTTogJ2UtbGFiZWwtYm90dG9tJyxcbiAgICAgICAgTk9GTE9BVExBQkVMOiAnZS1uby1mbG9hdC1sYWJlbCcsXG4gICAgICAgIElOUFVUQ1VTVE9NVEFHOiAnZS1pbnB1dC1jdXN0b20tdGFnJyxcbiAgICAgICAgRkxPQVRDVVNUT01UQUc6ICdlLWZsb2F0LWN1c3RvbS10YWcnXG4gICAgfTtcbiAgICB2YXIgSW5wdXQ7XG4gICAgKGZ1bmN0aW9uIChJbnB1dCkge1xuICAgICAgICB2YXIgcHJpdmF0ZUlucHV0T2JqID0ge1xuICAgICAgICAgICAgY29udGFpbmVyOiBudWxsLFxuICAgICAgICAgICAgYnV0dG9uczogW10sXG4gICAgICAgICAgICBjbGVhckJ1dHRvbjogbnVsbFxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVJbnB1dChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRPYmplY3QgPSB7IGNvbnRhaW5lcjogbnVsbCwgYnV0dG9uczogW10sIGNsZWFyQnV0dG9uOiBudWxsIH07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmZsb2F0TGFiZWxUeXBlKSB8fCBhcmdzLmZsb2F0TGFiZWxUeXBlID09PSAnTmV2ZXInKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuY29udGFpbmVyID0gY3JlYXRlSW5wdXRDb250YWluZXIoYXJncywgQ0xBU1NOQU1FUy5JTlBVVEdST1VQLCBDTEFTU05BTUVTLklOUFVUQ1VTVE9NVEFHLCAnc3BhbicpO1xuICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpbnB1dE9iamVjdC5jb250YWluZXIsIGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYXJncy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5JTlBVVCk7XG4gICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuY29udGFpbmVyLmFwcGVuZENoaWxkKGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVGbG9hdGluZ0lucHV0KGFyZ3MsIGlucHV0T2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50Tm9kZSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnB1dC1ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcmdzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50Tm9kZSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnB1dC1ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5wcm9wZXJ0aWVzKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnByb3BlcnRpZXMuc2hvd0NsZWFyQnV0dG9uKSAmJiBhcmdzLnByb3BlcnRpZXMuc2hvd0NsZWFyQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuY2xlYXJCdXR0b24gPSBjcmVhdGVDbGVhckJ1dHRvbihhcmdzLmVsZW1lbnQsIGlucHV0T2JqZWN0LmNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0T2JqZWN0LmNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtpbnB1dE9iamVjdC5jb250YWluZXJdLCBDTEFTU05BTUVTLklOUFVUR1JPVVApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmJ1dHRvbnMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuYnV0dG9ucy5wdXNoKGFwcGVuZFNwYW4oYXJncy5idXR0b25zW2ldLCBpbnB1dE9iamVjdC5jb250YWluZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dE9iamVjdCA9IHNldFByb3BlcnR5VmFsdWUoYXJncywgaW5wdXRPYmplY3QpO1xuICAgICAgICAgICAgcHJpdmF0ZUlucHV0T2JqID0gaW5wdXRPYmplY3Q7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRPYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgSW5wdXQuY3JlYXRlSW5wdXQgPSBjcmVhdGVJbnB1dDtcbiAgICAgICAgZnVuY3Rpb24gX2ZvY3VzRm4oKSB7XG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBnZXRQYXJlbnROb2RlKHRoaXMpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZmxvYXQtdGV4dCcpWzBdO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbbGFiZWxdLCBDTEFTU05BTUVTLkxBQkVMVE9QKTtcbiAgICAgICAgICAgIGlmIChsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5MQUJFTEJPVFRPTSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFtsYWJlbF0sIENMQVNTTkFNRVMuTEFCRUxCT1RUT00pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIF9ibHVyRm4oKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50Tm9kZSh0aGlzKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMF0udmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gcGFyZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZmxvYXQtdGV4dCcpWzBdO1xuICAgICAgICAgICAgICAgIGlmIChsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5MQUJFTFRPUCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbbGFiZWxdLCBDTEFTU05BTUVTLkxBQkVMVE9QKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbbGFiZWxdLCBDTEFTU05BTUVTLkxBQkVMQk9UVE9NKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB3aXJlRmxvYXRpbmdFdmVudHMoZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIF9mb2N1c0ZuKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIF9ibHVyRm4pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHVud2lyZUZsb2F0aW5nRXZlbnRzKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBfZm9jdXNGbik7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBfYmx1ckZuKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVGbG9hdGluZ0lucHV0KGFyZ3MsIGlucHV0T2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGZsb2F0TGluZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBmbG9hdExhYmVsRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChhcmdzLmZsb2F0TGFiZWxUeXBlID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICB3aXJlRmxvYXRpbmdFdmVudHMoYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGlucHV0T2JqZWN0LmNvbnRhaW5lcikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dE9iamVjdC5jb250YWluZXIgPSBjcmVhdGVJbnB1dENvbnRhaW5lcihhcmdzLCBDTEFTU05BTUVTLkZMT0FUSU5QVVQsIENMQVNTTkFNRVMuRkxPQVRDVVNUT01UQUcsICdkaXYnKTtcbiAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaW5wdXRPYmplY3QuY29udGFpbmVyLCBhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MuY3VzdG9tVGFnKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dE9iamVjdC5jb250YWluZXIuY2xhc3NMaXN0LmFkZChDTEFTU05BTUVTLkZMT0FUQ1VTVE9NVEFHKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZsb2F0TGluZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBDTEFTU05BTUVTLkZMT0FUTElORSB9KTtcbiAgICAgICAgICAgIGZsb2F0TGFiZWxFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsYWJlbCcsIHsgY2xhc3NOYW1lOiBDTEFTU05BTUVTLkZMT0FUVEVYVCB9KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmVsZW1lbnQuaWQpICYmIGFyZ3MuZWxlbWVudC5pZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsRWxlbWVudC5pZCA9ICdsYWJlbF8nICsgYXJncy5lbGVtZW50LmlkLnJlcGxhY2UoLyAvZywgJ18nKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXMoYXJncy5lbGVtZW50LCB7ICdhcmlhLWxhYmVsbGVkYnknOiBmbG9hdExhYmVsRWxlbWVudC5pZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmVsZW1lbnQucGxhY2Vob2xkZXIpICYmIGFyZ3MuZWxlbWVudC5wbGFjZWhvbGRlciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsRWxlbWVudC5pbm5lckhUTUwgPSBhcmdzLmVsZW1lbnQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnByb3BlcnRpZXMpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MucHJvcGVydGllcy5wbGFjZWhvbGRlcikgJiZcbiAgICAgICAgICAgICAgICBhcmdzLnByb3BlcnRpZXMucGxhY2Vob2xkZXIgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbEVsZW1lbnQuaW5uZXJIVE1MID0gYXJncy5wcm9wZXJ0aWVzLnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmbG9hdExhYmVsRWxlbWVudC5pbm5lckhUTUwpIHtcbiAgICAgICAgICAgICAgICBpbnB1dE9iamVjdC5jb250YWluZXIuY2xhc3NMaXN0LmFkZChDTEFTU05BTUVTLk5PRkxPQVRMQUJFTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dE9iamVjdC5jb250YWluZXIuYXBwZW5kQ2hpbGQoYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlucHV0T2JqZWN0LmNvbnRhaW5lci5hcHBlbmRDaGlsZChmbG9hdExpbmVsZW1lbnQpO1xuICAgICAgICAgICAgaW5wdXRPYmplY3QuY29udGFpbmVyLmFwcGVuZENoaWxkKGZsb2F0TGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZUxhYmVsU3RhdGUoYXJncy5lbGVtZW50LnZhbHVlLCBmbG9hdExhYmVsRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoYXJncy5mbG9hdExhYmVsVHlwZSA9PT0gJ0Fsd2F5cycpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRMYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTTkFNRVMuTEFCRUxCT1RUT00pKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2Zsb2F0TGFiZWxFbGVtZW50XSwgQ0xBU1NOQU1FUy5MQUJFTEJPVFRPTSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2Zsb2F0TGFiZWxFbGVtZW50XSwgQ0xBU1NOQU1FUy5MQUJFTFRPUCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5mbG9hdExhYmVsVHlwZSA9PT0gJ0F1dG8nKSB7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUxhYmVsU3RhdGUoYXJncy5lbGVtZW50LnZhbHVlLCBmbG9hdExhYmVsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlTGFiZWxTdGF0ZShhcmdzLmVsZW1lbnQudmFsdWUsIGZsb2F0TGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0eVZhbHVlKGFyZ3MsIGlucHV0T2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5wcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhhcmdzLnByb3BlcnRpZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjc3NDbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3NzQ2xhc3MoYXJncy5wcm9wZXJ0aWVzLmNzc0NsYXNzLCBbaW5wdXRPYmplY3QuY29udGFpbmVyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbmFibGVkKGFyZ3MucHJvcGVydGllcy5lbmFibGVkLCBhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbmFibGVSdGwoYXJncy5wcm9wZXJ0aWVzLmVuYWJsZVJ0bCwgW2lucHV0T2JqZWN0LmNvbnRhaW5lcl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGxhY2Vob2xkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBsYWNlaG9sZGVyKGFyZ3MucHJvcGVydGllcy5wbGFjZWhvbGRlciwgYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlYWRvbmx5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZWFkb25seShhcmdzLnByb3BlcnRpZXMucmVhZG9ubHksIGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRPYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlSWNvblN0YXRlKHZhbHVlLCBidXR0b24pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2J1dHRvbl0sIENMQVNTTkFNRVMuQ0xFQVJJQ09OSElERSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtidXR0b25dLCBDTEFTU05BTUVTLkNMRUFSSUNPTkhJREUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUxhYmVsU3RhdGUodmFsdWUsIGxhYmVsKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtsYWJlbF0sIENMQVNTTkFNRVMuTEFCRUxUT1ApO1xuICAgICAgICAgICAgICAgIGlmIChsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5MQUJFTEJPVFRPTSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbbGFiZWxdLCBDTEFTU05BTUVTLkxBQkVMQk9UVE9NKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobGFiZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTTkFNRVMuTEFCRUxUT1ApKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2xhYmVsXSwgQ0xBU1NOQU1FUy5MQUJFTFRPUCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2xhYmVsXSwgQ0xBU1NOQU1FUy5MQUJFTEJPVFRPTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0UGFyZW50Tm9kZShlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsZWFyQnV0dG9uKGVsZW1lbnQsIGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBDTEFTU05BTUVTLkNMRUFSSUNPTiB9KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHByaXZhdGVJbnB1dE9iai5jb250YWluZXIpICYmXG4gICAgICAgICAgICAgICAgcHJpdmF0ZUlucHV0T2JqLmNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW3ByaXZhdGVJbnB1dE9iai5jb250YWluZXJdLCBDTEFTU05BTUVTLklOUFVUR1JPVVApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYnV0dG9uXSwgQ0xBU1NOQU1FUy5DTEVBUklDT05ISURFKTtcbiAgICAgICAgICAgIHdpcmVDbGVhckJ0bkV2ZW50cyhlbGVtZW50LCBidXR0b24pO1xuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB3aXJlQ2xlYXJCdG5FdmVudHMoZWxlbWVudCwgYnV0dG9uKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLkRJU0FCTEUpIHx8IGVsZW1lbnQucmVhZE9ubHkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtidXR0b25dLCBDTEFTU05BTUVTLkNMRUFSSUNPTkhJREUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZUljb25TdGF0ZShlbGVtZW50LnZhbHVlLCBidXR0b24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlSWNvblN0YXRlKGVsZW1lbnQudmFsdWUsIGJ1dHRvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBlajJfYmFzZV8xLmFkZENsYXNzKFtidXR0b25dLCBDTEFTU05BTUVTLkNMRUFSSUNPTkhJREUpOyB9LCAyMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVMYWJlbChlbGVtZW50LCBmbG9hdExhYmVsVHlwZSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLkZMT0FUSU5QVVQpICYmIGZsb2F0TGFiZWxUeXBlID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBnZXRQYXJlbnROb2RlKGVsZW1lbnQpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZmxvYXQtdGV4dCcpWzBdO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUxhYmVsU3RhdGUoZWxlbWVudC52YWx1ZSwgbGFiZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUlucHV0Q29udGFpbmVyKGFyZ3MsIGNsYXNzTmFtZSwgdGFnQ2xhc3MsIHRhZykge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lcjtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmN1c3RvbVRhZykpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoYXJncy5jdXN0b21UYWcsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSk7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGFnQ2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KHRhZywgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUsIGVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlLCBjbGVhckJ1dHRvbikge1xuICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKCghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmbG9hdExhYmVsVHlwZSkpICYmIGZsb2F0TGFiZWxUeXBlID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUxhYmVsKGVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjbGVhckJ1dHRvbikgJiYgY2xlYXJCdXR0b24pIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IHBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDTEFTU05BTUVTLkNMRUFSSUNPTilbMF07XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUgJiYgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5wdXQtZm9jdXMnKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFtidXR0b25dLCBDTEFTU05BTUVTLkNMRUFSSUNPTkhJREUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYnV0dG9uXSwgQ0xBU1NOQU1FUy5DTEVBUklDT05ISURFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgSW5wdXQuc2V0VmFsdWUgPSBzZXRWYWx1ZTtcbiAgICAgICAgZnVuY3Rpb24gc2V0Q3NzQ2xhc3MoY3NzQ2xhc3MsIGVsZW1lbnRzLCBvbGRDbGFzcykge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKG9sZENsYXNzKSAmJiBvbGRDbGFzcyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKGVsZW1lbnRzLCBvbGRDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3NzQ2xhc3MpICYmIGNzc0NsYXNzICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoZWxlbWVudHMsIGNzc0NsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBJbnB1dC5zZXRDc3NDbGFzcyA9IHNldENzc0NsYXNzO1xuICAgICAgICBmdW5jdGlvbiBzZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlciwgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gZ2V0UGFyZW50Tm9kZShlbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLkZMT0FUSU5QVVQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHBsYWNlaG9sZGVyKSAmJiBwbGFjZWhvbGRlciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMQVNTTkFNRVMuRkxPQVRURVhUKVswXS50ZXh0Q29udGVudCA9IHBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FUy5OT0ZMT0FUTEFCRUwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRVMuTk9GTE9BVExBQkVMKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMQVNTTkFNRVMuRkxPQVRURVhUKVswXS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwbGFjZWhvbGRlcikgJiYgcGxhY2Vob2xkZXIgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhlbGVtZW50LCB7ICdwbGFjZWhvbGRlcic6IHBsYWNlaG9sZGVyLCAnYXJpYS1wbGFjZWhvbGRlcic6IHBsYWNlaG9sZGVyIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXBsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0LnNldFBsYWNlaG9sZGVyID0gc2V0UGxhY2Vob2xkZXI7XG4gICAgICAgIGZ1bmN0aW9uIHNldFJlYWRvbmx5KGlzUmVhZG9ubHksIGVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlKSB7XG4gICAgICAgICAgICBpZiAoaXNSZWFkb25seSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhlbGVtZW50LCB7IHJlYWRvbmx5OiAnJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGZsb2F0TGFiZWxUeXBlKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlTGFiZWwoZWxlbWVudCwgZmxvYXRMYWJlbFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0LnNldFJlYWRvbmx5ID0gc2V0UmVhZG9ubHk7XG4gICAgICAgIGZ1bmN0aW9uIHNldEVuYWJsZVJ0bChpc1J0bCwgZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGlmIChpc1J0bCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoZWxlbWVudHMsIENMQVNTTkFNRVMuUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoZWxlbWVudHMsIENMQVNTTkFNRVMuUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBJbnB1dC5zZXRFbmFibGVSdGwgPSBzZXRFbmFibGVSdGw7XG4gICAgICAgIGZ1bmN0aW9uIHNldEVuYWJsZWQoaXNFbmFibGUsIGVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlKSB7XG4gICAgICAgICAgICB2YXIgZGlzYWJsZWRBdHRycyA9IHsgJ2Rpc2FibGVkJzogJ2Rpc2FibGVkJywgJ2FyaWEtZGlzYWJsZWQnOiAndHJ1ZScgfTtcbiAgICAgICAgICAgIGlmIChpc0VuYWJsZSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLkRJU0FCTEUpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUF0dHJpYnV0ZXMoZGlzYWJsZWRBdHRycywgZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICBhZGRBdHRyaWJ1dGVzKGRpc2FibGVkQXR0cnMsIGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGZsb2F0TGFiZWxUeXBlKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlTGFiZWwoZWxlbWVudCwgZmxvYXRMYWJlbFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0LnNldEVuYWJsZWQgPSBzZXRFbmFibGVkO1xuICAgICAgICBmdW5jdGlvbiByZW1vdmVBdHRyaWJ1dGVzKGF0dHJzLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoYXR0cnMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudCA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2Rpc2FibGVkJykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FUy5ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2Rpc2FibGVkJyAmJiBwYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLklOUFVUR1JPVVApKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLkRJU0FCTEUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAncGxhY2Vob2xkZXInICYmIHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTTkFNRVMuRkxPQVRJTlBVVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMQVNTTkFNRVMuRkxPQVRURVhUKVswXS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgSW5wdXQucmVtb3ZlQXR0cmlidXRlcyA9IHJlbW92ZUF0dHJpYnV0ZXM7XG4gICAgICAgIGZ1bmN0aW9uIGFkZEF0dHJpYnV0ZXMoYXR0cnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhhdHRycyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gZ2V0UGFyZW50Tm9kZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU05BTUVTLkRJU0FCTEUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnZGlzYWJsZWQnICYmIHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTTkFNRVMuSU5QVVRHUk9VUCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRVMuRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdwbGFjZWhvbGRlcicgJiYgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ0xBU1NOQU1FUy5GTE9BVFRFWFQpWzBdLnRleHRDb250ZW50ID0gYXR0cnNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0LmFkZEF0dHJpYnV0ZXMgPSBhZGRBdHRyaWJ1dGVzO1xuICAgICAgICBmdW5jdGlvbiByZW1vdmVGbG9hdGluZyhpbnB1dCkge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGlucHV0LmNvbnRhaW5lcjtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb250YWluZXIpICYmIGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dEVsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyArIENMQVNTTkFNRVMuRkxPQVRURVhUKS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2xlYXJCdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmUtY2xlYXItaWNvbicpICE9PSBudWxsO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZGV0YWNoKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyArIENMQVNTTkFNRVMuRkxPQVRMSU5FKSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2goY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xBU1NOQU1FUy5GTE9BVFRFWFQpKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdChjb250YWluZXIsIFtDTEFTU05BTUVTLklOUFVUR1JPVVBdLCBbQ0xBU1NOQU1FUy5GTE9BVElOUFVUXSk7XG4gICAgICAgICAgICAgICAgdW53aXJlRmxvYXRpbmdFdmVudHMoaW5wdXRFbGUpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhpbnB1dEVsZSwgeyAncGxhY2Vob2xkZXInOiBwbGFjZWhvbGRlciB9KTtcbiAgICAgICAgICAgICAgICBpbnB1dEVsZS5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRVMuSU5QVVQpO1xuICAgICAgICAgICAgICAgIGlmICghY2xlYXJCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFbGUucmVtb3ZlQXR0cmlidXRlKCdyZXF1aXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBJbnB1dC5yZW1vdmVGbG9hdGluZyA9IHJlbW92ZUZsb2F0aW5nO1xuICAgICAgICBmdW5jdGlvbiBhZGRGbG9hdGluZyhpbnB1dCwgdHlwZSwgcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBlajJfYmFzZV8xLmNsb3Nlc3QoaW5wdXQsICcuJyArIENMQVNTTkFNRVMuSU5QVVRHUk9VUCk7XG4gICAgICAgICAgICBpZiAodHlwZSAhPT0gJ05ldmVyJykge1xuICAgICAgICAgICAgICAgIHZhciBjdXN0b21UYWcgPSBjb250YWluZXIudGFnTmFtZTtcbiAgICAgICAgICAgICAgICBjdXN0b21UYWcgPSBjdXN0b21UYWcgIT09ICdESVYnICYmIGN1c3RvbVRhZyAhPT0gJ1NQQU4nID8gY3VzdG9tVGFnIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHsgZWxlbWVudDogaW5wdXQsIGZsb2F0TGFiZWxUeXBlOiB0eXBlLCBjdXN0b21UYWc6IGN1c3RvbVRhZywgcHJvcGVydGllczogeyBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIgfSB9O1xuICAgICAgICAgICAgICAgIHZhciBpY29uRWxlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWNsZWFyLWljb24nKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRPYmogPSB7IGNvbnRhaW5lcjogY29udGFpbmVyIH07XG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLklOUFVUKTtcbiAgICAgICAgICAgICAgICBjcmVhdGVGbG9hdGluZ0lucHV0KGFyZ3MsIGlucHV0T2JqKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChpY29uRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBpY29uRWxlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWlucHV0LWdyb3VwLWljb24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoaWNvbkVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FUy5JTlBVVEdST1VQKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbG9hdExpbmUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLicgKyBDTEFTU05BTUVTLkZMT0FUTElORSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbG9hdFRleHQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLicgKyBDTEFTU05BTUVTLkZMT0FUVEVYVCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoaW5wdXQsIGljb25FbGUpO1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGZsb2F0TGluZSwgaWNvbkVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoZmxvYXRUZXh0LCBpY29uRWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgSW5wdXQuYWRkRmxvYXRpbmcgPSBhZGRGbG9hdGluZztcbiAgICAgICAgZnVuY3Rpb24gYXBwZW5kU3BhbihpY29uQ2xhc3MsIGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBpY29uQ2xhc3MgfSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgICAgIGlmICghY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLklOUFVUR1JPVVApKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5JTlBVVEdST1VQKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRpc2FibGVkJykgJiYgIWNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZS1pbnB1dC1idG4tcmlwcGxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gdGhpcztcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgZWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQtYnRuLXJpcHBsZScpOyB9LCA1MDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgICAgICB9XG4gICAgICAgIElucHV0LmFwcGVuZFNwYW4gPSBhcHBlbmRTcGFuO1xuICAgIH0pKElucHV0ID0gZXhwb3J0cy5JbnB1dCB8fCAoZXhwb3J0cy5JbnB1dCA9IHt9KSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2lucHV0L2lucHV0LmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vaW5wdXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbnB1dF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbnB1dF8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5wdXQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9mb3JtLXZhbGlkYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGZvcm1fdmFsaWRhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGZvcm1fdmFsaWRhdG9yXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9mb3JtLXZhbGlkYXRvci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZBTElEQVRFX0VNQUlMID0gbmV3IFJlZ0V4cCgnXltBLVphLXowLTkuXyUrLV17Myx9QFthLXpBLVpdezMsfShbLl17MX1bYS16QS1aXXsyLDV9JyArXG4gICAgICAgICd8Wy5dezF9W2EtekEtWl17Miw0fVsuXXsxfVthLXpBLVpdezIsNH0pJCcpO1xuICAgIHZhciBWQUxJREFURV9VUkwgPSBuZXcgUmVnRXhwKCdeKChmdHB8aHR0cHxodHRwcyk6XFwvXFwvKT93d3dcXC4oW0Etel17Mix9KVxcLihbQS16XXsyLH0pJCcpO1xuICAgIHZhciBWQUxJREFURV9EQVRFX0lTTyA9IG5ldyBSZWdFeHAoJ14oWzAtOV17NH0pLSgwWzEtOV18MVswLTJdKS0oMFsxLTldfFsxLTJdWzAtOV18M1swLTFdKSQnKTtcbiAgICB2YXIgVkFMSURBVEVfRElHSVRTID0gbmV3IFJlZ0V4cCgnXlswLTldKiQnKTtcbiAgICB2YXIgVkFMSURBVEVfUEhPTkUgPSBuZXcgUmVnRXhwKCdeWytdP1swLTldezksMTN9JCcpO1xuICAgIHZhciBWQUxJREFURV9DUkVESVRDQVJEID0gbmV3IFJlZ0V4cCgnXlxcXFxkezEzLDE2fSQnKTtcbiAgICB2YXIgRXJyb3JPcHRpb247XG4gICAgKGZ1bmN0aW9uIChFcnJvck9wdGlvbikge1xuICAgICAgICBFcnJvck9wdGlvbltFcnJvck9wdGlvbltcIk1lc3NhZ2VcIl0gPSAwXSA9IFwiTWVzc2FnZVwiO1xuICAgICAgICBFcnJvck9wdGlvbltFcnJvck9wdGlvbltcIkxhYmVsXCJdID0gMV0gPSBcIkxhYmVsXCI7XG4gICAgfSkoRXJyb3JPcHRpb24gPSBleHBvcnRzLkVycm9yT3B0aW9uIHx8IChleHBvcnRzLkVycm9yT3B0aW9uID0ge30pKTtcbiAgICB2YXIgRm9ybVZhbGlkYXRvciA9IEZvcm1WYWxpZGF0b3JfMSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGb3JtVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGb3JtVmFsaWRhdG9yKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy52YWxpZGF0ZWQgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmVycm9yUnVsZXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmFsbG93U3VibWl0ID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5yZXF1aXJlZCA9ICdyZXF1aXJlZCc7XG4gICAgICAgICAgICBfdGhpcy5pbmZvRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICBfdGhpcy5pbnB1dEVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgX3RoaXMuc2VsZWN0UXVlcnkgPSAnaW5wdXQ6bm90KFt0eXBlPXJlc2V0XSk6bm90KFt0eXBlPWJ1dHRvbl0pLCBzZWxlY3QsIHRleHRhcmVhJztcbiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQuJyxcbiAgICAgICAgICAgICAgICBlbWFpbDogJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MuJyxcbiAgICAgICAgICAgICAgICB1cmw6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBVUkwuJyxcbiAgICAgICAgICAgICAgICBkYXRlOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgZGF0ZS4nLFxuICAgICAgICAgICAgICAgIGRhdGVJc286ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBkYXRlICggSVNPICkuJyxcbiAgICAgICAgICAgICAgICBjcmVkaXRjYXJkOiAnUGxlYXNlIGVudGVyIHZhbGlkIGNhcmQgbnVtYmVyJyxcbiAgICAgICAgICAgICAgICBudW1iZXI6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBudW1iZXIuJyxcbiAgICAgICAgICAgICAgICBkaWdpdHM6ICdQbGVhc2UgZW50ZXIgb25seSBkaWdpdHMuJyxcbiAgICAgICAgICAgICAgICBtYXhMZW5ndGg6ICdQbGVhc2UgZW50ZXIgbm8gbW9yZSB0aGFuIHswfSBjaGFyYWN0ZXJzLicsXG4gICAgICAgICAgICAgICAgbWluTGVuZ3RoOiAnUGxlYXNlIGVudGVyIGF0IGxlYXN0IHswfSBjaGFyYWN0ZXJzLicsXG4gICAgICAgICAgICAgICAgcmFuZ2VMZW5ndGg6ICdQbGVhc2UgZW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIHswfSBhbmQgezF9IGNoYXJhY3RlcnMgbG9uZy4nLFxuICAgICAgICAgICAgICAgIHJhbmdlOiAnUGxlYXNlIGVudGVyIGEgdmFsdWUgYmV0d2VlbiB7MH0gYW5kIHsxfS4nLFxuICAgICAgICAgICAgICAgIG1heDogJ1BsZWFzZSBlbnRlciBhIHZhbHVlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB7MH0uJyxcbiAgICAgICAgICAgICAgICBtaW46ICdQbGVhc2UgZW50ZXIgYSB2YWx1ZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gezB9LicsXG4gICAgICAgICAgICAgICAgcmVnZXg6ICdQbGVhc2UgZW50ZXIgYSBjb3JyZWN0IHZhbHVlLicsXG4gICAgICAgICAgICAgICAgdGVsOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgcGhvbmUgbnVtYmVyLicsXG4gICAgICAgICAgICAgICAgcGF0dGVybjogJ1BsZWFzZSBlbnRlciBhIGNvcnJlY3QgcGF0dGVybiB2YWx1ZS4nLFxuICAgICAgICAgICAgICAgIGVxdWFsVG86ICdQbGVhc2UgZW50ZXIgdGhlIHZhbGlkIG1hdGNoIHRleHQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycgPyBlajJfYmFzZV8xLnNlbGVjdChlbGVtZW50LCBkb2N1bWVudCkgOiBlbGVtZW50O1xuICAgICAgICAgICAgaWYgKF90aGlzLmVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdub3ZhbGlkYXRlJywgJycpO1xuICAgICAgICAgICAgICAgIF90aGlzLmlucHV0RWxlbWVudHMgPSBlajJfYmFzZV8xLnNlbGVjdEFsbChfdGhpcy5zZWxlY3RRdWVyeSwgX3RoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY3JlYXRlSFRNTDVSdWxlcygpO1xuICAgICAgICAgICAgICAgIF90aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuYWRkUnVsZXMgPSBmdW5jdGlvbiAobmFtZSwgcnVsZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5leHRlbmQodGhpcy5ydWxlc1tuYW1lXSwgcnVsZXMsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucnVsZXNbbmFtZV0gPSBydWxlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUucmVtb3ZlUnVsZXMgPSBmdW5jdGlvbiAobmFtZSwgcnVsZXMpIHtcbiAgICAgICAgICAgIGlmICghbmFtZSAmJiAhcnVsZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bGVzID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnJ1bGVzW25hbWVdICYmICFydWxlcykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJ1bGVzW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5ydWxlc1tuYW1lXSAmJiBydWxlcykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJ1bGVzW25hbWVdW3J1bGVzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBPYmplY3Qua2V5cyh0aGlzLnJ1bGVzKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZCAmJiBydWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlUnVsZXMoc2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBydWxlcy5pbmRleE9mKHNlbGVjdGVkKSAhPT0gLTEgJiYgdGhpcy5lcnJvclJ1bGVzLmZpbHRlcihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5uYW1lID09PSBzZWxlY3RlZDtcbiAgICAgICAgICAgICAgICB9KS5sZW5ndGggPT09IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJ1bGVzXzEgPSBydWxlczsgX2kgPCBydWxlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZV8xID0gcnVsZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVSdWxlcyhuYW1lXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvclJ1bGVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yUnVsZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVkID0gW107XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVzZXQoKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGVqMl9iYXNlXzEuc2VsZWN0QWxsKHRoaXMuc2VsZWN0UXVlcnksIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzEgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lcnJvckNsYXNzKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQubmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5wdXRFbGVtZW50KGlucHV0Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEVycm9yRWxlbWVudChpbnB1dC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlTWVzc2FnZShpbnB1dC5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnZhbGlkQ2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5nZXRJbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQgPSAoZWoyX2Jhc2VfMS5zZWxlY3QoJ1tuYW1lPScgKyBuYW1lICsgJ10nLCB0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlucHV0RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJ1bGVzID0ge307XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBlajJfYmFzZV8xLnNlbGVjdEFsbCgnLicgKyB0aGlzLmVycm9yQ2xhc3MgKyAnLCAuJyArIHRoaXMudmFsaWRDbGFzcywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMiA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c18yW19pXTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdmb3JtVmFsaWRhdG9yJztcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuY3JlYXRlSFRNTDVSdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkZWZSdWxlcyA9IFsncmVxdWlyZWQnLCAncmVnZXgnLCAncmFuZ2VMZW5ndGgnLCAnbWF4TGVuZ3RoJywgJ21pbkxlbmd0aCcsICdkYXRlSXNvJywgJ2RpZ2l0cycsICdwYXR0ZXJuJyxcbiAgICAgICAgICAgICAgICAnZGF0YS12YWwtcmVxdWlyZWQnLCAndHlwZScsICdkYXRhLXZhbGlkYXRpb24nLCAnbWluJywgJ21heCcsICdyYW5nZScsICdlcXVhbFRvJywgJ2RhdGEtdmFsLW1pbmxlbmd0aC1taW4nLFxuICAgICAgICAgICAgICAgICdkYXRhLXZhbC1lcXVhbHRvLW90aGVyJywgJ2RhdGEtdmFsLW1heGxlbmd0aC1tYXgnLCAnZGF0YS12YWwtcmFuZ2UtbWluJywgJ2RhdGEtdmFsLXJlZ2V4LXBhdHRlcm4nLCAnZGF0YS12YWwtbGVuZ3RoLW1heCcsXG4gICAgICAgICAgICAgICAgJ2RhdGEtdmFsLWNyZWRpdGNhcmQnLCAnZGF0YS12YWwtcGhvbmUnXTtcbiAgICAgICAgICAgIHZhciBhY2NlcHRlZFR5cGVzID0gWydlbWFpbCcsICd1cmwnLCAnZGF0ZScsICdudW1iZXInLCAndGVsJ107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gKHRoaXMuaW5wdXRFbGVtZW50cyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBhbGxSdWxlID0ge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBkZWZSdWxlc18xID0gZGVmUnVsZXM7IF9iIDwgZGVmUnVsZXNfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSBkZWZSdWxlc18xW19iXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmdldEF0dHJpYnV0ZShydWxlKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChydWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVxdWlyZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIGFsbFJ1bGUsIHJ1bGUsIGlucHV0LnJlcXVpcmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0YS12YWxpZGF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZSA9IGlucHV0LmdldEF0dHJpYnV0ZShydWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBhbGxSdWxlLCBydWxlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2NlcHRlZFR5cGVzLmluZGV4T2YoaW5wdXQudHlwZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIGFsbFJ1bGUsIGlucHV0LnR5cGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JhbmdlTGVuZ3RoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgYWxsUnVsZSwgcnVsZSwgSlNPTi5wYXJzZShpbnB1dC5nZXRBdHRyaWJ1dGUocnVsZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXF1YWxUbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGlucHV0LmdldEF0dHJpYnV0ZShydWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBhbGxSdWxlLCBydWxlLCBpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsJykgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uUnVsZShpbnB1dCwgYWxsUnVsZSwgcnVsZSwgaW5wdXQuZ2V0QXR0cmlidXRlKHJ1bGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgYWxsUnVsZSwgcnVsZSwgaW5wdXQuZ2V0QXR0cmlidXRlKHJ1bGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhhbGxSdWxlKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSdWxlcyhpbnB1dC5uYW1lLCBhbGxSdWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmFubm90YXRpb25SdWxlID0gZnVuY3Rpb24gKGlucHV0LCBydWxlQ29uLCBydWxlTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBhbm5vdGF0aW9uUnVsZSA9IHJ1bGVOYW1lLnNwbGl0KCctJyk7XG4gICAgICAgICAgICB2YXIgcnVsZXNMaXN0ID0gWydyZXF1aXJlZCcsICdjcmVkaXRjYXJkJywgJ3Bob25lJywgJ21heGxlbmd0aCcsICdtaW5sZW5ndGgnLCAncmFuZ2UnLCAncmVnZXgnLCAnZXF1YWx0byddO1xuICAgICAgICAgICAgdmFyIHJ1bGVGaXJzdE5hbWUgPSBhbm5vdGF0aW9uUnVsZVthbm5vdGF0aW9uUnVsZS5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHZhciBydWxlU2Vjb25kTmFtZSA9IGFubm90YXRpb25SdWxlW2Fubm90YXRpb25SdWxlLmxlbmd0aCAtIDJdO1xuICAgICAgICAgICAgaWYgKHJ1bGVzTGlzdC5pbmRleE9mKHJ1bGVGaXJzdE5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocnVsZUZpcnN0TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXF1aXJlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIHJ1bGVDb24sICdyZXF1aXJlZCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjcmVkaXRjYXJkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgcnVsZUNvbiwgJ2NyZWRpdGNhcmQnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGhvbmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBydWxlQ29uLCAndGVsJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocnVsZXNMaXN0LmluZGV4T2YocnVsZVNlY29uZE5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocnVsZVNlY29uZE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF4bGVuZ3RoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgcnVsZUNvbiwgJ21heExlbmd0aCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdtaW5sZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBydWxlQ29uLCAnbWluTGVuZ3RoJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaW52YWx1ZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS12YWwtcmFuZ2UtbWluJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4dmFsdWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsLXJhbmdlLW1heCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBydWxlQ29uLCAncmFuZ2UnLCBbbWludmFsdWUsIG1heHZhbHVlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXF1YWx0byc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUocnVsZU5hbWUpLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIHJ1bGVDb24sICdlcXVhbFRvJywgaWRbaWQubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlZ2V4JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgcnVsZUNvbiwgJ3JlZ2V4JywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5kZWZSdWxlID0gZnVuY3Rpb24gKGlucHV0LCBydWxlQ29uLCBydWxlTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLScgKyBydWxlTmFtZSArICctbWVzc2FnZScpO1xuICAgICAgICAgICAgdmFyIGFubm90YXRpb25NZXNzYWdlID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbC0nICsgcnVsZU5hbWUpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IFt2YWx1ZSwgbWVzc2FnZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhbm5vdGF0aW9uTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gW3ZhbHVlLCBhbm5vdGF0aW9uTWVzc2FnZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydWxlQ29uW3J1bGVOYW1lXSA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9ICh0aGlzLmlucHV0RWxlbWVudHMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoRm9ybVZhbGlkYXRvcl8xLmlzQ2hlY2thYmxlKGlucHV0KSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoaW5wdXQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5wdXQudGFnTmFtZSA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKGlucHV0LCAnY2hhbmdlJywgdGhpcy5jaGFuZ2VIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChpbnB1dCwgJ2ZvY3Vzb3V0JywgdGhpcy5mb2N1c091dEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoaW5wdXQsICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9ICh0aGlzLmlucHV0RWxlbWVudHMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5jbGVhckV2ZW50cyhpbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuZm9jdXNPdXRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZm9jdXNvdXQnLCBlKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGhpcy5ydWxlc1tlbGVtZW50Lm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucnVsZXNbZWxlbWVudC5uYW1lXVt0aGlzLnJlcXVpcmVkXSB8fCBlbGVtZW50LnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZShlbGVtZW50Lm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnZhbGlkYXRlZC5pbmRleE9mKGVsZW1lbnQubmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVkLnB1c2goZWxlbWVudC5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmtleVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2tleXVwJywgZSk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGV4Y2x1ZGVLZXlzID0gWzE2LCAxNywgMTgsIDIwLCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLCA0NSwgMTQ0LCAyMjVdO1xuICAgICAgICAgICAgaWYgKGUud2hpY2ggPT09IDkgJiYgKCF0aGlzLnJ1bGVzW2VsZW1lbnQubmFtZV0gfHwgKHRoaXMucnVsZXNbZWxlbWVudC5uYW1lXSAmJiAhdGhpcy5ydWxlc1tlbGVtZW50Lm5hbWVdW3RoaXMucmVxdWlyZWRdKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZWQuaW5kZXhPZihlbGVtZW50Lm5hbWUpICE9PSAtMSAmJiB0aGlzLnJ1bGVzW2VsZW1lbnQubmFtZV0gJiYgZXhjbHVkZUtleXMuaW5kZXhPZihlLndoaWNoKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlKGVsZW1lbnQubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NsaWNrJywgZSk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSAhPT0gJ3N1Ym1pdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlKGVsZW1lbnQubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZm9ybW5vdmFsaWRhdGUnKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dTdWJtaXQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5jaGFuZ2VIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgZSk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZShlbGVtZW50Lm5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5zdWJtaXRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignc3VibWl0JywgZSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dTdWJtaXQgJiYgIXRoaXMudmFsaWRhdGUoKSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dTdWJtaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUudmFsaWRhdGVSdWxlcyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucnVsZXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBPYmplY3Qua2V5cyh0aGlzLnJ1bGVzW25hbWVdKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0SW5wdXRFbGVtZW50KG5hbWUpO1xuICAgICAgICAgICAgdGhpcy5nZXRFcnJvckVsZW1lbnQobmFtZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJ1bGVzXzIgPSBydWxlczsgX2kgPCBydWxlc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNfMltfaV07XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IHRoaXMuZ2V0RXJyb3JNZXNzYWdlKHRoaXMucnVsZXNbbmFtZV1bcnVsZV0sIHJ1bGUpO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvclJ1bGUgPSB7IG5hbWU6IG5hbWUsIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSB9O1xuICAgICAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0TmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5pbnB1dEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQobmFtZSwgcnVsZSkgJiYgIXRoaXMuaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLmlnbm9yZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFcnJvclJ1bGVzKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yUnVsZXMucHVzaChlcnJvclJ1bGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIHRoaXMuaW5wdXRFbGVtZW50LmlkICsgJy1pbmZvJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbmZvRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVFcnJvckVsZW1lbnQobmFtZSwgZXJyb3JSdWxlLm1lc3NhZ2UsIHRoaXMuaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoZXJyb3JSdWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBldmVudEFyZ3MuZXJyb3JFbGVtZW50ID0gdGhpcy5pbmZvRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRBcmdzLnN0YXR1cyA9ICdmYWlsdXJlJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmVycm9yQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMudmFsaWRDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndmFsaWRhdGlvbkNvbXBsZXRlJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUgPT09ICdyZXF1aXJlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1yZXF1aXJlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBldmVudEFyZ3Muc3RhdHVzID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3ZhbGlkYXRpb25Db21wbGV0ZScsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKG5hbWUsIHJ1bGUpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnJ1bGVzW25hbWVdW3J1bGVdO1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gKHBhcmFtcyBpbnN0YW5jZW9mIEFycmF5ICYmIHR5cGVvZiBwYXJhbXNbMV0gPT09ICdzdHJpbmcnKSA/IHBhcmFtc1swXSA6IHBhcmFtcztcbiAgICAgICAgICAgIHZhciBjdXJyZW50UnVsZSA9IHRoaXMucnVsZXNbbmFtZV1bcnVsZV07XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgdmFsdWU6IHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlLCBwYXJhbTogcGFyYW0sIGVsZW1lbnQ6IHRoaXMuaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudDogdGhpcy5lbGVtZW50IH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3ZhbGlkYXRpb25CZWdpbicsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRSdWxlICYmIHR5cGVvZiBjdXJyZW50UnVsZVswXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IGN1cnJlbnRSdWxlWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIHsgZWxlbWVudDogdGhpcy5pbnB1dEVsZW1lbnQsIHZhbHVlOiB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEZvcm1WYWxpZGF0b3JfMS5pc0NoZWNrYWJsZSh0aGlzLmlucHV0RWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpZiAocnVsZSAhPT0gJ3JlcXVpcmVkJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuc2VsZWN0QWxsKCdpbnB1dFtuYW1lPScgKyBuYW1lICsgJ106Y2hlY2tlZCcsIHRoaXMuZWxlbWVudCkubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBGb3JtVmFsaWRhdG9yXzEuY2hlY2tWYWxpZGF0b3JbcnVsZV0oYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmdldEVycm9yTWVzc2FnZSA9IGZ1bmN0aW9uIChydWxlVmFsdWUsIHJ1bGUpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gKHJ1bGVWYWx1ZSBpbnN0YW5jZW9mIEFycmF5ICYmIHR5cGVvZiBydWxlVmFsdWVbMV0gPT09ICdzdHJpbmcnKSA/IHJ1bGVWYWx1ZVsxXSA6IHRoaXMuZGVmYXVsdE1lc3NhZ2VzW3J1bGVdO1xuICAgICAgICAgICAgdmFyIGZvcm1hdHMgPSBtZXNzYWdlLm1hdGNoKC97KFxcZCl9L2cpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGZvcm1hdHMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3JtYXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJ1bGVWYWx1ZSBpbnN0YW5jZW9mIEFycmF5ID8gcnVsZVZhbHVlW2ldIDogcnVsZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5yZXBsYWNlKGZvcm1hdHNbaV0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuY3JlYXRlRXJyb3JFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIG1lc3NhZ2UsIGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KHRoaXMuZXJyb3JFbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmVycm9yQ2xhc3MsXG4gICAgICAgICAgICAgICAgaW5uZXJIVE1MOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IGZvcjogbmFtZSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVycm9yT3B0aW9uID09PSBFcnJvck9wdGlvbi5NZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lcnJvckNsYXNzKTtcbiAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1tZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KHRoaXMuZXJyb3JDb250YWluZXIsIHsgY2xhc3NOYW1lOiB0aGlzLmVycm9yQ2xhc3MsIGlubmVySFRNTDogZXJyb3JFbGVtZW50Lm91dGVySFRNTCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVycm9yRWxlbWVudC5pZCA9IHRoaXMuaW5wdXRFbGVtZW50Lm5hbWUgKyAnLWluZm8nO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS12YWxtc2ctZm9yPVwiJyArIGlucHV0LmlkICsgJ1wiXScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXZhbG1zZy1mb3I9XCInICsgaW5wdXQuaWQgKyAnXCJdJykuYXBwZW5kQ2hpbGQoZXJyb3JFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlucHV0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tc2ctY29udGFpbmVyaWQnKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb250YWluZXJJZCA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1tc2ctY29udGFpbmVyaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgZGl2RWxlbWVudCA9IGlucHV0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBjb250YWluZXJJZCk7XG4gICAgICAgICAgICAgICAgZGl2RWxlbWVudC5hcHBlbmRDaGlsZChlcnJvckVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXN0b21QbGFjZW1lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tUGxhY2VtZW50LmNhbGwodGhpcywgdGhpcy5pbnB1dEVsZW1lbnQsIGVycm9yRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlcnJvckVsZW1lbnQsIHRoaXMuaW5wdXRFbGVtZW50Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVycm9yRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHRoaXMuZ2V0RXJyb3JFbGVtZW50KG5hbWUpO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZWQucHVzaChuYW1lKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tSZXF1aXJlZChuYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuZ2V0RXJyb3JFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5mb0VsZW1lbnQgPSBlajJfYmFzZV8xLnNlbGVjdCh0aGlzLmVycm9yRWxlbWVudCArICcuJyArIHRoaXMuZXJyb3JDbGFzcywgdGhpcy5pbnB1dEVsZW1lbnQucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW5mb0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm9FbGVtZW50ID0gZWoyX2Jhc2VfMS5zZWxlY3QodGhpcy5lcnJvckVsZW1lbnQgKyAnLicgKyB0aGlzLmVycm9yQ2xhc3MgKyAnW2Zvcj1cIicgKyBuYW1lICsgJ1wiXScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5mb0VsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLnJlbW92ZUVycm9yUnVsZXMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVycm9yUnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHRoaXMuZXJyb3JSdWxlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAocnVsZS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JSdWxlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5zaG93TWVzc2FnZSA9IGZ1bmN0aW9uIChlcnJvclJ1bGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5mb0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB0aGlzLmluZm9FbGVtZW50LmlubmVySFRNTCA9IGVycm9yUnVsZS5tZXNzYWdlO1xuICAgICAgICAgICAgdGhpcy5jaGVja1JlcXVpcmVkKGVycm9yUnVsZS5uYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuaGlkZU1lc3NhZ2UgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5mb0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFcnJvclJ1bGVzKG5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy52YWxpZENsYXNzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZXJyb3JDbGFzcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuY2hlY2tSZXF1aXJlZCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucnVsZXNbbmFtZV1bdGhpcy5yZXF1aXJlZF0gJiYgIXRoaXMuaW5wdXRFbGVtZW50LnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mb0VsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5pbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZU1lc3NhZ2UobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IuaXNDaGVja2FibGUgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dFR5cGUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dFR5cGUgJiYgKGlucHV0VHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBpbnB1dFR5cGUgPT09ICdyYWRpbycgfHwgaW5wdXRUeXBlID09PSAnc3VibWl0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGb3JtVmFsaWRhdG9yO1xuICAgIH0oZWoyX2Jhc2VfMS5CYXNlKSk7XG4gICAgRm9ybVZhbGlkYXRvci5jaGVja1ZhbGlkYXRvciA9IHtcbiAgICAgICAgcmVxdWlyZWQ6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24udmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgfSxcbiAgICAgICAgZW1haWw6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBWQUxJREFURV9FTUFJTC50ZXN0KG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHVybDogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFZBTElEQVRFX1VSTC50ZXN0KG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGVJc286IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBWQUxJREFURV9EQVRFX0lTTy50ZXN0KG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRlbDogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFZBTElEQVRFX1BIT05FLnRlc3Qob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY3JlZGl0Y2FyZDogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFZBTElEQVRFX0NSRURJVENBUkQudGVzdChvcHRpb24udmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBudW1iZXI6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKG9wdGlvbi52YWx1ZSkpICYmIG9wdGlvbi52YWx1ZS5pbmRleE9mKCcgJykgPT09IC0xO1xuICAgICAgICB9LFxuICAgICAgICBkaWdpdHM6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBWQUxJREFURV9ESUdJVFMudGVzdChvcHRpb24udmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBtYXhMZW5ndGg6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24udmFsdWUubGVuZ3RoIDw9IG9wdGlvbi5wYXJhbTtcbiAgICAgICAgfSxcbiAgICAgICAgbWluTGVuZ3RoOiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLnZhbHVlLmxlbmd0aCA+PSBvcHRpb24ucGFyYW07XG4gICAgICAgIH0sXG4gICAgICAgIHJhbmdlTGVuZ3RoOiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBvcHRpb24ucGFyYW07XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLnZhbHVlLmxlbmd0aCA+PSBwYXJhbVswXSAmJiBvcHRpb24udmFsdWUubGVuZ3RoIDw9IHBhcmFtWzFdO1xuICAgICAgICB9LFxuICAgICAgICByYW5nZTogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gb3B0aW9uLnBhcmFtO1xuICAgICAgICAgICAgcmV0dXJuICFpc05hTihOdW1iZXIob3B0aW9uLnZhbHVlKSkgJiYgTnVtYmVyKG9wdGlvbi52YWx1ZSkgPj0gcGFyYW1bMF0gJiYgTnVtYmVyKG9wdGlvbi52YWx1ZSkgPD0gcGFyYW1bMV07XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGU6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiAhaXNOYU4obmV3IERhdGUob3B0aW9uLnZhbHVlKS5nZXRUaW1lKCkpO1xuICAgICAgICB9LFxuICAgICAgICBtYXg6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4oTnVtYmVyKG9wdGlvbi52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICtvcHRpb24udmFsdWUgPD0gb3B0aW9uLnBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG9wdGlvbi52YWx1ZSkuZ2V0VGltZSgpIDw9IG5ldyBEYXRlKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob3B0aW9uLnBhcmFtKSkpLmdldFRpbWUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWluOiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihvcHRpb24udmFsdWUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiArb3B0aW9uLnZhbHVlID49IG9wdGlvbi5wYXJhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShvcHRpb24udmFsdWUpLmdldFRpbWUoKSA+PSBuZXcgRGF0ZShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9wdGlvbi5wYXJhbSkpKS5nZXRUaW1lKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZ2V4OiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChvcHRpb24ucGFyYW0pLnRlc3Qob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXF1YWxUbzogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgdmFyIGNvbXBhcmVUbyA9IG9wdGlvbi5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIG9wdGlvbi5wYXJhbSk7XG4gICAgICAgICAgICBvcHRpb24ucGFyYW0gPSBjb21wYXJlVG8udmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLnBhcmFtID09PSBvcHRpb24udmFsdWU7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnZS1oaWRkZW4nKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcImlnbm9yZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KHt9KVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcInJ1bGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoJ2UtZXJyb3InKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcImVycm9yQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnZS12YWxpZCcpXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwidmFsaWRDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCdsYWJlbCcpXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwiZXJyb3JFbGVtZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoJ2RpdicpXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwiZXJyb3JDb250YWluZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eShFcnJvck9wdGlvbi5MYWJlbClcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJlcnJvck9wdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJmb2N1c291dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJrZXl1cFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJjbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJjaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwic3VibWl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcInZhbGlkYXRpb25CZWdpblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJ2YWxpZGF0aW9uQ29tcGxldGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwiY3VzdG9tUGxhY2VtZW50XCIsIHZvaWQgMCk7XG4gICAgRm9ybVZhbGlkYXRvciA9IEZvcm1WYWxpZGF0b3JfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIEZvcm1WYWxpZGF0b3IpO1xuICAgIGV4cG9ydHMuRm9ybVZhbGlkYXRvciA9IEZvcm1WYWxpZGF0b3I7XG4gICAgdmFyIEZvcm1WYWxpZGF0b3JfMTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZm9ybS12YWxpZGF0b3IvZm9ybS12YWxpZGF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ=="]}